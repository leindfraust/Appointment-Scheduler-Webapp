"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[968],{6919:function(t,e,s){s.d(e,{Z:function(){return $}});var a=s(6252),i=s(3577);const l=t=>((0,a.dD)("data-v-adff8ddc"),t=t(),(0,a.Cn)(),t),o={class:"navbar is-hidden-desktop"},n={class:"navbar-brand"},c={class:"navbar-item"},r={class:"label"},d=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),u=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),h=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),p=[d,u,h],g={class:"has-text-centered block",style:{padding:"5px"}},m={class:"is-hidden-mobile is-hidden-touch image image-outer is-square",style:{margin:"auto"}},_=["src"],b={key:0,class:"title is-6"},f={class:"menu-list block"},v=l((()=>(0,a._)("p",{class:"menu-label"},"General",-1))),w=l((()=>(0,a._)("p",{class:"menu-label"},"Verification and Information",-1))),y=l((()=>(0,a._)("p",{class:"menu-label"},"Support",-1))),D={class:"block has-text-centered"};function k(t,e,s,l,d,u){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",o,[(0,a._)("div",n,[(0,a._)("a",c,[(0,a._)("label",r,"Dr. "+(0,i.zw)(t.$store.state.doctorName),1)]),(0,a._)("a",{role:"button",class:(0,i.C_)(["navbar-burger",{"is-active":!d.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:e[0]||(e[0]=(...t)=>u.menuNav&&u.menuNav(...t))},p,2)])]),(0,a._)("aside",{class:(0,i.C_)(["menu box",{"is-hidden-mobile":d.isActive,fixedMenu:d.isActive}]),style:{"background-color":"#D8E5FF",padding:"20px"}},[(0,a._)("div",g,[(0,a._)("figure",m,[(0,a._)("img",{class:"is-rounded image-inner",src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${d.alias}.jpg`},null,8,_)]),d.isActive?((0,a.wg)(),(0,a.iD)("h5",b,"Dr. "+(0,i.zw)(t.$store.state.doctorName),1)):(0,a.kq)("",!0)]),(0,a._)("ul",f,[v,(0,a._)("li",null,[(0,a._)("a",{onClick:e[1]||(e[1]=(...t)=>u.routeHome&&u.routeHome(...t))},"Appointments")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[2]||(e[2]=(...t)=>u.patientLogs&&u.patientLogs(...t))},"Patient History")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[3]||(e[3]=(...t)=>u.openSchedule&&u.openSchedule(...t))},"Schedule")]),w,(0,a._)("li",null,[(0,a._)("a",{onClick:e[4]||(e[4]=(...t)=>u.profile&&u.profile(...t))},"Profile")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[5]||(e[5]=(...t)=>u.openSecurity&&u.openSecurity(...t))},"Security")]),y,(0,a._)("li",null,[(0,a._)("a",{onClick:e[6]||(e[6]=(...e)=>t.openFAQs&&t.openFAQs(...e))},"FAQ")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[7]||(e[7]=t=>this.$router.push("/contactus"))},"Contact Us")])]),(0,a._)("div",D,[(0,a._)("button",{onClick:e[8]||(e[8]=(...t)=>u.logout&&u.logout(...t)),class:"button is-link is-rounded",type:"button"},"Logout")])],2)],64)}var C=s(4239),M=s(9669),N=s.n(M),x={name:"AdminMenu",data(){return{alias:C.Z.state.alias,isActive:!0}},methods:{async logout(){C.Z.commit("alias",null),await N()["delete"]("/session/doctor"),await this.$router.push("/doctor/login")},async routeHome(){await this.$router.push(`/doctor/${this.alias}`)},async profile(){await this.$router.push(`/doctor/${this.alias}/profile`)},async patientLogs(){await this.$router.push(`/doctor/${this.alias}/patients`)},async openSecurity(){await this.$router.push(`/doctor/${this.alias}/security`)},async openSchedule(){await this.$router.push(`/doctor/${this.alias}/schedule`)},menuNav(){this.isActive=!this.isActive}}},S=s(3744);const I=(0,S.Z)(x,[["render",k],["__scopeId","data-v-adff8ddc"]]);var $=I},1968:function(t,e,s){s.r(e),s.d(e,{default:function(){return It}});var a=s(6252),i=s(3577),l=s(9963);const o={class:"main-doctor"},n={class:"columns"},c={class:"column is-2"},r={class:"column"},d=(0,a._)("div",{class:"modal-background"},null,-1),u={class:"modal-content"},h={class:"section box"},p={class:"field is-horizontal"},g={class:"field-body"},m={class:"field"},_={class:"control"},b=(0,a._)("label",{class:"label"},"From:",-1),f=["value"],v={class:"field"},w={class:"control"},y=(0,a._)("div",{class:"label"},"To(Patient):",-1),D=["value"],k={class:"field"},C={class:"control"},M=(0,a._)("label",{class:"label"},"Attach an image(optional):",-1),N={class:"field"},x={class:"control"},S=(0,a._)("label",{class:"label"},"Subject: ",-1),I={class:"field"},$={class:"control"},A=(0,a._)("label",{class:"label"},"Message:",-1),H={class:"field"},P={class:"control has-text-right"},z=["disabled"],L={key:0,class:"has-text-success"},B=(0,a._)("p",{class:"subtitle"},"Messaging History",-1),F={key:1,class:"container"},j=(0,a._)("p",{class:"subtitle is-size-6 has-text-right"},"Are you sure you want to delete all messages?",-1),Z={class:"buttons is-right"},U={key:2},T={class:"notification",style:{margin:"5%"}},q={class:"content"},Y={key:0},O={class:"image is-square"},R=["src"],V={class:"has-text-centered"},K=["href"],Q=(0,a._)("br",null,null,-1),E=["onClick"],G={key:3},W=(0,a._)("p",null,"No past messages yet.",-1),J=[W],X={class:"section"},tt={class:"container is-widescreen is-fullhd",style:{padding:"15"}},et=(0,a._)("h1",{class:"title"}," APPOINTMENT HISTORY ",-1),st={class:"field"},at={class:"control"},it={key:0,class:"container"},lt={class:"subtitle has-text-black"},ot={class:"table-container"},nt={class:"table is-striped is-fullwidth"},ct=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"has-text-black-ter"},"Controls"),(0,a._)("th",{class:"has-text-black-ter"},"Reference ID"),(0,a._)("th",{class:"has-text-black-ter"},"Priority No."),(0,a._)("th",{class:"has-text-black-ter"},"Hospital Appointed"),(0,a._)("th",{class:"has-text-black-ter"},"First Name"),(0,a._)("th",{class:"has-text-black-ter"},"Last Name"),(0,a._)("th",{class:"has-text-black-ter"},"Contact Number"),(0,a._)("th",{class:"has-text-black-ter"},"Birthday"),(0,a._)("th",{class:"has-text-black-ter"},"Symptoms/Comments")])],-1),rt=["onClick"],dt={class:"has-text-black-ter"},ut={class:"has-text-black-ter"},ht={class:"has-text-black-ter"},pt={class:"has-text-black-ter"},gt={class:"has-text-black-ter"},mt={class:"has-text-black-ter"},_t={class:"has-text-black-ter"},bt={class:"has-text-black-ter"},ft={key:1,class:"notification is-info"};function vt(t,e,s,W,vt,wt){const yt=(0,a.up)("DoctorMenu");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[(0,a._)("div",c,[(0,a.Wm)(yt)]),(0,a._)("div",r,[(0,a._)("div",{class:(0,i.C_)(["modal",{"is-active":vt.isActiveModal}])},[d,(0,a._)("div",u,[(0,a._)("div",h,[(0,a._)("div",p,[(0,a._)("div",g,[(0,a._)("div",m,[(0,a._)("div",_,[b,(0,a._)("input",{class:"input",type:"text",value:"Dr. "+vt.doctorName,disabled:""},null,8,f)])]),(0,a._)("div",v,[(0,a._)("div",w,[y,(0,a._)("input",{class:"input",type:"text",value:vt.selectedPatient,disabled:""},null,8,D)])])])]),(0,a._)("div",k,[(0,a._)("div",C,[M,(0,a._)("input",{class:"input",type:"file",onChange:e[0]||(e[0]=t=>wt.handleFile(t))},null,32)])]),(0,a._)("div",N,[(0,a._)("div",x,[S,(0,a.wy)((0,a._)("input",{class:"input",type:"text",placeholder:"Subject","onUpdate:modelValue":e[1]||(e[1]=t=>vt.titleMsg=t)},null,512),[[l.nr,vt.titleMsg]])])]),(0,a._)("div",I,[(0,a._)("div",$,[A,(0,a.wy)((0,a._)("textarea",{class:"textarea",placeholder:"Message","onUpdate:modelValue":e[2]||(e[2]=t=>vt.noticeMsg=t)},"default value",512),[[l.nr,vt.noticeMsg]])])]),(0,a._)("div",H,[(0,a._)("div",P,[(0,a._)("button",{class:(0,i.C_)(["button is-primary",{"is-loading":vt.loadingButton}]),onClick:e[3]||(e[3]=(...t)=>wt.sendNotif&&wt.sendNotif(...t)),disabled:""==vt.selectedPatient||""==vt.noticeMsg},"Send",10,z)])]),vt.notificationSent?((0,a.wg)(),(0,a.iD)("p",L,[(0,a.Uk)(" A message has been sent to "),(0,a._)("b",null,(0,i.zw)(vt.messageSuccessSelectedPatient),1),(0,a.Uk)(". ")])):(0,a.kq)("",!0),(0,a._)("a",{class:"button is-size-6 has-text-danger is-pulled-right",onClick:e[4]||(e[4]=t=>vt.clearMsgPrompt=!0)},"Clear message history"),B,vt.clearMsgPrompt?((0,a.wg)(),(0,a.iD)("div",F,[j,(0,a._)("div",Z,[(0,a._)("button",{class:"button",onClick:e[5]||(e[5]=(...t)=>wt.clearNotif&&wt.clearNotif(...t))},"Yes"),(0,a._)("button",{class:"button",onClick:e[6]||(e[6]=t=>vt.clearMsgPrompt=!1)},"No")])])):(0,a.kq)("",!0),0!==Object.keys(vt.messageHistory).length?((0,a.wg)(),(0,a.iD)("div",U,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(vt.messageHistory,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{class:"container",key:s},[(0,a._)("div",T,[(0,a._)("div",q,[(0,a._)("p",null,"To: "+(0,i.zw)(e.to),1),(0,a._)("p",null,"Subject: "+(0,i.zw)(e.subject),1),(0,a._)("p",null,"Message: "+(0,i.zw)(e.message),1),e.id?((0,a.wg)(),(0,a.iD)("div",Y,[(0,a._)("figure",O,[(0,a._)("img",{loading:"lazy",src:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/doctorCopy/${t.$store.state.doctorID+e.id}.jpg`},null,8,R)]),(0,a._)("div",V,[(0,a._)("a",{href:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/doctorCopy/${t.$store.state.doctorID+e.id}.jpg`,class:"button",download:""},"Download File",8,K)])])):(0,a.kq)("",!0),Q,(0,a._)("p",null,"Date: "+(0,i.zw)(new Date(e.date).toLocaleString()),1)]),(0,a._)("button",{class:"delete",onClick:t=>wt.deleteNotif(e)},null,8,E)])])))),128))])):((0,a.wg)(),(0,a.iD)("div",G,J))])]),(0,a._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[7]||(e[7]=(...t)=>wt.sendNotifInactive&&wt.sendNotifInactive(...t))})],2),(0,a._)("section",X,[(0,a._)("div",tt,[et,(0,a._)("div",st,[(0,a._)("div",at,[(0,a.wy)((0,a._)("input",{class:"input",type:"text",style:{width:"50% !important"},"onUpdate:modelValue":e[8]||(e[8]=t=>vt.searchBar=t),placeholder:"Search..."},null,512),[[l.nr,vt.searchBar]])])]),0!==Object.keys(wt.appointmentSchedules).length?((0,a.wg)(),(0,a.iD)("div",it,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(wt.appointmentSchedules,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["box",{"is-hidden":new Date(e).toDateString()==(new Date).toDateString()}]),key:e},[(0,a._)("h1",lt,"Schedule: "+(0,i.zw)(new Date(e).toDateString()),1),(0,a._)("div",ot,[(0,a._)("table",nt,[ct,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,(t=>((0,a.wg)(),(0,a.iD)("tbody",{key:t._id},[(0,a._)("tr",null,[(0,a._)("button",{class:"button is-info is-light",onClick:e=>wt.sendNotifActive(t.patientID,t.firstName,t.lastName)},"Send a notification",8,rt),(0,a._)("th",dt,(0,i.zw)(t.referenceID),1),(0,a._)("th",ut,(0,i.zw)(t.priorityNum),1),(0,a._)("th",ht,(0,i.zw)(t.hospital),1),(0,a._)("td",pt,(0,i.zw)(t.firstName),1),(0,a._)("td",gt,(0,i.zw)(t.lastName),1),(0,a._)("td",mt,(0,i.zw)(t.contactNum),1),(0,a._)("td",_t,(0,i.zw)(t.birthDay),1),(0,a._)("td",bt,(0,i.zw)(t.comments),1)])])))),128))])])],2)))),128))])):((0,a.wg)(),(0,a.iD)("div",ft,"No previous appointments."))])])])])])}var wt=s(9669),yt=s.n(wt),Dt=s(6486),kt=s.n(Dt),Ct=s(6919),Mt=s(4058),Nt={name:"PatientLogs",components:{DoctorMenu:Ct.Z},async mounted(){await yt().post("/api/appointmentList/doctors",{id:this.$store.state.doctorID,ongoing:!1}).then((t=>this.appointmentSched=t.data)),await yt().get("/api/doctor").then((t=>this.patients=t.data.find((t=>t.alias==this.alias)))),await yt().get("/session/doctor").then((t=>this.doctorName=t.data.fullname)),await yt().get("/session/doctor").then((t=>this.messageHistory=t.data.messageHistory.reverse()))},data(){return{clearMsgPrompt:!1,loadingButton:!1,searchBar:"",appointmentSched:[],alias:this.$store.state.alias,file:null,patients:[],isActiveModal:!1,selectedPatient:"",messageSuccessSelectedPatient:"",refID:"",doctorName:"",titleMsg:"",noticeMsg:"Dear",notificationSent:!1,messageHistory:[]}},computed:{appointmentSchedules(){return!!this.appointmentSched&&kt().groupBy(this.appointmentSched.filter((t=>t.firstName.toLowerCase().includes(this.searchBar.toLowerCase())||t.lastName.toLowerCase().includes(this.searchBar.toLowerCase())||t.referenceID.toLowerCase().includes(this.searchBar.toLowerCase()))).sort(((t,e)=>new Date(e.schedule[0].date).getTime()-new Date(t.schedule[0].date).getTime())),"schedule[0].date")}},methods:{sendNotifActive(t,e,s){this.isActiveModal=!0,this.selectedPatient=e+" "+s,this.noticeMsg=`Dear Ms/Mr. ${this.selectedPatient},`,Mt.Z.connect(),Mt.Z.emit("join room",t)},sendNotifInactive(){this.isActiveModal=!1,this.selectedPatient="",Mt.Z.disconnect()},generateRefID(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=e.length;for(let a=0;a<12;a++)t+=e.charAt(Math.floor(Math.random()*s));this.refID=t},async sendNotif(){if(this.loadingButton=!0,this.file){this.generateRefID();const t=new FormData;t.append("id",this.refID),t.append("doctorID",this.$store.state.doctorID),t.append("imgFile",this.file),await yt().post("/api/imgUploadImgMsg",t,{headers:{"Content-Type":"multipart/form-data"}})}else this.refID=null;let t;this.messageSuccessSelectedPatient=this.selectedPatient,Mt.Z.emit("message",this.refID,this.titleMsg,this.noticeMsg,this.doctorName,new Date),await yt().post("/api/pushMsg",{id:this.$store.state.doctorID,message:{id:this.refID,to:this.selectedPatient,subject:this.titleMsg,message:this.noticeMsg,date:new Date}}).then((e=>t=e.data)).catch((t=>{console.log(t)})),await yt().put("/session/doctor",{messageHistory:t}),this.messageHistory=t.reverse(),this.noticeMsg="",this.notificationSent=!0,this.loadingButton=!1},async deleteNotif(t){let e;try{await yt().post("/api/imgUploadImgMsgDeleteDoctor",{doctorID:"assets/patientimgmsg/doctorCopy/"+this.$store.state.doctorID,id:t.id}),await yt().post("/api/pullMsg",{id:this.$store.state.doctorID,message:t}).then((t=>e=t.data)).catch((t=>{console.log(t)})),await yt().put("/session/doctor",{messageHistory:e})}catch(s){console.log(s)}this.messageHistory=e.reverse()},async clearNotif(){try{await yt().post("/api/imgUploadImgMsgClearDoctor",{doctorID:this.$store.state.doctorID}),await yt().post("/api/clearMsg",{id:this.$store.state.doctorID}).then((t=>this.messageHistory=t.data)).catch((t=>console.log(t))),await yt().put("/session/doctor",{messageHistory:this.messageHistory})}catch(t){console.log(t)}this.clearMsgPrompt=!1},handleFile(t){this.file=t.target.files[0]}}},xt=s(3744);const St=(0,xt.Z)(Nt,[["render",vt]]);var It=St}}]);
//# sourceMappingURL=968.946824d0.js.map