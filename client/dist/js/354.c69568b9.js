"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[354],{2192:function(e,i,t){t.r(i),t.d(i,{default:function(){return $e}});var a=t(6252),s=t(3577),l=t(9963);const o=e=>((0,a.dD)("data-v-ba7857ba"),e=e(),(0,a.Cn)(),e),n={id:"background"},r=o((()=>(0,a._)("div",{class:"modal-background"},null,-1))),c=o((()=>(0,a._)("div",{class:"modal-content",style:{overflow:"hidden"}},[(0,a._)("div",{class:"loader",style:{margin:"auto"}})],-1))),d=[r,c],p=o((()=>(0,a._)("div",{class:"modal-background"},null,-1))),u={class:"modal-content",style:{overflow:"auto"}},h={class:"box"},m={class:"section has-text-centered"},g={class:"has-text-left"},f=o((()=>(0,a._)("label",{class:"label"},"Choose Preferred Date",-1))),v=o((()=>(0,a._)("div",{class:"block"},null,-1))),y=o((()=>(0,a._)("label",{class:"label"},"Choose Preferred Time ",-1))),b={class:"buttons is-centered"},_=o((()=>(0,a._)("div",{class:"block"},null,-1))),w={class:"buttons is-centered"},D=["disabled"],k=o((()=>(0,a._)("div",{class:"block is-hidden-desktop"},null,-1))),F={key:0},C={class:"columns is-mobile",style:{overflow:"auto"}},T={class:"column is-narrow"},L={class:"select is-rounded"},S=o((()=>(0,a._)("option",{value:!1},"Sort by Recommended",-1))),H=o((()=>(0,a._)("option",{value:!0},"Sort by Nearest",-1))),$=[S,H],U={class:"column is-narrow"},N={class:"select is-rounded"},P=o((()=>(0,a._)("option",{value:"",disabled:""},"City/Municipality",-1))),z=o((()=>(0,a._)("option",{value:""},"Any",-1))),x={class:"column is-narrow"},M={class:"select is-rounded"},q=(0,a.uE)('<option value="" disabled data-v-ba7857ba>Type of Facility</option><option value="" data-v-ba7857ba>Any</option><option value="Public" data-v-ba7857ba>Public Hospital</option><option value="Private" data-v-ba7857ba>Private Hospital</option><option value="Clinic" data-v-ba7857ba>Clinic</option>',5),A=[q],I={class:"column is-narrow"},O={class:"select is-rounded"},V=o((()=>(0,a._)("option",{value:"",disabled:""},"Specialist",-1))),Z=o((()=>(0,a._)("option",{value:""},"Any",-1))),Y=["value"],K={class:"column is-narrow"},W=o((()=>(0,a._)("i",{class:"has-text-link fa-sharp fa-solid fa-angle-down"},null,-1))),B={class:"column"},E={class:"is-pulled-right"},R={class:"field has-addons"},j={class:"control has-icons-left"},G=o((()=>(0,a._)("span",{class:"icon is-small is-left"},[(0,a._)("i",{class:"fa-solid fa-location-dot"})],-1))),J={id:"provinces"},Q={class:"control"},X=["disabled"],ee={class:"columns"},ie={key:0,class:"column",style:{"max-height":"100vh",overflow:"auto"}},te={class:"container is-fluid"},ae={class:"column is-5"},se=["onClick"],le={class:"image is-3by2 is-rounded"},oe=["src"],ne={class:"column"},re={key:0,class:"notification is-info is-light"},ce=["onClick"],de={class:"title is-4"},pe={class:"subtitle is-6"},ue=o((()=>(0,a._)("br",null,null,-1))),he={class:"content"},me=o((()=>(0,a._)("b",null,"Type of Facility:",-1))),ge={key:0},fe={class:"subtitle is-6"},ve=o((()=>(0,a._)("b",null,"Contacts:",-1))),ye=o((()=>(0,a._)("hr",null,null,-1))),be={key:0,class:"column notification is-danger is-light has-text-centered"},_e={key:1,class:"column notification is-danger is-light has-text-centered"},we={class:"column is-5"},De=["src"];function ke(e,i,t,o,r,c){const S=(0,a.up)("NavigationTab"),H=(0,a.up)("v-date-picker"),q=(0,a.up)("FooterBlock");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",n,[(0,a.Wm)(S),(0,a._)("div",{class:(0,s.C_)(["modal",{"is-active":r.isHospitalLoading}])},d,2),(0,a._)("div",{class:(0,s.C_)(["modal",{"is-active":r.dateTimeFilter}])},[p,(0,a._)("div",u,[(0,a._)("div",h,[(0,a._)("section",m,[(0,a._)("div",g,[(0,a._)("button",{class:"button is-info",onClick:i[0]||(i[0]=e=>(r.filterDate="",r.filterTime="",r.clearFilterDateTime=!0))},"Clear Filter")]),f,(0,a.Wm)(H,{modelValue:r.filterDate,"onUpdate:modelValue":i[1]||(i[1]=e=>r.filterDate=e),"min-date":new Date,"is-expanded":""},null,8,["modelValue","min-date"]),v,y,(0,a._)("div",b,[(0,a._)("button",{class:(0,s.C_)(["button",{"is-active":"AM"==r.filterTime}]),onClick:i[2]||(i[2]=e=>r.filterTime="AM")},"AM",2),(0,a._)("button",{class:(0,s.C_)(["button",{"is-active":"PM"==r.filterTime}]),onClick:i[3]||(i[3]=e=>r.filterTime="PM")},"PM",2)]),_,(0,a._)("div",w,[(0,a._)("button",{class:"button",onClick:i[4]||(i[4]=e=>r.dateTimeFilter=!1)},"Cancel"),r.clearFilterDateTime?((0,a.wg)(),(0,a.iD)("button",{key:1,class:"button is-info",onClick:i[6]||(i[6]=e=>(c.filterSpecialistDateTime(),r.dateTimeFilter=!1,r.clearFilterDateTime=!1))},"Confirm")):((0,a.wg)(),(0,a.iD)("button",{key:0,class:"button is-info",disabled:null==r.filterTime||null==r.filterDate,onClick:i[5]||(i[5]=e=>(c.filterSpecialistDateTime(),r.dateTimeFilter=!1))},"Confirm",8,D))])])])])],2),k,""!=r.citiesOrMunicipalities?((0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",C,[(0,a._)("div",T,[(0,a._)("div",L,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":i[7]||(i[7]=e=>r.distanceFilter=e)},$,512),[[l.bM,r.distanceFilter]])])]),(0,a._)("div",U,[(0,a._)("div",N,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":i[8]||(i[8]=e=>r.city=e)},[P,z,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.citiesOrMunicipalities.citiesOrMunicipalities.sort(((e,i)=>e.name>i.name?1:-1)),((e,i)=>((0,a.wg)(),(0,a.iD)("option",{key:i},(0,s.zw)(e.name),1)))),128))],512),[[l.bM,r.city]])])]),(0,a._)("div",x,[(0,a._)("div",M,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":i[9]||(i[9]=e=>r.typeFilter=e)},A,512),[[l.bM,r.typeFilter]])])]),(0,a._)("div",I,[(0,a._)("div",O,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":i[10]||(i[10]=e=>r.filterSpecialist=e),onChange:i[11]||(i[11]=(...e)=>c.filterSpecialistDateTime&&c.filterSpecialistDateTime(...e))},[V,Z,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.specializations,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e},(0,s.zw)(e),9,Y)))),128))],544),[[l.bM,r.filterSpecialist]])])]),(0,a._)("div",K,[(0,a._)("button",{class:"button is-rounded",onClick:i[12]||(i[12]=e=>r.dateTimeFilter=!0)},[(0,a.Uk)((0,s.zw)(r.filterDate&&r.filterTime?`${new Date(r.filterDate).toDateString()}, ${r.filterTime}`:"Date and Time")+"  ",1),W])]),(0,a._)("div",B,[(0,a._)("div",E,[(0,a._)("div",R,[(0,a._)("div",j,[(0,a.wy)((0,a._)("input",{class:"input",type:"text","onUpdate:modelValue":i[13]||(i[13]=e=>r.province=e),style:{width:"300px"},placeholder:"What province are you located?",list:"provinces"},null,512),[[l.nr,r.province]]),G]),(0,a._)("datalist",J,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.geolocationIndexed,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e._id},(0,s.zw)(e.province),1)))),128))]),(0,a._)("div",Q,[(0,a._)("button",{class:"button is-info is-rounded",onClick:i[14]||(i[14]=e=>c.loadProvider()),disabled:""==r.province},"Search",8,X)])])])])]),(0,a._)("div",ee,[0!==r.geoHospitalNearestUser.length?((0,a.wg)(),(0,a.iD)("div",ie,[(0,a._)("div",te,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.geoHospitalNearestUserIndexed,((e,i)=>((0,a.wg)(),(0,a.iD)("div",{class:"columns has-text-left",id:"hospital",style:{"margin-bottom":"5%"},key:i},[(0,a._)("div",ae,[(0,a._)("a",{onClick:i=>c.bookAppointment(e)},[(0,a._)("figure",le,[(0,a._)("img",{loading:"lazy",style:{"border-radius":"10px"},src:`https://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/managers/${e.hospital}.jpg`},null,8,oe)])],8,se)]),(0,a._)("div",ne,[e?.arrFilter>0?((0,a.wg)(),(0,a.iD)("div",re,(0,s.zw)(e?.arrFilter)+" "+(0,s.zw)(new Date(r.filterDate)instanceof Date&&!isNaN(new Date(r.filterDate))&&null!=r.filterTime?`available ${r.filterSpecialist} on ${new Date(r.filterDate).toDateString()}, ${r.filterTime}`:`available\n                                    ${r.filterSpecialist}`),1)):(0,a.kq)("",!0),(0,a._)("a",{onClick:i=>c.bookAppointment(e)},[(0,a._)("h1",de,(0,s.zw)(e.hospital),1),(0,a._)("p",pe,(0,s.zw)(e.barangayORStreet)+", "+(0,s.zw)(e.city)+", "+(0,s.zw)(e.province),1)],8,ce),ue,(0,a._)("div",he,[me,(0,a.Uk)(" "+(0,s.zw)(e.type)+" ",1),"undefined"!==typeof e.details[0].contacts?((0,a.wg)(),(0,a.iD)("span",ge,[(0,a._)("p",fe,[ve,(0,a.Uk)(),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.details[0].contacts,((e,i)=>((0,a.wg)(),(0,a.iD)("span",{key:i},(0,s.zw)(e.contact+" "),1)))),128))])])):(0,a.kq)("",!0)])]),ye])))),128))]),0==c.geoHospitalNearestUserIndexed.length?((0,a.wg)(),(0,a.iD)("div",be," Sorry, no Hospitals/Clinics has been found. ")):(0,a.kq)("",!0)])):r.isHospitalLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",_e," Hospitals/Clinics not found, please try again or search another province. ")),(0,a._)("div",we,[(0,a._)("iframe",{loading:"lazy",id:"geoIframe",src:`https://maps.google.com/maps?q=${r.userLatitude},${r.userLongitude}&hl=es;z=14&output=embed`},null,8,De)])])])):(0,a.kq)("",!0)]),(0,a.Wm)(q)],64)}var Fe=t(196),Ce=t(778),Te=t(5535),Le={name:"HospitalFinder",computed:{geolocationIndexed(){return this.geolocation.filter((e=>e.province.toLowerCase().includes(this.province.toLowerCase())))},geoHospitalNearestUserIndexed(){return this.geoHospitalNearestUser&&this.filterSpecialist||new Date(this.filterDate)instanceof Date&&!isNaN(new Date(this.filterDate))&&null!=this.filterTime?this.geoHospitalNearestUser.slice().sort(((e,i)=>this.distanceFilter?e.distance-i.distance:(1e3*(i.engagements/10+2*i.ratings)-i.distance)/1e3-(1e3*(e.engagements/10+2*e.ratings)-e.distance)/1e3)).filter((e=>e.hospital.toLowerCase().includes(this.hospital.toLowerCase()))).filter((e=>e?.arrFilter>0)).filter((e=>""==this.typeFilter?"Private"==e.type||"Public"==e.type||"Clinic"==e.type:e.type==this.typeFilter)).filter((e=>e.city.includes(this.city))).slice().sort(((e,i)=>i.arrFilter-e.arrFilter)):!!this.geoHospitalNearestUser&&this.geoHospitalNearestUser.slice().sort(((e,i)=>this.distanceFilter?e.distance-i.distance:(1e3*(i.engagements/10+2*i.ratings)-i.distance)/1e3-(1e3*(e.engagements/10+2*e.ratings)-e.distance)/1e3)).filter((e=>e.hospital.toLowerCase().includes(this.hospital.toLowerCase()))).filter((e=>""==this.typeFilter?"Private"==e.type||"Public"==e.type||"Clinic"==e.type:e.type==this.typeFilter)).filter((e=>e.city.includes(this.city))).slice().sort(((e,i)=>i.arrFilter-e.arrFilter))}},async mounted(){await Fe.ZP.get("/api/geolocation").then((e=>this.geolocation=e.data)),await this.loadProvider()},data(){return{city:"",isHospitalLoading:!1,checkUser:"",hospital:"",geolocation:[],typeFilter:"",citiesOrMunicipalities:[],province:this.$route.query.name,userLatitude:this.$route.query.userLat,userLongitude:this.$route.query.userLong,geoHospitalNearestUser:"",specializations:this.$store.getters.getSpecializationList,filterSpecialist:this.$route.query.symptom,filterDate:new Date(this.$route.query.date),filterTime:this.$route.query.time,clearFilterDateTime:!1,distanceFilter:!1,dateTimeFilter:!1,doctorSpecialistFilter:[],provincePrompt:!1}},methods:{async bookAppointment(e){this.$store.commit("hospitalDetails",e),await Fe.ZP.put(`/api/manager/${e._id}`,{engagements:e.engagements+1}),await this.$router.push(`/${e._id}/doctors`)},async loadProvider(){this.isHospitalLoading=!0,await this.geolocation.find((e=>e.province===this.province))&&(this.$router.push({path:"/provider",query:{name:this.province,symptom:this.filterSpecialist,userLat:this.userLatitude,userLong:this.userLongitude,date:new Date(this.filterDate).toLocaleDateString(),time:this.filterTime}}),this.citiesOrMunicipalities=this.geolocation.find((e=>e.province===this.province)),await Fe.ZP.post("/api/geoFindHospitalNearestUser",{province:this.province,latitude:parseFloat(this.userLatitude),longitude:parseFloat(this.userLongitude)}).then((e=>this.geoHospitalNearestUser=e.data)),document.getElementById("background").style.background="none",(this.filterSpecialist||new Date(this.filterDate)instanceof Date&&!isNaN(new Date(this.filterDate))&&null!=this.filterTime)&&await this.filterSpecialistDateTime()),this.isHospitalLoading=!1},async filterSpecialistDateTime(){this.doctorSpecialistFilter=[],await this.$router.push({path:"/provider",query:{name:this.province,symptom:this.filterSpecialist,userLat:this.userLatitude,userLong:this.userLongitude,date:null!=this.filterDate?new Date(this.filterDate).toLocaleDateString():"",time:this.filterTime}});const e=this.geoHospitalNearestUser;for await(const i of e)this.isHospitalLoading=!0,await Fe.ZP.post("/api/doctor/filteration",{hospital:i.hospital,filterSpecialist:this.filterSpecialist,date:this.filterDate,time:this.filterTime}).then((async e=>{this.doctorSpecialistFilter.push({hospital:i.hospital,docLength:e.data.filter((e=>this.filterSpecialist?i.specializations.find((e=>e.specialist===this.filterSpecialist))&&e.hospitalOrigin.filter((e=>e===i.hospital)):e.hospitalOrigin.filter((e=>e===i.hospital)))).length}),this.isHospitalLoading=!1}));await this.geoHospitalNearestUser.forEach((e=>e["arrFilter"]=this.doctorSpecialistFilter.find((i=>e.hospital==i.hospital))?.docLength))}},components:{NavigationTab:Te.Z,FooterBlock:Ce.Z}},Se=t(3744);const He=(0,Se.Z)(Le,[["render",ke],["__scopeId","data-v-ba7857ba"]]);var $e=He}}]);
//# sourceMappingURL=354.c69568b9.js.map