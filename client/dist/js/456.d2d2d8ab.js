"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[456],{7787:function(a,e,l){l.d(e,{Z:function(){return u}});var i=l(6252),t=l(2262),s=l(3577);const n={key:0,class:"notification is-danger"};var o={__name:"CatchError",props:{errMsg:null},setup(a){const e=a,l=(0,i.Fl)((()=>e.errMsg));return(a,e)=>{const o=(0,i.up)("router-link");return(0,t.SU)(l)?((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Uk)("Sorry, something went wrong. "+(0,s.zw)((0,t.SU)(l).message)+", please try again later or ",1),(0,i.Wm)(o,{to:"/contactus"},{default:(0,i.w5)((()=>[(0,i.Uk)("contact us")])),_:1}),(0,i.Uk)(". ")])):(0,i.kq)("",!0)}}};const c=o;var u=c},2661:function(a,e,l){l.r(e),l.d(e,{default:function(){return ya}});var i=l(6252),t=l(3577),s=l(9963),n=l(2262),o=l(6154),c=l(5633),u=l(7787),r=l(3907),v=l(2201);const d=a=>((0,i.dD)("data-v-3ab4f031"),a=a(),(0,i.Cn)(),a),p=d((()=>(0,i._)("div",{class:"modal-background"},null,-1))),k=d((()=>(0,i._)("div",{class:"modal-content",style:{overflow:"hidden"}},[(0,i._)("div",{class:"loader",style:{margin:"auto"}})],-1))),g=[p,k],w={key:0,class:"section"},m={class:"columns"},_={class:"column",id:"hospital-overview",style:{"border-right":"3px solid whitesmoke"}},h={class:"container is-fluid"},y={class:"title"},b={class:"subtitle"},D={class:"subtitle is-6"},f={class:"content"},U=d((()=>(0,i._)("b",null,"Type of Facility:",-1))),H={key:0},z={class:"subtitle is-6"},C=d((()=>(0,i._)("b",null,"Contacts:",-1))),q=d((()=>(0,i._)("br",null,null,-1))),x={class:"image is-16by9"},S=["src"],$={class:"column"},Z={class:"container"},F={class:"block"},G={key:0,class:"block"},I=d((()=>(0,i._)("h1",{class:"title"},"Pick a specialist.",-1))),P={class:"subtitle"},W={key:1,class:"columns is-multiline is-mobile"},Y=["onClick"],A={key:0,class:"image is-4by3"},K=["src"],L={key:1,class:"subtitle has-text-centered"},j={key:2,class:"container"},M=d((()=>(0,i._)("i",{class:"fa-solid fa-arrow-left"},null,-1))),N={key:1},T=d((()=>(0,i._)("br",null,null,-1))),B=d((()=>(0,i._)("p",{class:"subtitle has-text-centered"},"No doctors are currently available in this specialization.",-1))),O=[T,B],R={key:2},E=d((()=>(0,i._)("br",null,null,-1))),V=d((()=>(0,i._)("h1",{class:"title is-3"},"Choose a doctor:",-1))),J={class:"field"},Q={class:"control"},X=d((()=>(0,i._)("br",null,null,-1))),aa={key:3},ea={key:0},la={class:"column"},ia={class:"image is-square"},ta=["src"],sa={class:"column is-5"},na={class:"content"},oa={key:0,class:"has-text-weight-semibold"},ca={key:1,class:"has-text-weight-semibold"},ua=d((()=>(0,i._)("br",null,null,-1))),ra=d((()=>(0,i._)("br",null,null,-1))),va={class:"column",style:{"margin-top":"auto"}},da=["onClick"],pa={key:0,class:"notification"},ka=d((()=>(0,i._)("hr",null,null,-1))),ga={key:1},wa={key:0,class:"notification is-info"};var ma={__name:"DoctorList",setup(a){const e=(0,r.oR)(),l=(0,v.yj)(),d=(0,v.tv)(),p=(0,n.iH)(""),k=(0,n.iH)([]),T=(0,n.iH)(null),B=(0,n.iH)(null),ma=(0,n.iH)([]),_a=(0,n.iH)(null),ha=(0,n.iH)(!1),ya=(0,n.iH)(""),ba=(0,n.iH)(!1),Da=(0,n.iH)(!1),fa=(0,n.iH)(e.state.patientFilters);(0,i.bv)((async()=>{null!==e.state.patientID&&await o.Z.get("/session/patient").then((a=>T.value=a.data)),await o.Z.post(`/api/manager/${l.params.hospital}`).then((a=>{k.value=a.data,ma.value=a.data.specializations.sort()})),"Clinic"==k.value.type&&(Da.value=!0,Ha(void 0)),await fa.value.filterSpecialist&&await Ha(fa.value.filterSpecialist)})),(0,i.Ah)((()=>{e.commit("patientFilters",{})}));const Ua=(0,i.Fl)((()=>!!B.value&&B.value.filter((a=>a.name.toLowerCase().includes(ya.value.toLowerCase()))).slice().sort(((a,e)=>a.visits-e.visits))));async function Ha(a){ya.value="",ba.value=!0,ha.value=!0,_a.value=a,await o.Z.post("/api/checkDoctorAvailability",{hospital:k.value.hospital,specialist:a,filterDate:fa.value.filterDatevalue,filterTime:fa.value.filterTimevalue}).then((a=>B.value=a?a.data:[])).catch((a=>p.value=a)),ba.value=!1}async function za(a,l){e.commit("pickedSpecialization",l),e.commit("doctorDetails",a),e.commit("statusAvailability",!0),e.commit("hospitalName",k.value.hospital),null!==e.state.patientID?await d.push(`/user/${T.value.username}/registration`):await d.push("/user/signup")}return(a,e)=>{const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c.Z),(0,i._)("div",{class:(0,t.C_)(["modal",{"is-active":ba.value}])},g,2),0!==k.value.length?((0,i.wg)(),(0,i.iD)("section",w,[(0,i.Wm)(u.Z,{"err-msg":p.value},null,8,["err-msg"]),(0,i._)("div",m,[(0,i._)("div",_,[(0,i._)("div",h,[(0,i._)("h1",y,(0,t.zw)(k.value.hospital),1),(0,i._)("p",b,(0,t.zw)(k.value.barangayORStreet)+", "+(0,t.zw)(k.value.city)+", "+(0,t.zw)(k.value.province),1),(0,i._)("p",D,(0,t.zw)(k.value.details[0].description),1),(0,i._)("div",f,[U,(0,i.Uk)(" "+(0,t.zw)(k.value.type)+" ",1),"undefined"!==typeof k.value.details[0].contacts?((0,i.wg)(),(0,i.iD)("span",H,[(0,i._)("p",z,[C,(0,i.Uk)(),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(k.value.details[0].contacts,((a,e)=>((0,i.wg)(),(0,i.iD)("span",{key:e},(0,t.zw)(a.contact+" "),1)))),128))])])):(0,i.kq)("",!0)]),q,(0,i._)("figure",x,[(0,i._)("iframe",{class:"has-ratio",src:`https://maps.google.com/maps?q=${k.value.location.coordinates[1]},${k.value.location.coordinates[0]}&hl=es;z=14&output=embed`},null,8,S)])])]),(0,i._)("div",$,[(0,i._)("div",Z,[(0,i._)("div",F,[ha.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",G,[I,(0,i._)("p",P,[(0,i.Uk)(" Having trouble picking a specialist? Get appointed to a "),(0,i._)("a",{class:"has-text-link",onClick:e[0]||(e[0]=a=>Ha("General Practitioner"))},"General Practitioner"),(0,i.Uk)(". ")])])),ha.value?((0,i.wg)(),(0,i.iD)("div",j,[Da.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:0,class:"subtitle has-text-link",onClick:e[1]||(e[1]=a=>ha.value=!1)},[M,(0,i.Uk)(" Back")])),""==B.value?((0,i.wg)(),(0,i.iD)("div",N,O)):((0,i.wg)(),(0,i.iD)("div",R,[E,V,(0,i._)("div",J,[(0,i._)("div",Q,[(0,i.wy)((0,i._)("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>ya.value=a),placeholder:"Search..."},null,512),[[s.nr,ya.value]])])])])),X,ha.value?((0,i.wg)(),(0,i.iD)("div",aa,[0!==Object.keys((0,n.SU)(Ua)).length?((0,i.wg)(),(0,i.iD)("div",ea,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,n.SU)(Ua),(e=>((0,i.wg)(),(0,i.iD)("div",{class:"columns",key:e._id},[(0,i._)("div",la,[(0,i._)("figure",ia,[(0,i._)("img",{src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${e.alias}.jpg`},null,8,ta)])]),(0,i._)("div",sa,[(0,i._)("div",na,[(0,i._)("h5",null,(0,t.zw)(e.name),1),(0,i._)("p",null,[_a.value?((0,i.wg)(),(0,i.iD)("span",oa,(0,t.zw)(_a.value),1)):((0,i.wg)(),(0,i.iD)("span",ca,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.specialist,(a=>((0,i.wg)(),(0,i.iD)("span",{key:a},[(0,i.Uk)((0,t.zw)(a)+" ",1),ua])))),128))])),ra])])]),(0,i._)("div",va,[null!==a.$store.state.patientID?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-info is-rounded",onClick:a=>za(e,_a.value)},"Book an Appointment",8,da)):(0,i.kq)("",!0)])])))),128)),null==a.$store.state.patientID?((0,i.wg)(),(0,i.iD)("div",pa,[(0,i.Wm)(l,{to:"/account/login",class:"has-text-weight-bold"},{default:(0,i.w5)((()=>[(0,i.Uk)("Login")])),_:1}),(0,i.Uk)(" or "),(0,i.Wm)(l,{to:"/user/signup",class:"has-text-weight-bold"},{default:(0,i.w5)((()=>[(0,i.Uk)("create an account")])),_:1}),(0,i.Uk)(" to make an appointment. ")])):(0,i.kq)("",!0),ka])):((0,i.wg)(),(0,i.iD)("div",ga,[""!=B.value?((0,i.wg)(),(0,i.iD)("div",wa,"No such doctor is available right now.")):(0,i.kq)("",!0)]))])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",W,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(ma.value,((a,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"column is-6-mobile is-4-desktop",key:e},[(0,i._)("a",{onClick:e=>Ha(a.specialist)},["General Practitioner"!==a.specialist?((0,i.wg)(),(0,i.iD)("figure",A,[(0,i._)("img",{src:`https://ui-avatars.com/api/?name=${a.specialist}`},null,8,K)])):(0,i.kq)("",!0),"General Practitioner"!==a.specialist?((0,i.wg)(),(0,i.iD)("p",L,(0,t.zw)(a.specialist),1)):(0,i.kq)("",!0)],8,Y)])))),128))]))])])])])])):(0,i.kq)("",!0)],64)}}},_a=l(3744);const ha=(0,_a.Z)(ma,[["__scopeId","data-v-3ab4f031"]]);var ya=ha}}]);
//# sourceMappingURL=456.d2d2d8ab.js.map