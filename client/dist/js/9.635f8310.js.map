{"version":3,"file":"js/9.635f8310.js","mappings":"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","sources":["webpack://client/./src/components/CatchError.vue","webpack://client/./src/components/CatchError.vue?d490","webpack://client/./src/components/DoctorMenu.vue","webpack://client/./src/components/DoctorMenu.vue?a77f","webpack://client/./src/views/PortalDoctor/Doctor.vue","webpack://client/./src/views/PortalDoctor/Doctor.vue?2208"],"sourcesContent":["<script setup>\r\nimport { computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n    errMsg: null\r\n});\r\n\r\nconst errMsg = computed(() => props.errMsg)\r\n</script>\r\n<template>\r\n    <div class=\"notification is-danger\" v-if=\"errMsg\">Sorry, something went wrong. {{ errMsg.message }}, please\r\n        try again later or\r\n        <router-link :to=\"'/contactus'\">contact us</router-link>.\r\n    </div>\r\n</template>","import script from \"./CatchError.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CatchError.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <nav class=\"navbar is-hidden-desktop\">\r\n        <div class=\"navbar-brand\">\r\n            <a class=\"navbar-item\">\r\n                <label class=\"label\">Dr. {{ $store.state.doctorName }}</label>\r\n            </a>\r\n            <a role=\"button\" class=\"navbar-burger\" :class=\"{ 'is-active': !isActive }\" aria-label=\"menu\"\r\n                aria-expanded=\"false\" data-target=\"navbar\" @click=\"menuNav\">\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n            </a>\r\n        </div>\r\n    </nav>\r\n    <aside class=\"menu box\" :class=\"{ 'is-hidden-mobile': isActive, 'fixedMenu': isActive }\"\r\n        style=\"background-color: #D8E5FF; padding: 20px;\">\r\n        <div class=\"has-text-centered block\" style=\"padding: 5px;\">\r\n            <figure class=\"is-hidden-mobile is-hidden-touch image image-outer is-square\" style=\"margin: auto; \">\r\n                <img class=\"is-rounded image-inner\"\r\n                    :src=\"`http://res.cloudinary.com/leindfraust/image/upload/v${new Date().getMonth()}${new Date().getDate()}/assets/doctors/${alias}.jpg`\">\r\n            </figure>\r\n            <h5 class=\"title is-6\" v-if=\"isActive\">Dr. {{ $store.state.doctorName }}</h5>\r\n        </div>\r\n        <ul class=\"menu-list block\">\r\n            <p class=\"menu-label\">General</p>\r\n            <li>\r\n                <a @click=\"routeHome\">Appointments</a>\r\n            </li>\r\n            <li>\r\n                <a @click=\"openPatientHistory\">Appointment History</a>\r\n            </li>\r\n            <li>\r\n                <a @click=\"openPatientAppointmentsCancelled\">Cancelled Appointments</a>\r\n            </li>\r\n            <li>\r\n                <a @click=\"openSchedule\">Schedule</a>\r\n            </li>\r\n            <p class=\"menu-label\">Verification and Information</p>\r\n            <li>\r\n                <a @click=\"openProfile\">Profile</a>\r\n            </li>\r\n            <li>\r\n                <a @click=\"openSecurity\">Security</a>\r\n            </li>\r\n            <li>\r\n                <a @click=\"openPayment\">Payment</a>\r\n            </li>\r\n            <p class=\"menu-label\">Support</p>\r\n            <li>\r\n                <a @click=\"this.$router.push('/contactus')\">Contact Us</a>\r\n            </li>\r\n        </ul>\r\n        <div class=\"block has-text-centered\">\r\n            <button @click=\"logout\" class=\"button is-link is-rounded\" type=\"button\">Logout</button>\r\n        </div>\r\n    </aside>\r\n</template>\r\n<script>\r\nimport store from '../store'\r\nimport axios from 'axios'\r\nexport default {\r\n    name: \"AdminMenu\",\r\n    data() {\r\n        return {\r\n            alias: store.state.alias,\r\n            isActive: true\r\n        }\r\n    },\r\n    methods: {\r\n        async logout() {\r\n            store.commit(\"alias\", null);\r\n            await axios.delete(\"/session/doctor\");\r\n            await this.$router.push(\"/account/login\");\r\n        },\r\n        async routeHome() {\r\n            await this.$router.push(`/doctor/${this.alias}/appointments`);\r\n        },\r\n        async openProfile() {\r\n            await this.$router.push(`/doctor/${this.alias}/profile`);\r\n        },\r\n        async openPatientHistory() {\r\n            await this.$router.push(`/doctor/${this.alias}/appointments/history`)\r\n        },\r\n        async openPatientAppointmentsCancelled() {\r\n            await this.$router.push(`/doctor/${this.alias}/appointments/cancelled`)\r\n        },\r\n        async openSecurity() {\r\n            await this.$router.push(`/doctor/${this.alias}/security`)\r\n        },\r\n        async openSchedule() {\r\n            await this.$router.push(`/doctor/${this.alias}/schedule`);\r\n        },\r\n        async openPayment() {\r\n            await this.$router.push(`/doctor/${this.alias}/payment`)\r\n        },\r\n        menuNav() {\r\n            this.isActive = !this.isActive\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.fixedMenu {\r\n    position: fixed;\r\n    height: 100vh;\r\n}\r\n</style>\r\n<style>\r\n.image-outer {\r\n    background: center center no-repeat url('../assets/images/background-figure-style.png');\r\n    background-size: contain;\r\n}\r\n\r\n.image-inner {\r\n    padding: 15px\r\n}\r\n</style>","import { render } from \"./DoctorMenu.vue?vue&type=template&id=1bc7b8b5&scoped=true\"\nimport script from \"./DoctorMenu.vue?vue&type=script&lang=js\"\nexport * from \"./DoctorMenu.vue?vue&type=script&lang=js\"\n\nimport \"./DoctorMenu.vue?vue&type=style&index=0&id=1bc7b8b5&scoped=true&lang=css\"\nimport \"./DoctorMenu.vue?vue&type=style&index=1&id=1bc7b8b5&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\ronan\\\\Documents\\\\Projects\\\\Appointment-Scheduler-Webapp\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1bc7b8b5\"]])\n\nexport default __exports__","<!-- eslint-disable vue/multi-word-component-names -->\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport axios from \"axios\";\r\nimport { useStore } from \"vuex\";\r\nimport groupBy from 'lodash/groupBy'\r\nimport DoctorMenu from \"../../components/DoctorMenu.vue\";\r\nimport socket from '../../socket'\r\nimport CatchError from \"../../components/CatchError.vue\";\r\n\r\nconst store = useStore()\r\n\r\nconst errMsg = ref('')\r\nconst isActiveModalConfirm = ref(false)\r\nconst isActiveModalCancel = ref(false)\r\nconst id = ref(null)\r\nconst refID = ref(null)\r\nconst refIDPatient = ref(null)\r\nconst firstName = ref(null)\r\nconst lastName = ref(null)\r\nconst birthDay = ref(null)\r\nconst contactNum = ref(null)\r\nconst doctorName = ref(null)\r\nconst searchBar = ref('')\r\nconst appointmentSched = ref([])\r\nconst file = ref(null)\r\nconst confirmLoadingButton = ref(false)\r\n\r\nconst appointmentSchedules = computed(() => {\r\n  if (appointmentSched.value) {\r\n    return groupBy(\r\n      appointmentSched.value.filter((x) => {\r\n        return (\r\n          x.firstName.toLowerCase().includes(searchBar.value.toLowerCase()) ||\r\n          x.lastName.toLowerCase().includes(searchBar.value.toLowerCase()) ||\r\n          x.referenceID.toLowerCase().includes(searchBar.value.toLowerCase())\r\n        );\r\n      }).sort((a, b) => {\r\n        return new Date(a.schedule[0].date).getTime() - new Date(b.schedule[0].date).getTime()\r\n      })\r\n      ,\r\n      \"schedule[0].date\"\r\n    );\r\n  } else {\r\n    return false\r\n  }\r\n})\r\nonMounted(async () => {\r\n  await axios.post('/api/appointmentList/doctors', { id: store.state.doctorID, ongoing: true }).then(response => appointmentSched.value = response.data).catch(err => errMsg.value = err);\r\n})\r\nasync function confirmVisitation() {\r\n  confirmLoadingButton.value = true\r\n  generateRefID()\r\n\r\n  let titleMsg = 'Appointment visitation confirmed'\r\n  let noticeMsg = `Your appointment visitation has been confirmed by your doctor Ms/Mr. ${doctorName.value}, reference ID: ${refIDPatient.value}, a digital prescription will be displayed below if your doctor has uploaded one. We hope you well!`\r\n  socket.emit('message', file.value ? refID.value : null, titleMsg, noticeMsg, \"Medic Search\", new Date())\r\n\r\n  if (file.value) {\r\n    const formData = new FormData()\r\n    formData.append('id', refID.value)\r\n    formData.append('imgFile', file.value)\r\n\r\n    await axios.post(\"/api/imgUploadVisitation\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\"\r\n      }\r\n    }).catch(err => errMsg.value = err);\r\n  }\r\n\r\n  try {\r\n    await axios.put(`/api/appointmentList/${id.value}`, {\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n      contactNum: contactNum.value,\r\n      birthDay: birthDay.value,\r\n      ifPatientVisited: true\r\n    });\r\n    await axios.put(`/api/doctor/${store.state.doctorID}`, {\r\n      visits: appointmentSched.value.filter(x => x.ifPatientVisited == true).length + 1\r\n    });\r\n    await axios.post('/api/appointmentList/doctors', { id: store.state.doctorID, ongoing: true }).then(response => appointmentSched.value = response.data).catch(err => errMsg.value = err);\r\n  } catch (err) {\r\n    errMsg.value = err\r\n  }\r\n  confirmLoadingButton.value = false\r\n  isActiveModalConfirm.value = false\r\n}\r\n\r\nasync function cancelAppointment() {\r\n\r\n  let titleMsg = 'Your appointment has been cancelled!'\r\n  let noticeMsg = `Your appointment visitation has been cancelled by your doctor Ms/Mr. ${doctorName.value}, reference ID: ${refIDPatient.value}, this is due to some emergencies or problems in their side. We hope you understand.`\r\n  socket.emit('message', null, titleMsg, noticeMsg, \"Medic Search\", new Date())\r\n\r\n  await axios.put(`/api/appointmentList/${id.value}`, {\r\n    ifPatientCancelled: true\r\n  }).catch(err => errMsg.value = err)\r\n  await axios.post('/api/appointmentList/doctors', { id: store.state.doctorID, ongoing: true }).then(response => appointmentSched.value = response.data);\r\n  isActiveModalCancel.value = false\r\n}\r\nasync function toggleConfirmModal(\r\n  refID,\r\n  doctorNameParam,\r\n  patientIDParam,\r\n  firstNameParam,\r\n  lastNameParam,\r\n  contactNumParam,\r\n  birthDayParam,\r\n  _id\r\n) {\r\n  isActiveModalConfirm.value = true\r\n  refIDPatient.value = refID\r\n  doctorName.value = doctorNameParam\r\n  firstName.value = firstNameParam;\r\n  lastName.value = lastNameParam;\r\n  contactNum.value = contactNumParam;\r\n  birthDay.value = birthDayParam;\r\n  id.value = _id;\r\n  socket.connect()\r\n  socket.emit('join room', patientIDParam)\r\n}\r\n\r\nfunction cancelModalConfirm() {\r\n  isActiveModalConfirm.value = false\r\n  socket.disconnect()\r\n}\r\n\r\nasync function toggleCancelModal(appointment) {\r\n  isActiveModalCancel.value = true\r\n  refIDPatient.value = appointment.referenceID\r\n  doctorName.value = appointment.doctorName\r\n  id.value = appointment._id\r\n  socket.connect()\r\n  socket.emit('join room', appointment.patientID)\r\n}\r\nfunction cancelModalCancel() {\r\n  isActiveModalCancel.value = false\r\n  socket.disconnect()\r\n}\r\nfunction generateRefID() {\r\n  let result = '';\r\n  let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  let charactersLength = characters.length;\r\n  for (let i = 0; i < 12; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() *\r\n      charactersLength));\r\n  }\r\n  refID.value = result;\r\n}\r\nfunction handleFile(e) {\r\n  file.value = e.target.files[0];\r\n}\r\n\r\n</script>\r\n<template>\r\n  <div class=\"main-doctor\">\r\n    <div class=\"columns\">\r\n      <div class=\"column is-2\">\r\n        <DoctorMenu />\r\n      </div>\r\n      <div class=\"column\">\r\n        <section class=\"section\">\r\n          <CatchError :err-msg=\"errMsg\" />\r\n          <h1 class=\"title\">APPOINTMENTS</h1>\r\n          <div class=\"field\" v-if=\"appointmentSched.length !== 0\">\r\n            <div class=\"control\">\r\n              <input class=\"input\" type=\"text\" style=\"width: 50% !important\" v-model=\"searchBar\"\r\n                placeholder=\"Search...\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"container is-widescreen is-fullhd\" v-if=\"Object.keys(appointmentSchedules).length !== 0\">\r\n            <div class=\"box\" v-for=\"(appointmentList, index) in appointmentSchedules\" :key=\"index\"\r\n              :style=\"new Date(index).toDateString() == new Date().toDateString() ? 'box-shadow: rgb(10 10 10 / 10%) 0px 0.5em 1em -0.125em, #485fc7 0px 0px 0px 1px !important;' : ''\">\r\n              <h1 class=\"subtitle\" v-if=\"new Date(index).toDateString() == new Date().toDateString()\">\r\n                <b>TODAY</b>\r\n              </h1>\r\n              <h1 class=\"subtitle has-text-black\">Schedule: {{ new Date(index).toDateString() }}</h1>\r\n              <div class=\"table-container\">\r\n                <table class=\"table is-fullwidth\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class=\"has-text-black-ter\">Controls</th>\r\n                      <th class=\"has-text-black-ter\">Reference ID</th>\r\n                      <th class=\"has-text-black-ter\">Priority No.</th>\r\n                      <th class=\"has-text-black-ter\">Hospital Appointed</th>\r\n                      <th class=\"has-text-black-ter\">First Name</th>\r\n                      <th class=\"has-text-black-ter\">Last Name</th>\r\n                      <th class=\"has-text-black-ter\">Contact Number</th>\r\n                      <th class=\"has-text-black-ter\">Birthday</th>\r\n                      <th class=\"has-text-black-ter\">Symptoms/Comments</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"appointments in appointmentList\" :key=\"appointments._id\">\r\n                      <button class=\"button has-text-success\" type=\"button\" @click=\"\r\n                        toggleConfirmModal(\r\n                          appointments.referenceID,\r\n                          appointments.doctorName,\r\n                          appointments.patientID,\r\n                          appointments.firstName,\r\n                          appointments.lastName,\r\n                          appointments.contactNum,\r\n                          appointments.birthDay,\r\n                          appointments._id\r\n                        )\r\n                      \" v-if=\"(new Date(index).getTime() == new Date(new Date().toDateString()).getTime())\">Confirm\r\n                        Visitation</button>\r\n                      <button class=\"button has-text-danger\" type=\"button\" @click=\"toggleCancelModal(appointments)\"\r\n                        v-else>Cancel Visitation</button>\r\n                      <br />\r\n\r\n                      <!--Modal Confirm-->\r\n                      <div class=\"modal\" :class=\"{ 'is-active': isActiveModalConfirm }\">\r\n                        <div class=\"modal-background\"></div>\r\n                        <div class=\"modal-content animate__animated animate__fadeInLeft\">\r\n                          <div class=\"field customField has-text-centered\">\r\n                            <h1 class=\"title is-4\">Confirm Patient Details</h1>\r\n                            <label class=\"label\">First Name</label>\r\n                            <div class=\"control\">\r\n                              <input class=\"input\" type=\"text\" v-model=\"firstName\" placeholder=\"First Name\" required />\r\n                            </div>\r\n                            <label class=\"label\">Last Name</label>\r\n                            <div class=\"control\">\r\n                              <input class=\"input\" type=\"text\" v-model=\"lastName\" placeholder=\"Last Name\" required />\r\n                            </div>\r\n                            <label class=\"label\">Contact Number</label>\r\n                            <div class=\"control\">\r\n                              <input class=\"input\" type=\"number\" v-model=\"contactNum\" placeholder=\"Contact Number\"\r\n                                required />\r\n                            </div>\r\n                            <label class=\"label\">Birthday</label>\r\n                            <div class=\"control\">\r\n                              <input class=\"input\" type=\"text\" v-model=\"birthDay\" placeholder=\"Birthday\" required />\r\n                            </div>\r\n                            <div class=\"field\">\r\n                              <label class=\"label\">Upload a prescription(optional)</label>\r\n                              <div class=\"control\">\r\n                                <input @change=\"handleFile($event)\" class=\"input\" type=\"file\" />\r\n                              </div>\r\n                              <button class=\"is-hidden\" type=\"submit\" value=\"submit\">Submit</button>\r\n                            </div>\r\n                            <button class=\"button is-info\" :class=\"{ 'is-loading': confirmLoadingButton }\"\r\n                              @click=\"confirmVisitation()\">Submit</button>\r\n                          </div>\r\n                        </div>\r\n                        <button class=\"modal-close is-large\" aria-label=\"close\" @click=\"cancelModalConfirm\"></button>\r\n                      </div>\r\n\r\n                      <!--Modal Cancel-->\r\n                      <div class=\"modal\" :class=\"{ 'is-active': isActiveModalCancel }\">\r\n                        <div class=\"modal-background\"></div>\r\n                        <div class=\"modal-content animate__animated animate__fadeInLeft\">\r\n                          <p class=\"subtitle is-4 has-text-centered\">Do you wish to cancel the appointment? </p>\r\n                          <p class=\"subtitle is-6 has-text-centered\">The user will be notified of the cancellation via\r\n                            email and notifications if you wish to proceed.</p>\r\n                          <div class=\"buttons is-centered\">\r\n                            <button class=\"button has-text-success\" @click=\"cancelAppointment\">YES</button>\r\n                            <button class=\"button has-text-danger\" @click=\"cancelModalCancel\">NO</button>\r\n                          </div>\r\n                          <p class=\"help\">NOTE: This action cannot be undone.</p>\r\n                        </div>\r\n                        <button class=\"modal-close is-large\" aria-label=\"close\" @click=\"cancelModalCancel\"></button>\r\n                      </div>\r\n\r\n                      <th class=\"has-text-black-ter\">{{ appointments.referenceID }}</th>\r\n                      <th class=\"has-text-black-ter\">{{ appointments.priorityNum }}</th>\r\n                      <th class=\"has-text-black-ter\">{{ appointments.hospital }}</th>\r\n                      <td class=\"has-text-black-ter\">{{ appointments.firstName }}</td>\r\n                      <td class=\"has-text-black-ter\">{{ appointments.lastName }}</td>\r\n                      <td class=\"has-text-black-ter\">{{ appointments.contactNum }}</td>\r\n                      <td class=\"has-text-black-ter\">{{ appointments.birthDay }}</td>\r\n                      <td class=\"has-text-black-ter\" style=\"white-space: pre-wrap;\">{{ appointments.comments }}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <section class=\"section\" v-else>\r\n            <div class=\"notification is-info\">\r\n              <h1 class=\"title is-5\">No upcoming appointments.</h1>\r\n            </div>\r\n          </section>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<!--<script>\r\nimport axios from \"axios\";\r\nimport store from \"../../store\";\r\nimport groupBy from 'lodash/groupBy'\r\nimport DoctorMenu from \"../../components/DoctorMenu.vue\";\r\nimport socket from '../../socket'\r\nimport CatchError from \"../../components/CatchError.vue\";\r\n\r\nexport default {\r\n  name: \"DoctorDashboard\",\r\n  components: {\r\n    DoctorMenu,\r\n    CatchError\r\n  },\r\n  data() {\r\n    return {\r\n      errMsg: '',\r\n      alias: store.state.alias,\r\n      profileImg: store.state.profileImg,\r\n      isActiveModalConfirm: false,\r\n      isActiveModalCancel: false,\r\n      id: null,\r\n      refID: null,\r\n      refIDPatient: null,\r\n      firstName: null,\r\n      lastName: null,\r\n      birthDay: null,\r\n      contactNum: null,\r\n      doctorName: null,\r\n      searchBar: \"\",\r\n      schedule: null,\r\n      appointmentSched: [],\r\n      file: null,\r\n      confirmLoadingButton: false\r\n    };\r\n  },\r\n  computed: {\r\n    appointmentSchedules() {\r\n      if (appointmentSched.value) {\r\n        return groupBy(\r\n          appointmentSched.value.filter((x) => {\r\n            return (\r\n              x.firstName.toLowerCase().includes(searchBar.value.toLowerCase()) ||\r\n              x.lastName.toLowerCase().includes(searchBar.value.toLowerCase()) ||\r\n              x.referenceID.toLowerCase().includes(searchBar.value.toLowerCase())\r\n            );\r\n          }).sort((a, b) => {\r\n            return new Date(a.schedule[0].date).getTime() - new Date(b.schedule[0].date).getTime()\r\n          })\r\n          ,\r\n          \"schedule[0].date\"\r\n        );\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n  },\r\n  async mounted() {\r\n    await axios.post('/api/appointmentList/doctors', { id: store.state.doctorID, ongoing: true }).then(response => appointmentSched.value = response.data).catch(err => errMsg.value = err);\r\n  },\r\n  methods: {\r\n    async confirmVisitation() {\r\n      confirmLoadingButton.value = true\r\n      this.generateRefID()\r\n\r\n      let titleMsg = 'Appointment visitation confirmed'\r\n      let noticeMsg = `Your appointment visitation has been confirmed by your doctor Ms/Mr. ${doctorName.value}, reference ID: ${refIDPatient.value}, a digital prescription will be displayed below if your doctor has uploaded one. We hope you well!`\r\n      socket.emit('message', file.value ? refID.value : null, titleMsg, noticeMsg, \"Medic Search\", new Date())\r\n\r\n      if (file.value) {\r\n        const formData = new FormData()\r\n        formData.append('id', refID.value)\r\n        formData.append('imgFile', file.value)\r\n\r\n        await axios.post(\"/api/imgUploadVisitation\", formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\"\r\n          }\r\n        }).catch(err => errMsg.value = err);\r\n      }\r\n\r\n      try {\r\n        await axios.put(`/api/appointmentList/${id.value}`, {\r\n          firstName: firstName.value,\r\n          lastName: lastName.value,\r\n          contactNum: contactNum.value,\r\n          birthDay: birthDay.value,\r\n          ifPatientVisited: true\r\n        });\r\n        await axios.put(`/api/doctor/${store.state.doctorID}`, {\r\n          visits: appointmentSched.value.filter(x => x.ifPatientVisited == true).length + 1\r\n        });\r\n        await axios.post('/api/appointmentList/doctors', { id: store.state.doctorID, ongoing: true }).then(response => appointmentSched.value = response.data).catch(err => errMsg.value = err);\r\n      } catch (err) {\r\n        errMsg.value = err\r\n      }\r\n      confirmLoadingButton.value = false\r\n      isActiveModalConfirm.value = false\r\n    },\r\n    async cancelAppointment() {\r\n\r\n      let titleMsg = 'Your appointment has been cancelled!'\r\n      let noticeMsg = `Your appointment visitation has been cancelled by your doctor Ms/Mr. ${doctorName.value}, reference ID: ${refIDPatient.value}, this is due to some emergencies or problems in their side. We hope you understand.`\r\n      socket.emit('message', null, titleMsg, noticeMsg, \"Medic Search\", new Date())\r\n\r\n      await axios.put(`/api/appointmentList/${id.value}`, {\r\n        ifPatientCancelled: true\r\n      }).catch(err => errMsg.value = err)\r\n      await axios.post('/api/appointmentList/doctors', { id: store.state.doctorID, ongoing: true }).then(response => appointmentSched.value = response.data);\r\n      isActiveModalCancel.value = false\r\n    },\r\n    async toggleConfirmModal(\r\n      refID,\r\n      doctorName,\r\n      patientID,\r\n      firstName,\r\n      lastName,\r\n      contactNum,\r\n      birthDay,\r\n      _id\r\n    ) {\r\n      isActiveModalConfirm.value = true\r\n      refIDPatient.value = refID\r\n      doctorName.value = doctorName\r\n      firstName.value = firstName;\r\n      lastName.value = lastName;\r\n      contactNum.value = contactNum;\r\n      birthDay.value = birthDay;\r\n      id.value = _id;\r\n      socket.connect()\r\n      socket.emit('join room', patientID)\r\n    },\r\n    cancelModalConfirm() {\r\n      isActiveModalConfirm.value = false\r\n      socket.disconnect()\r\n    },\r\n    async toggleCancelModal(appointment) {\r\n      isActiveModalCancel.value = true\r\n      refIDPatient.value = appointment.referenceID\r\n      doctorName.value = appointment.doctorName\r\n      id.value = appointment._id\r\n      socket.connect()\r\n      socket.emit('join room', appointment.patientID)\r\n    },\r\n    cancelModalCancel() {\r\n      isActiveModalCancel.value = false\r\n      socket.disconnect()\r\n    },\r\n    generateRefID() {\r\n      let result = '';\r\n      let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n      let charactersLength = characters.length;\r\n      for (let i = 0; i < 12; i++) {\r\n        result += characters.charAt(Math.floor(Math.random() *\r\n          charactersLength));\r\n      }\r\n      refID.value = result\r\n    },\r\n    handleFile(e) {\r\n      file.value = e.target.files[0]\r\n    }\r\n  },\r\n};\r\n</script>\r\n-->\r\n<style scoped>\r\n.customField {\r\n  padding: 1%;\r\n  border-radius: 15px;\r\n}\r\n\r\nth {\r\n  font-weight: bold;\r\n}\r\n\r\n.modal input {\r\n  width: 300px !important;\r\n}\r\n\r\n.modal-content {\r\n  background-color: whitesmoke;\r\n  padding: 15px;\r\n  border-radius: 10px;\r\n}\r\n\r\n@media (max-width: 991.98px) {\r\n  .modal input {\r\n    width: 300px !important;\r\n  }\r\n\r\n  #titleBox {\r\n    width: 100% !important;\r\n  }\r\n}\r\n</style>\r\n<style>\r\n.main-doctor::-webkit-scrollbar {\r\n  display: none\r\n}\r\n\r\n.main-doctor {\r\n  background: linear-gradient(180deg, #DAE6FE 0%, #FFFFFF 43.56%);\r\n}\r\n</style>","import script from \"./Doctor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Doctor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Doctor.vue?vue&type=style&index=0&id=47100c35&scoped=true&lang=css\"\nimport \"./Doctor.vue?vue&type=style&index=1&id=47100c35&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\ronan\\\\Documents\\\\Projects\\\\Appointment-Scheduler-Webapp\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-47100c35\"]])\n\nexport default __exports__"],"names":["errMsg","computed","props","__exports__","class","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_7","style","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_ctx","state","doctorName","role","$data","onClick","$options","_hoisted_9","_hoisted_10","src","Date","getMonth","getDate","_createElementBlock","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","$router","push","_hoisted_17","type","name","data","alias","store","isActive","methods","async","axios","this","menuNav","render","useStore","ref","isActiveModalConfirm","isActiveModalCancel","id","refID","refIDPatient","firstName","lastName","birthDay","contactNum","searchBar","appointmentSched","file","confirmLoadingButton","appointmentSchedules","value","groupBy","filter","x","toLowerCase","includes","referenceID","sort","a","b","schedule","date","getTime","confirmVisitation","generateRefID","titleMsg","noticeMsg","socket","formData","FormData","append","headers","catch","err","ifPatientVisited","doctorID","visits","length","ongoing","then","response","cancelAppointment","ifPatientCancelled","toggleConfirmModal","doctorNameParam","patientIDParam","firstNameParam","lastNameParam","contactNumParam","birthDayParam","_id","cancelModalConfirm","toggleCancelModal","appointment","patientID","cancelModalCancel","result","characters","charactersLength","i","charAt","Math","floor","random","handleFile","e","target","files","onMounted"],"sourceRoot":""}