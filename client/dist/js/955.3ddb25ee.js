"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[955,885],{9885:function(a,e,l){l.r(e),l.d(e,{default:function(){return j}});var s=l(6252),i=l(2262),t=l(3577),n=l(9963),o=l(9669),u=l.n(o);const r=a=>((0,s.dD)("data-v-c2f9401e"),a=a(),(0,s.Cn)(),a),c=r((()=>(0,s._)("div",{class:"modal-background"},null,-1))),d={class:"modal-content has-text-left",style:{width:"40%",margin:"auto"}},v={key:0,class:"section box"},p=r((()=>(0,s._)("p",{class:"title is-4 has-text-danger"},"Forgot Password",-1))),_={key:0,class:"notification is-danger"},w={key:1,class:"notification is-warning"},m={key:2,class:"container"},g={class:"field"},h={class:"control"},f=r((()=>(0,s._)("label",{class:"label"},"Enter Username",-1))),y={class:"field"},b={class:"control"},k=r((()=>(0,s._)("label",{class:"label"},"Enter Email",-1))),U={class:"field"},S={class:"control"},C=["disabled"],H={key:3,class:"notification is-danger"},P={key:1,class:"section box"},D={key:0,class:"container"},q={class:"field"},x={class:"control"},T=r((()=>(0,s._)("label",{class:"label"},"Enter code",-1))),V={key:1,class:"container"},M={key:0,class:"notification is-danger"},$={key:1,class:"container"},A={class:"field"},N={class:"control"},E=r((()=>(0,s._)("label",{class:"label"},"New Password:",-1))),I={class:"field"},F={class:"control"},O=r((()=>(0,s._)("label",{class:"label"},"Confirm Password:",-1))),Y={class:"field"},Z={class:"control"},z=["disabled"],R={key:2,class:"container"},W=r((()=>(0,s._)("div",{class:"notification is-success"},"Your password has been successfully changed.",-1))),B=[W];var G={__name:"ForgotPassword",props:{userType:String,username:String,email:String},setup(a){const e=a;let l=(0,i.iH)(!1),o=(0,i.iH)(""),r=(0,i.iH)(!1),W=(0,i.iH)(!1),G=(0,i.iH)(""),L=(0,i.iH)(!1),Q=(0,i.iH)(!1),j=(0,i.iH)(""),J=(0,i.iH)(""),K=(0,i.iH)(!1),X=(0,i.iH)(!1),aa=(0,i.iH)(!1),ea=(0,i.iH)(""),la=(0,i.iH)(e.username),sa=(0,i.iH)(e.email);async function ia(){if(null!=la.value||null!=sa.value){let s;if(l.value=!0,await u().post("/api/code/email",{email:sa.value}).then((a=>s=a.data)),s)W.value=!0;else if(W.value=!1,"patient"==e.userType)if(await u().post("/api/user/verify_username",{username:la.value,email:sa.value}).then((a=>ea.value=a.data)),ea.value){aa.value=!1;try{await u().post("/api/OTPMail",{email:sa.value}).then(L.value=!0),L.value=!0}catch(a){o.value=a}}else aa.value=!0;else if("doctor"==e.userType)if(await u().post("/api/doctor/verify_username",{username:la.value,email:sa.value}).then((a=>ea.value=a.data)),ea.value){aa.value=!1;try{await u().post("/api/OTPMail",{email:sa.value}).then(L.value=!0),L.value=!0}catch(a){o.value=a}}else aa.value=!0;else if("manager"==e.userType)if(await u().post("/api/manager/verify_username",{username:la.value,email:sa.value}).then((a=>ea.value=a.data)),ea.value){aa.value=!1;try{await u().post("/api/OTPMail",{email:sa.value}).then(L.value=!0),L.value=!0}catch(a){o.value=a}}else aa.value=!0;l.value=!1}}async function ta(){let a;Q.value=!1,await u().post("/api/code/verify",{code:G.value}).then((e=>a=e.data)),a&&(Q.value=!0)}async function na(){if(j.value===J.value){if("patient"==e.userType)try{await u().put("/api/fupdatePassword/patient",{patientID:ea.value._id,password:j.value}),ea.value="",X.value=!0}catch(a){X.value=!1,o.value=a,ea.value=""}else if("doctor"==e.userType)try{await u().put("/api/fupdatePassword/doctor",{doctorID:ea.value._id,password:j.value}),ea.value="",X.value=!0}catch(a){X.value=!1,o.value=a,ea.value=""}else if("manager"==e.userType)try{await u().put("/api/fupdatePassword/manager",{managerID:ea.value._id,password:j.value}),ea.value="",X.value=!0}catch(a){X.value=!1,o.value=a,ea.value=""}}else K.value=!0}return(a,e)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("a",{class:"subtitle has-text-danger",onClick:e[0]||(e[0]=a=>(0,i.dq)(r)?r.value=!(0,i.SU)(r):r=!(0,i.SU)(r))},"Forgot Password"),(0,s._)("div",{class:(0,t.C_)(["modal",{"is-active":(0,i.SU)(r)}])},[c,(0,s._)("div",d,[(0,i.SU)(L)?((0,s.wg)(),(0,s.iD)("section",P,[(0,i.SU)(Q)?((0,s.wg)(),(0,s.iD)("div",V,[(0,i.SU)(K)?((0,s.wg)(),(0,s.iD)("div",M,"Passwords not match.")):(0,s.kq)("",!0),(0,i.SU)(X)?((0,s.wg)(),(0,s.iD)("div",R,B)):((0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("div",A,[(0,s._)("div",N,[E,(0,s.wy)((0,s._)("input",{class:"input",type:"password","onUpdate:modelValue":e[4]||(e[4]=a=>(0,i.dq)(j)?j.value=a:j=a)},null,512),[[n.nr,(0,i.SU)(j)]])])]),(0,s._)("div",I,[(0,s._)("div",F,[O,(0,s.wy)((0,s._)("input",{class:"input",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>(0,i.dq)(J)?J.value=a:J=a)},null,512),[[n.nr,(0,i.SU)(J)]])])]),(0,s._)("div",Y,[(0,s._)("div",Z,[(0,s._)("button",{class:"button",onClick:na,disabled:""==(0,i.SU)(j)&&""==(0,i.SU)(J)},"Confirm",8,z)])])]))])):((0,s.wg)(),(0,s.iD)("div",D,[(0,s._)("div",q,[(0,s._)("div",x,[T,(0,s.wy)((0,s._)("input",{class:"input",type:"number","onUpdate:modelValue":e[3]||(e[3]=a=>(0,i.dq)(G)?G.value=a:G=a)},null,512),[[n.nr,(0,i.SU)(G)]])])]),(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("button",{class:"button",onClick:ta},"Verify")])])]))])):((0,s.wg)(),(0,s.iD)("section",v,[p,(0,i.SU)(o)?((0,s.wg)(),(0,s.iD)("div",_,(0,t.zw)((0,i.SU)(o)),1)):(0,s.kq)("",!0),(0,i.SU)(aa)?((0,s.wg)(),(0,s.iD)("div",w,"No account has been found linked with this email.")):(0,s.kq)("",!0),(0,i.SU)(W)?((0,s.wg)(),(0,s.iD)("div",H,"You have to wait 10 minutes before requesting a code again. ")):((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",g,[(0,s._)("div",h,[f,(0,s.wy)((0,s._)("input",{class:"input",type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>(0,i.dq)(la)?la.value=a:la=a)},null,512),[[n.nr,(0,i.SU)(la)]])])]),(0,s._)("div",y,[(0,s._)("div",b,[k,(0,s.wy)((0,s._)("input",{class:"input",type:"email","onUpdate:modelValue":e[2]||(e[2]=a=>(0,i.dq)(sa)?sa.value=a:sa=a)},null,512),[[n.nr,(0,i.SU)(sa)]])])]),(0,s._)("div",U,[(0,s._)("div",S,[(0,s._)("button",{class:(0,t.C_)(["button",{"is-loading":(0,i.SU)(l)}]),onClick:ia,disabled:null==(0,i.SU)(sa)||null==(0,i.SU)(la)},"Send OTP",10,C)])])]))]))]),(0,s._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=a=>(0,i.dq)(r)?r.value=!1:r=!1)})],2)],64))}},L=l(3744);const Q=(0,L.Z)(G,[["__scopeId","data-v-c2f9401e"]]);var j=Q},204:function(a,e,l){l.d(e,{Z:function(){return C}});var s=l(6252),i=l(3577);const t={class:"navbar is-hidden-desktop"},n={class:"navbar-brand"},o=(0,s._)("span",{"aria-hidden":"true"},null,-1),u=(0,s._)("span",{"aria-hidden":"true"},null,-1),r=(0,s._)("span",{"aria-hidden":"true"},null,-1),c=[o,u,r],d=(0,s._)("p",{class:"menu-label"},"General",-1),v={class:"menu-list"},p=(0,s._)("p",{class:"menu-label"},"Security",-1),_={class:"menu-list"},w=(0,s._)("p",{class:"menu-label"},"Support",-1),m={class:"menu-list"},g=(0,s._)("li",null,[(0,s._)("a",null,"FAQ")],-1),h=(0,s._)("hr",null,null,-1);function f(a,e,l,o,u,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",t,[(0,s._)("div",n,[(0,s._)("a",{role:"button",class:(0,i.C_)(["navbar-burger",{"is-active":!u.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:e[0]||(e[0]=(...a)=>r.menuNav&&r.menuNav(...a))},c,2)])]),(0,s._)("aside",{class:(0,i.C_)(["menu box",{"is-hidden-mobile":u.isActive,fixedMenu:u.isActive}]),style:{"background-color":"white",padding:"20px",height:"100vh"}},[d,(0,s._)("ul",v,[(0,s._)("li",null,[(0,s._)("a",{onClick:e[1]||(e[1]=(...a)=>r.navDoctors&&r.navDoctors(...a))},"Dashboard")]),(0,s._)("li",null,[(0,s._)("a",{onClick:e[2]||(e[2]=(...a)=>r.navProfile&&r.navProfile(...a))},"Profile")])]),p,(0,s._)("ul",_,[(0,s._)("li",null,[(0,s._)("a",{onClick:e[3]||(e[3]=(...a)=>r.navChangePass&&r.navChangePass(...a))},"Registration and Password")])]),w,(0,s._)("ul",m,[g,(0,s._)("li",null,[(0,s._)("a",{onClick:e[4]||(e[4]=a=>this.$router.push("/contactus"))},"Contact Us")])]),h,(0,s._)("button",{class:"button is-danger",onClick:e[5]||(e[5]=(...a)=>r.logout&&r.logout(...a))},"Logout")],2)],64)}var y=l(9669),b=l.n(y),k={name:"ManagerMenu",data(){return{isActive:!0,managerHospital:""}},async mounted(){await b().get("/session/manager").then((a=>this.managerHospital=a.data.hospital))},methods:{async logout(){await b()["delete"]("/session/manager"),await this.$store.commit("managerHospital",null),await this.$router.push("/user/manager/login")},menuNav(){this.isActive=!this.isActive},navProfile(){this.$router.push(`/user/manager/${this.managerHospital}/profile`)},navDoctors(){this.$router.push(`/user/manager/${this.managerHospital}`)},navChangePass(){this.$router.push(`/user/manager/${this.managerHospital}/security`)}}},U=l(3744);const S=(0,U.Z)(k,[["render",f]]);var C=S},6955:function(a,e,l){l.r(e),l.d(e,{default:function(){return Z}});var s=l(6252),i=l(2262),t=l(9963),n=l(3577),o=l(9669),u=l.n(o),r=l(204),c=l(9885);const d={class:"columns"},v={class:"column is-2"},p={class:"column"},_={class:"section"},w={class:"container box"},m=(0,s._)("label",{class:"label"},"Registration Code",-1),g={class:"field has-addons"},h={class:"control"},f=(0,s._)("i",{class:"fa-solid fa-arrows-rotate"},null,-1),y=[f],b=(0,s._)("hr",null,null,-1),k={key:0,class:"notification is-success"},U={key:1,class:"notification is-danger"},S={class:"field"},C=(0,s._)("label",{class:"label"},"Current Password",-1),H={class:"control"},P={key:0,class:"help is-danger"},D={class:"field"},q=(0,s._)("label",{class:"label"},"New Password",-1),x={class:"control"},T={key:0,class:"help is-danger"},V={class:"field"},M=(0,s._)("label",{class:"label"},"Confirm Password",-1),$={class:"control"},A={key:0,class:"help is-danger"},N=(0,s.Uk)(" Show password "),E={class:"field has-text-right"},I={class:"control"},F=["disabled"];var O={__name:"ManagerSecurity",setup(a){let e=(0,i.iH)(""),l=(0,i.iH)(""),o=(0,i.iH)(""),f=(0,i.iH)(!1),O=(0,i.iH)(""),Y=(0,i.iH)(""),Z=(0,i.iH)(!1),z=(0,i.iH)(!1),R=(0,i.iH)("");function W(){let a="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=e.length;for(let s=0;s<8;s++)a+=e.charAt(Math.floor(Math.random()*l));R.value=a.toUpperCase()}async function B(){W();try{await u().put(`/api/manager/${O.value}`,{registrationCode:R.value}),await u().put("/session/manager",{registrationCode:R.value})}catch(a){Y.value=a}}function G(){let a=document.getElementsByClassName("password");for(let e=0;e<a.length;e++)"password"===a[e].type?a[e].type="text":a[e].type="password"}async function L(){l.value===o.value?await u().put("/api/updatePassword/manager",{managerID:O.value,currentPassword:e.value,newPassword:l.value}).then((a=>{a.data?(z.value=!1,e.value="",l.value="",o.value="",Z.value=!0,Y.value="",f.value=!1):(Z.value=!1,z.value=!0)})).catch((a=>{Y.value=a,Z.value=!1})):(f.value=!0,Z.value=!1)}return(0,s.bv)((async()=>{await u().get("/session/manager").then((a=>O.value=a.data._id)),await u().get("/session/manager").then((a=>R.value=a.data.registrationCode)),console.log(R.value)})),(a,u)=>((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",v,[(0,s.Wm)(r.Z)]),(0,s._)("div",p,[(0,s._)("section",_,[(0,s._)("div",w,[m,(0,s._)("div",g,[(0,s._)("div",h,[(0,s.wy)((0,s._)("input",{class:"input",type:"text","onUpdate:modelValue":u[0]||(u[0]=a=>(0,i.dq)(R)?R.value=a:R=a)},null,512),[[t.nr,(0,i.SU)(R)]])]),(0,s._)("div",{class:"control"},[(0,s._)("a",{class:"button",onClick:B},y)])]),b,(0,i.SU)(Z)?((0,s.wg)(),(0,s.iD)("div",k,"Password has been changed successfully. ")):(0,s.kq)("",!0),(0,i.SU)(Y)?((0,s.wg)(),(0,s.iD)("div",U,(0,n.zw)((0,i.SU)(Y)),1)):(0,s.kq)("",!0),(0,s._)("div",S,[C,(0,s._)("div",H,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":u[1]||(u[1]=a=>(0,i.dq)(e)?e.value=a:e=a),placeholder:"Current password"},null,512),[[t.nr,(0,i.SU)(e)]])]),(0,i.SU)(z)?((0,s.wg)(),(0,s.iD)("p",P,"Current password does not match in our database.")):(0,s.kq)("",!0)]),(0,s._)("div",D,[q,(0,s._)("div",x,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":u[2]||(u[2]=a=>(0,i.dq)(l)?l.value=a:l=a),placeholder:"New password"},null,512),[[t.nr,(0,i.SU)(l)]])]),(0,i.SU)(f)?((0,s.wg)(),(0,s.iD)("p",T,"Password do not match.")):(0,s.kq)("",!0)]),(0,s._)("div",V,[M,(0,s._)("div",$,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":u[3]||(u[3]=a=>(0,i.dq)(o)?o.value=a:o=a),placeholder:"Confirm password"},null,512),[[t.nr,(0,i.SU)(o)]])]),(0,i.SU)(f)?((0,s.wg)(),(0,s.iD)("p",A,"Password do not match.")):(0,s.kq)("",!0)]),(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("label",{class:"checkbox"},[(0,s._)("input",{type:"checkbox",onClick:G}),N])])]),(0,s._)("div",E,[(0,s._)("div",I,[(0,s._)("button",{class:"button is-danger",disabled:""==(0,i.SU)(e)||""==(0,i.SU)(l)||""==(0,i.SU)(o),onClick:L},"Change password",8,F)])]),(0,s.Wm)(c["default"],{userType:"manager"})])])])]))}};const Y=O;var Z=Y}}]);
//# sourceMappingURL=955.3ddb25ee.js.map