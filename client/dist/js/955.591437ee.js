"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[955,726],{1726:function(a,e,l){l.r(e),l.d(e,{default:function(){return J}});var s=l(6252),i=l(2262),t=l(3577),n=l(9963),o=l(6154);const u=a=>((0,s.dD)("data-v-572fa0ea"),a=a(),(0,s.Cn)(),a),r=u((()=>(0,s._)("div",{class:"modal-background"},null,-1))),c={class:"modal-content has-text-left",style:{width:"40%",margin:"auto"}},d={key:0,class:"section box"},v=u((()=>(0,s._)("p",{class:"title is-4 has-text-danger"},"Forgot Password",-1))),p={key:0,class:"notification is-danger"},w={key:1,class:"notification is-warning"},g={key:2,class:"container"},_={class:"field"},m={class:"control"},f=u((()=>(0,s._)("label",{class:"label"},"Enter Username",-1))),h={class:"field"},y={class:"control"},b=u((()=>(0,s._)("label",{class:"label"},"Enter Email",-1))),k={class:"field"},C={class:"control"},P=["disabled"],H={key:3,class:"notification is-danger"},D={key:1,class:"section box"},U={key:0,class:"container"},Z={key:0,class:"notification is-warning"},S={class:"field"},q={class:"control"},x=u((()=>(0,s._)("label",{class:"label"},"Enter code",-1))),V={key:1,class:"container"},M={key:0,class:"notification is-danger"},N={key:1,class:"container"},$={class:"field"},A={class:"control"},I=u((()=>(0,s._)("label",{class:"label"},"New Password:",-1))),E={class:"field"},T={class:"control"},F=u((()=>(0,s._)("label",{class:"label"},"Confirm Password:",-1))),O={class:"field"},Y={class:"control"},z=["disabled"],R={key:2,class:"container"},W=u((()=>(0,s._)("div",{class:"notification is-success"},"Your password has been successfully changed.",-1))),B=[W];var G={__name:"ForgotPassword",props:{username:String,email:String,forgotPasswordPromptCount:{type:Number,default:0}},setup(a){const e=a,l=(0,i.iH)(!1),u=(0,i.iH)(""),W=(0,i.iH)(!1),G=(0,i.iH)(!1),L=(0,i.iH)(""),j=(0,i.iH)(!1),J=(0,i.iH)(!1),K=(0,i.iH)(!1),Q=(0,i.iH)(""),X=(0,i.iH)(""),aa=(0,i.iH)(!1),ea=(0,i.iH)(!1),la=(0,i.iH)(!1),sa=(0,i.iH)(!1),ia=(0,i.iH)(""),ta=(0,i.iH)(e.username),na=(0,i.iH)(e.email),oa=(0,i.iH)(""),ua=(0,i.iH)(2),ra=(0,s.Fl)((()=>e.forgotPasswordPromptCount));async function ca(){if(await o.Z.post("/api/user/verify_username",{username:ta.value,email:na.value,forgotPassword:!0}).then((a=>ia.value=a.data)),ia.value){la.value=!1;try{await o.Z.post("/api/OTPMail",{email:na.value}).then(j.value=!0),j.value=!0,oa.value="patient",sa.value=!1}catch(a){u.value=a}}else la.value=!0}async function da(){if(await o.Z.post("/api/doctor/verify_username",{username:ta.value,email:na.value,forgotPassword:!0}).then((a=>ia.value=a.data)),ia.value){la.value=!1;try{await o.Z.post("/api/OTPMail",{email:na.value}).then(j.value=!0),j.value=!0,oa.value="doctor",sa.value=!1}catch(a){u.value=a}}else la.value=!0}async function va(){if(await o.Z.post("/api/manager/verify_username",{username:ta.value,email:na.value,forgotPassword:!0}).then((a=>ia.value=a.data)),ia.value){la.value=!1;try{await o.Z.post("/api/OTPMail",{email:na.value}).then(j.value=!0),j.value=!0,oa.value="provider",sa.value=!1}catch(a){u.value=a}}else la.value=!0}async function pa(){if(null!=ta.value||null!=na.value){let a;if(l.value=!0,await o.Z.post("/api/code/email",{email:na.value}).then((e=>a=e.data)),a)G.value=!0;else{G.value=!1,sa.value=!0;while(sa.value){if(await ca(),ia.value)break;if(await da(),ia.value)break;if(await va(),ia.value)break;sa.value=!1}}l.value=!1}}async function wa(){let a;K.value=!1,J.value=!1,await o.Z.post("/api/code/verify",{code:L.value}).then((e=>a=e.data)),a?J.value=!0:K.value=!0}async function ga(){if(Q.value===X.value){if("patient"==oa.value)try{await o.Z.put("/api/fupdatePassword/patient",{patientID:ia.value,password:Q.value}),ia.value="",ea.value=!0}catch(a){ea.value=!1,u.value=a,ia.value=""}else if("doctor"==oa.value)try{await o.Z.put("/api/fupdatePassword/doctor",{doctorID:ia.value,password:Q.value}),ia.value="",ea.value=!0}catch(a){ea.value=!1,u.value=a,ia.value=""}else if("provider"==oa.value)try{await o.Z.put("/api/fupdatePassword/manager",{managerID:ia.value,password:Q.value}),ia.value="",ea.value=!0}catch(a){ea.value=!1,u.value=a,ia.value=""}}else aa.value=!0}return(a,e)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,i.SU)(ra)>=ua.value?((0,s.wg)(),(0,s.iD)("a",{key:0,class:"help has-text-danger",onClick:e[0]||(e[0]=a=>W.value=!W.value)},"Forgot Password")):(0,s.kq)("",!0),(0,s._)("div",{class:(0,t.C_)(["modal",{"is-active":W.value}])},[r,(0,s._)("div",c,[j.value?((0,s.wg)(),(0,s.iD)("section",D,[J.value?((0,s.wg)(),(0,s.iD)("div",V,[aa.value?((0,s.wg)(),(0,s.iD)("div",M,"Passwords not match.")):(0,s.kq)("",!0),ea.value?((0,s.wg)(),(0,s.iD)("div",R,B)):((0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("div",$,[(0,s._)("div",A,[I,(0,s.wy)((0,s._)("input",{class:"input",type:"password","onUpdate:modelValue":e[4]||(e[4]=a=>Q.value=a)},null,512),[[n.nr,Q.value]])])]),(0,s._)("div",E,[(0,s._)("div",T,[F,(0,s.wy)((0,s._)("input",{class:"input",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>X.value=a)},null,512),[[n.nr,X.value]])])]),(0,s._)("div",O,[(0,s._)("div",Y,[(0,s._)("button",{class:"button",onClick:ga,disabled:""==Q.value&&""==X.value},"Confirm",8,z)])])]))])):((0,s.wg)(),(0,s.iD)("div",U,[K.value?((0,s.wg)(),(0,s.iD)("div",Z,"Incorrect code, please try again.")):(0,s.kq)("",!0),(0,s._)("div",S,[(0,s._)("div",q,[x,(0,s.wy)((0,s._)("input",{class:"input",type:"number","onUpdate:modelValue":e[3]||(e[3]=a=>L.value=a)},null,512),[[n.nr,L.value]])])]),(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("button",{class:"button",onClick:wa},"Verify")])])]))])):((0,s.wg)(),(0,s.iD)("section",d,[v,u.value?((0,s.wg)(),(0,s.iD)("div",p,(0,t.zw)(u.value),1)):(0,s.kq)("",!0),la.value?((0,s.wg)(),(0,s.iD)("div",w,"No account has been found linked with this email.")):(0,s.kq)("",!0),G.value?((0,s.wg)(),(0,s.iD)("div",H,"You have to wait 10 minutes before requesting a code again. ")):((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",_,[(0,s._)("div",m,[f,(0,s.wy)((0,s._)("input",{class:"input",type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>ta.value=a)},null,512),[[n.nr,ta.value]])])]),(0,s._)("div",h,[(0,s._)("div",y,[b,(0,s.wy)((0,s._)("input",{class:"input",type:"email","onUpdate:modelValue":e[2]||(e[2]=a=>na.value=a)},null,512),[[n.nr,na.value]])])]),(0,s._)("div",k,[(0,s._)("div",C,[(0,s._)("button",{class:(0,t.C_)(["button",{"is-loading":l.value}]),onClick:pa,disabled:null==na.value||null==ta.value},"Send OTP",10,P)])])]))]))]),(0,s._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=a=>W.value=!1)})],2)],64))}},L=l(3744);const j=(0,L.Z)(G,[["__scopeId","data-v-572fa0ea"]]);var J=j},9393:function(a,e,l){l.d(e,{Z:function(){return C}});var s=l(6252),i=l(3577);const t={class:"navbar is-hidden-desktop"},n={class:"navbar-brand"},o=(0,s._)("span",{"aria-hidden":"true"},null,-1),u=(0,s._)("span",{"aria-hidden":"true"},null,-1),r=(0,s._)("span",{"aria-hidden":"true"},null,-1),c=[o,u,r],d=(0,s._)("p",{class:"menu-label"},"General",-1),v={class:"menu-list"},p=(0,s._)("p",{class:"menu-label"},"Security",-1),w={class:"menu-list"},g=(0,s._)("p",{class:"menu-label"},"Support",-1),_={class:"menu-list"},m=(0,s._)("hr",null,null,-1);function f(a,e,l,o,u,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",t,[(0,s._)("div",n,[(0,s._)("a",{role:"button",class:(0,i.C_)(["navbar-burger",{"is-active":!u.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:e[0]||(e[0]=(...a)=>r.menuNav&&r.menuNav(...a))},c,2)])]),(0,s._)("aside",{class:(0,i.C_)(["menu box",{"is-hidden-mobile":u.isActive,fixedMenu:u.isActive}]),style:{"background-color":"white",padding:"20px",height:"100vh"}},[d,(0,s._)("ul",v,[(0,s._)("li",null,[(0,s._)("a",{onClick:e[1]||(e[1]=(...a)=>r.navDoctors&&r.navDoctors(...a))},"Dashboard")]),(0,s._)("li",null,[(0,s._)("a",{onClick:e[2]||(e[2]=(...a)=>r.navProfile&&r.navProfile(...a))},"Profile")])]),p,(0,s._)("ul",w,[(0,s._)("li",null,[(0,s._)("a",{onClick:e[3]||(e[3]=(...a)=>r.navChangePass&&r.navChangePass(...a))},"Registration and Password")])]),g,(0,s._)("ul",_,[(0,s._)("li",null,[(0,s._)("a",{onClick:e[4]||(e[4]=a=>this.$router.push("/contactus"))},"Contact Us")])]),m,(0,s._)("button",{class:"button is-danger",onClick:e[5]||(e[5]=(...a)=>r.logout&&r.logout(...a))},"Logout")],2)],64)}var h=l(6154),y={name:"ManagerMenu",data(){return{isActive:!0,managerHospital:""}},async mounted(){await h.Z.get("/session/manager").then((a=>this.managerHospital=a.data.hospital))},methods:{async logout(){await h.Z["delete"]("/session/manager"),await this.$store.commit("managerHospital",null),await this.$router.push("/account/login")},menuNav(){this.isActive=!this.isActive},navProfile(){this.$router.push(`/manager/${this.managerHospital}/profile`)},navDoctors(){this.$router.push(`/manager/${this.managerHospital}`)},navChangePass(){this.$router.push(`/manager/${this.managerHospital}/security`)}}},b=l(3744);const k=(0,b.Z)(y,[["render",f]]);var C=k},6955:function(a,e,l){l.r(e),l.d(e,{default:function(){return F}});var s=l(6252),i=l(2262),t=l(9963),n=l(3577),o=l(6154),u=l(9393),r=l(1726);const c={class:"columns"},d={class:"column is-2"},v={class:"column"},p={class:"section"},w={class:"container box"},g=(0,s._)("label",{class:"label"},"Registration Code",-1),_={class:"field has-addons"},m={class:"control"},f=(0,s._)("i",{class:"fa-solid fa-arrows-rotate"},null,-1),h=[f],y=(0,s._)("hr",null,null,-1),b={key:0,class:"notification is-success"},k={key:1,class:"notification is-danger"},C={class:"field"},P=(0,s._)("label",{class:"label"},"Current Password",-1),H={class:"control"},D={key:0,class:"help is-danger"},U={class:"field"},Z=(0,s._)("label",{class:"label"},"New Password",-1),S={class:"control"},q={key:0,class:"help is-danger"},x={class:"field"},V=(0,s._)("label",{class:"label"},"Confirm Password",-1),M={class:"control"},N={key:0,class:"help is-danger"},$={class:"field has-text-right"},A={class:"control"},I=["disabled"];var E={__name:"ManagerSecurity",setup(a){let e=(0,i.iH)(""),l=(0,i.iH)(""),f=(0,i.iH)(""),E=(0,i.iH)(!1),T=(0,i.iH)(""),F=(0,i.iH)(""),O=(0,i.iH)(!1),Y=(0,i.iH)(!1),z=(0,i.iH)("");function R(){let a="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=e.length;for(let s=0;s<8;s++)a+=e.charAt(Math.floor(Math.random()*l));z.value=a.toUpperCase()}async function W(){R();try{await o.Z.put(`/api/manager/${T.value}`,{registrationCode:z.value}),await o.Z.put("/session/manager",{registrationCode:z.value})}catch(a){F.value=a}}function B(){let a=document.getElementsByClassName("password");for(let e=0;e<a.length;e++)"password"===a[e].type?a[e].type="text":a[e].type="password"}async function G(){l.value===f.value?await o.Z.put("/api/updatePassword/manager",{managerID:T.value,currentPassword:e.value,newPassword:l.value}).then((a=>{a.data?(Y.value=!1,e.value="",l.value="",f.value="",O.value=!0,F.value="",E.value=!1):(O.value=!1,Y.value=!0)})).catch((a=>{F.value=a,O.value=!1})):(E.value=!0,O.value=!1)}return(0,s.bv)((async()=>{await o.Z.get("/session/manager").then((a=>T.value=a.data._id)),await o.Z.get("/session/manager").then((a=>z.value=a.data.registrationCode))})),(a,o)=>((0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",d,[(0,s.Wm)(u.Z)]),(0,s._)("div",v,[(0,s._)("section",p,[(0,s._)("div",w,[g,(0,s._)("div",_,[(0,s._)("div",m,[(0,s.wy)((0,s._)("input",{class:"input",type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>(0,i.dq)(z)?z.value=a:z=a)},null,512),[[t.nr,(0,i.SU)(z)]])]),(0,s._)("div",{class:"control"},[(0,s._)("a",{class:"button",onClick:W},h)])]),y,(0,i.SU)(O)?((0,s.wg)(),(0,s.iD)("div",b,"Password has been changed successfully. ")):(0,s.kq)("",!0),(0,i.SU)(F)?((0,s.wg)(),(0,s.iD)("div",k,(0,n.zw)((0,i.SU)(F)),1)):(0,s.kq)("",!0),(0,s._)("div",C,[P,(0,s._)("div",H,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":o[1]||(o[1]=a=>(0,i.dq)(e)?e.value=a:e=a),placeholder:"Current password"},null,512),[[t.nr,(0,i.SU)(e)]])]),(0,i.SU)(Y)?((0,s.wg)(),(0,s.iD)("p",D,"Current password does not match in our database.")):(0,s.kq)("",!0)]),(0,s._)("div",U,[Z,(0,s._)("div",S,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":o[2]||(o[2]=a=>(0,i.dq)(l)?l.value=a:l=a),placeholder:"New password"},null,512),[[t.nr,(0,i.SU)(l)]])]),(0,i.SU)(E)?((0,s.wg)(),(0,s.iD)("p",q,"Password do not match.")):(0,s.kq)("",!0)]),(0,s._)("div",x,[V,(0,s._)("div",M,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":o[3]||(o[3]=a=>(0,i.dq)(f)?f.value=a:f=a),placeholder:"Confirm password"},null,512),[[t.nr,(0,i.SU)(f)]])]),(0,i.SU)(E)?((0,s.wg)(),(0,s.iD)("p",N,"Password do not match.")):(0,s.kq)("",!0)]),(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("label",{class:"checkbox"},[(0,s._)("input",{type:"checkbox",onClick:B}),(0,s.Uk)(" Show password ")])])]),(0,s._)("div",$,[(0,s._)("div",A,[(0,s._)("button",{class:"button is-danger",disabled:""==(0,i.SU)(e)||""==(0,i.SU)(l)||""==(0,i.SU)(f),onClick:G},"Change password",8,I)])]),(0,s.Wm)(r["default"],{userType:"manager"})])])])]))}};const T=E;var F=T}}]);
//# sourceMappingURL=955.591437ee.js.map