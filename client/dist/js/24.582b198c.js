"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[24],{6024:function(i,t,e){e.r(t),e.d(t,{default:function(){return Ai}});var s=e(6252),a=e(3577),l=e(9963);const o=i=>((0,s.dD)("data-v-0c69526c"),i=i(),(0,s.Cn)(),i),n={id:"background"},r=o((()=>(0,s._)("div",{class:"modal-background"},null,-1))),c=o((()=>(0,s._)("div",{class:"modal-content",style:{overflow:"hidden"}},[(0,s._)("div",{class:"loader",style:{margin:"auto"}})],-1))),d=[r,c],p=o((()=>(0,s._)("div",{class:"block is-hidden-desktop"},null,-1))),u={key:0},h={class:"columns is-multiline"},g={class:"column is-narrow"},y={class:"doprdown-trigger"},v=o((()=>(0,s._)("span",{class:"icon is-small"},[(0,s._)("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1))),f={class:"dropdown-menu"},w={class:"dropdown-content",style:{overflow:"hidden"}},m={class:"dropdown-item"},_=["onClick"],k={class:"column is-narrow"},b={class:"doprdown-trigger"},F=o((()=>(0,s._)("span",{class:"icon is-small"},[(0,s._)("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1))),C={class:"dropdown-menu"},D={class:"dropdown-content"},H={class:"dropdown-item"},L={class:"dropdown-item"},U={class:"dropdown-item"},S={class:"column is-narrow"},z=o((()=>(0,s._)("span",null,"Distance",-1))),x={class:"icon is-small"},A={key:0,class:"fas fa-angle-down","aria-hidden":"true"},$={key:1,class:"fas fa-angle-up","aria-hidden":"true"},P={class:"column is-narrow"},N={class:"select is-rounded"},q=o((()=>(0,s._)("option",{value:"",disabled:""},"Specialist",-1))),I=o((()=>(0,s._)("option",{value:""},"Any",-1))),M=["value"],T={class:"column has-text-right"},B={class:"dropdown-trigger"},O={class:"field has-addons"},Y={class:"control has-icons-left"},K=o((()=>(0,s._)("span",{class:"icon is-small is-left"},[(0,s._)("i",{class:"fa-solid fa-location-dot"})],-1))),R={class:"control"},E=["disabled"],j={class:"dropdown-menu"},V={key:0,class:"dropdown-content has-text-left"},W=["onClick"],Z={key:1,class:"dropdown-content has-text-left"},G=o((()=>(0,s._)("p",{class:"dropdown-item has-text-danger"}," Region not found or supported, please try again. ",-1))),J=[G],Q={key:0,class:"block"},X=o((()=>(0,s._)("div",{class:"notification box",id:"notification",style:{width:"50%",margin:"auto","background-color":"white"}},[(0,s.Uk)(" You must "),(0,s._)("a",{class:"has-text-success",href:"/user/login"},"login"),(0,s.Uk)(". or "),(0,s._)("a",{class:"has-text-danger",href:"/user/signup"},"create an account"),(0,s.Uk)(". to make an appointment. ")],-1))),ii=[X],ti={class:"columns"},ei={key:0,class:"column",style:{"max-height":"100vh",overflow:"auto"}},si={class:"container is-fluid"},ai={class:"column is-5"},li=["onClick"],oi={class:"image is-3by2 is-rounded"},ni=["src"],ri={class:"column"},ci={key:0,class:"notification is-info is-light"},di=["onClick"],pi={class:"title is-4"},ui={class:"subtitle is-6"},hi=o((()=>(0,s._)("br",null,null,-1))),gi={class:"content"},yi=o((()=>(0,s._)("b",null,"Type of Facility:",-1))),vi={key:0},fi={class:"subtitle is-6"},wi=o((()=>(0,s._)("b",null,"Contacts:",-1))),mi=(0,s.Uk)(),_i=o((()=>(0,s._)("hr",null,null,-1))),ki={key:0,class:"column notification is-danger is-light has-text-centered"},bi={key:1,class:"column notification is-danger is-light has-text-centered"},Fi={class:"column is-5"},Ci=["src"];function Di(i,t,e,o,r,c){const G=(0,s.up)("NavigationTab");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(G),(0,s._)("div",{class:(0,a.C_)(["modal",{"is-active":r.isHospitalLoading}])},d,2),p,""!=r.citiesOrMunicipalities?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",h,[(0,s._)("div",g,[(0,s._)("div",{class:(0,a.C_)(["dropdown",{"is-active":r.cityMunicipalityFilter}])},[(0,s._)("div",y,[(0,s._)("button",{class:"button is-rounded",onClick:t[0]||(t[0]=i=>r.cityMunicipalityFilter=!r.cityMunicipalityFilter)},[(0,s._)("span",null,(0,a.zw)(""==r.city?"City/Municipality":r.city),1),v])]),(0,s._)("div",f,[(0,s._)("div",w,[(0,s._)("div",m,[(0,s._)("a",{onClick:t[1]||(t[1]=i=>c.filterByCity(""))},"Any")]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.citiesOrMunicipalities.citiesOrMunicipalities.sort(((i,t)=>i.name>t.name?1:-1)),((i,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"dropdown-item",key:t},[(0,s._)("a",{onClick:t=>c.filterByCity(i.name)},(0,a.zw)(i.name),9,_)])))),128))])])],2)]),(0,s._)("div",k,[(0,s._)("div",{class:(0,a.C_)(["dropdown",{"is-active":r.facilityTypeFilter}])},[(0,s._)("div",b,[(0,s._)("button",{class:"button is-rounded",onClick:t[2]||(t[2]=i=>r.facilityTypeFilter=!r.facilityTypeFilter)},[(0,s._)("span",null,(0,a.zw)(null==r.typeFilter?"Type of Facility":r.typeFilter),1),F])]),(0,s._)("div",C,[(0,s._)("div",D,[(0,s._)("div",H,[(0,s._)("a",{onClick:t[3]||(t[3]=(...i)=>c.filterAll&&c.filterAll(...i))},"All ")]),(0,s._)("div",L,[(0,s._)("a",{onClick:t[4]||(t[4]=(...i)=>c.filterPublic&&c.filterPublic(...i))},"Public ")]),(0,s._)("div",U,[(0,s._)("a",{onClick:t[5]||(t[5]=(...i)=>c.filterPrivate&&c.filterPrivate(...i))},"Private ")])])])],2)]),(0,s._)("div",S,[(0,s._)("button",{class:"button is-rounded",onClick:t[6]||(t[6]=(...i)=>c.filterDistanceToggle&&c.filterDistanceToggle(...i))},[z,(0,s._)("span",x,[r.distanceFilter?((0,s.wg)(),(0,s.iD)("i",A)):((0,s.wg)(),(0,s.iD)("i",$))])])]),(0,s._)("div",P,[(0,s._)("div",N,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[7]||(t[7]=i=>r.filterSpecialist=i),onChange:t[8]||(t[8]=(...i)=>c.filterBySpecialization&&c.filterBySpecialization(...i))},[q,I,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.specializations,(i=>((0,s.wg)(),(0,s.iD)("option",{key:i,value:i},(0,a.zw)(i),9,M)))),128))],544),[[l.bM,r.filterSpecialist]])])]),(0,s._)("div",T,[(0,s._)("div",{class:(0,a.C_)(["dropdown",{"is-active":r.isActiveDropdown}])},[(0,s._)("div",B,[(0,s._)("div",O,[(0,s._)("div",Y,[(0,s.wy)((0,s._)("input",{class:"input",type:"text","onUpdate:modelValue":t[9]||(t[9]=i=>r.province=i),style:{width:"300px"},placeholder:"What region are you located?",onInput:t[10]||(t[10]=(...i)=>c.regionSelect&&c.regionSelect(...i))},null,544),[[l.nr,r.province]]),K]),(0,s._)("div",R,[(0,s._)("button",{class:"button is-info is-rounded",onClick:t[11]||(t[11]=i=>c.loadProvider()),disabled:""==r.province},"Search",8,E)])]),(0,s._)("div",j,[0!==Object.keys(c.geolocationIndexed).length?((0,s.wg)(),(0,s.iD)("div",V,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.geolocationIndexed,(i=>((0,s.wg)(),(0,s.iD)("a",{class:"dropdown-item",key:i._id,onClick:t=>c.selectRegion(i.province)},(0,a.zw)(i.province),9,W)))),128))])):((0,s.wg)(),(0,s.iD)("div",Z,J))])])],2)])]),0==this.checkUser?((0,s.wg)(),(0,s.iD)("div",Q,ii)):(0,s.kq)("",!0),(0,s._)("div",ti,[0!==r.geoHospitalNearestUser.length?((0,s.wg)(),(0,s.iD)("div",ei,[(0,s._)("div",si,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.geoHospitalNearestUserIndexed,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"columns has-text-left",id:"hospital",style:{"margin-bottom":"5%"},key:e},[(0,s._)("div",ai,[(0,s._)("a",{onClick:e=>r.checkUser?c.bookAppointment(t):i.$router.push("/user/login")},[(0,s._)("figure",oi,[(0,s._)("img",{loading:"lazy",style:{"border-radius":"10px"},src:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/managers/${t.hospital}.jpg`},null,8,ni)])],8,li)]),(0,s._)("div",ri,[r.filterSpecialist&&0!==t?.specialistArrFilter?((0,s.wg)(),(0,s.iD)("div",ci,(0,a.zw)(t?.specialistArrFilter)+" available "+(0,a.zw)(r.filterSpecialist),1)):(0,s.kq)("",!0),(0,s._)("a",{onClick:e=>r.checkUser?c.bookAppointment(t):i.$router.push("/user/login")},[(0,s._)("h1",pi,(0,a.zw)(t.hospital),1),(0,s._)("p",ui,(0,a.zw)(t.barangayORStreet)+", "+(0,a.zw)(t.city)+", "+(0,a.zw)(t.province),1)],8,di),hi,(0,s._)("div",gi,[yi,(0,s.Uk)(" "+(0,a.zw)(t.type)+" ",1),"undefined"!==typeof t.details[0].contacts?((0,s.wg)(),(0,s.iD)("span",vi,[(0,s._)("p",fi,[wi,mi,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.details[0].contacts,((i,t)=>((0,s.wg)(),(0,s.iD)("span",{key:t},(0,a.zw)(i.contact+" "),1)))),128))])])):(0,s.kq)("",!0)])]),_i])))),128))]),0==c.geoHospitalNearestUserIndexed.length?((0,s.wg)(),(0,s.iD)("div",ki," Sorry, no Hospitals/Clinics has been found. ")):(0,s.kq)("",!0)])):r.isHospitalLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",bi," Hospitals/Clinics not found, please try again or search another region. ")),(0,s._)("div",Fi,[(0,s._)("iframe",{loading:"lazy",id:"geoIframe",src:`https://maps.google.com/maps?q=${r.userLatitude},${r.userLongitude}&hl=es;z=14&output=embed`},null,8,Ci)])])])):(0,s.kq)("",!0)])}e(6699);var Hi=e(9669),Li=e.n(Hi),Ui=e(7902),Si={name:"HospitalFinder",computed:{geolocationIndexed(){return this.geolocation.filter((i=>i.province.toLowerCase().includes(this.province.toLowerCase())))},geoHospitalNearestUserIndexed(){return this.geoHospitalNearestUser&&this.filterSpecialist?this.geoHospitalNearestUser.filter((i=>i.hospital.toLowerCase().includes(this.hospital.toLowerCase()))).filter((i=>i?.specialistArrFilter>0)).filter((i=>null==this.typeFilter?"Private"==i.type||"Public"==i.type:i.type==this.typeFilter)).filter((i=>i.city.includes(this.city))):!!this.geoHospitalNearestUser&&this.geoHospitalNearestUser.filter((i=>i.hospital.toLowerCase().includes(this.hospital.toLowerCase()))).filter((i=>null==this.typeFilter?"Private"==i.type||"Public"==i.type:i.type==this.typeFilter)).filter((i=>i.city.includes(this.city)))}},async mounted(){await Li().get("/api/geolocation").then((i=>this.geolocation=i.data)),null!==this.$store.state.patientID?this.checkUser=!0:this.checkUser=!1,await this.loadProvider()},data(){return{city:"",isHospitalLoading:!1,checkUser:"",hospital:"",geolocation:[],typeFilter:null,citiesOrMunicipalities:[],province:this.$route.query.name,userLatitude:this.$route.query.userLat,userLongitude:this.$route.query.userLong,isActiveDropdown:!1,geoHospitalNearestUser:"",specializations:this.$store.getters.getSpecializationList,filterSpecialist:this.$route.query.symptom,distanceFilter:!1,cityMunicipalityFilter:!1,facilityTypeFilter:!1,doctorSpecialistFilter:[],provincePrompt:!1}},methods:{async bookAppointment(i){this.$store.commit("hospitalDetails",i),await Li().put(`/api/manager/${i._id}`,{engagements:i.engagements+1}),await this.$router.push(`/user/${this.$store.state.patientUsername}/${i._id}/doctors`)},regionSelect(){this.isActiveDropdown=!0},filterByCity(i){this.city=i},filterAll(){this.typeFilter=null},filterPrivate(){this.typeFilter="Private"},filterPublic(){this.typeFilter="Public"},filterDistanceToggle(){this.isHospitalLoading=!0,this.geoHospitalNearestUser.sort(((i,t)=>this.distanceFilter?t.distance-i.distance:i.distance-t.distance)),this.distanceFilter=!this.distanceFilter,this.isHospitalLoading=!1},selectRegion(i){this.province=i,this.isActiveDropdown=!1},async loadProvider(){this.isHospitalLoading=!0,await this.geolocation.find((i=>i.province===this.province))&&(this.$router.push({path:"/provider",query:{name:this.province,symptom:this.filterSpecialist,userLat:this.userLatitude,userLong:this.userLongitude}}),this.citiesOrMunicipalities=this.geolocation.find((i=>i.province===this.province)),await Li().post("/api/geoFindHospitalNearestUser",{province:this.province,latitude:parseFloat(this.userLatitude),longitude:parseFloat(this.userLongitude)}).then((i=>this.geoHospitalNearestUser=i.data)),document.getElementById("background").style.background="none",this.filterSpecialist&&await this.filterBySpecialization()),this.isHospitalLoading=!1},async filterBySpecialization(){this.isHospitalLoading=!0,this.doctorSpecialistFilter=[],this.$router.push({path:"/provider",query:{name:this.province,symptom:this.filterSpecialist,userLat:this.userLatitude,userLong:this.userLongitude}}),await Li().get("/api/doctor/filteration").then((i=>{this.geoHospitalNearestUser.forEach((t=>this.doctorSpecialistFilter.push(i.data.filter((i=>i.hospitalOrigin.find((i=>i.hospital==t.hospital))&&i.specialist.find((i=>i==this.filterSpecialist&&t.specializations.find((i=>i.specialist==this.filterSpecialist))))&&i.schedule.find((i=>i.hospital==t.hospital&&new Date(i.id)>new Date)))).length)))})),this.geoHospitalNearestUser.forEach(((i,t)=>i["specialistArrFilter"]=this.doctorSpecialistFilter[t])),this.geoHospitalNearestUser.sort(((i,t)=>t.specialistArrFilter-i.specialistArrFilter)),this.isHospitalLoading=!1}},components:{NavigationTab:Ui.Z}},zi=e(3744);const xi=(0,zi.Z)(Si,[["render",Di],["__scopeId","data-v-0c69526c"]]);var Ai=xi}}]);
//# sourceMappingURL=24.582b198c.js.map