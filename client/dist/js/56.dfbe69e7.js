"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[56],{7787:function(t,i,a){a.d(i,{Z:function(){return d}});var e=a(6252),s=a(2262),l=a(3577);const o={key:0,class:"notification is-danger"};var n={__name:"CatchError",props:{errMsg:null},setup(t){const i=t,a=(0,e.Fl)((()=>i.errMsg));return(t,i)=>{const n=(0,e.up)("router-link");return(0,s.SU)(a)?((0,e.wg)(),(0,e.iD)("div",o,[(0,e.Uk)("Sorry, something went wrong. "+(0,l.zw)((0,s.SU)(a).message)+", please try again later or ",1),(0,e.Wm)(n,{to:"/contactus"},{default:(0,e.w5)((()=>[(0,e.Uk)("contact us")])),_:1}),(0,e.Uk)(". ")])):(0,e.kq)("",!0)}}};const c=n;var d=c},3238:function(t,i,a){a.d(i,{Z:function(){return f}});var e=a(6252),s=a(3577);const l={class:"navbar is-hidden-desktop"},o={class:"navbar-brand"},n=(0,e._)("span",{"aria-hidden":"true"},null,-1),c=(0,e._)("span",{"aria-hidden":"true"},null,-1),d=(0,e._)("span",{"aria-hidden":"true"},null,-1),r=[n,c,d],u=(0,e._)("p",{class:"menu-label"},"General",-1),h={class:"menu-list"},p=(0,e._)("p",{class:"menu-label"},"Security",-1),g={class:"menu-list"},m=(0,e._)("p",{class:"menu-label"},"Support",-1),v={class:"menu-list"},k=(0,e._)("hr",null,null,-1);function _(t,i,a,n,c,d){return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("nav",l,[(0,e._)("div",o,[(0,e._)("a",{role:"button",class:(0,s.C_)(["navbar-burger",{"is-active":!c.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:i[0]||(i[0]=(...t)=>d.menuNav&&d.menuNav(...t))},r,2)])]),(0,e._)("aside",{class:(0,s.C_)(["menu box",{"is-hidden-mobile":c.isActive,fixedMenu:c.isActive}]),style:{"background-color":"white",padding:"20px",height:"100vh"}},[u,(0,e._)("ul",h,[(0,e._)("li",null,[(0,e._)("a",{onClick:i[1]||(i[1]=(...t)=>d.navDoctors&&d.navDoctors(...t))},"Dashboard")]),(0,e._)("li",null,[(0,e._)("a",{onClick:i[2]||(i[2]=(...t)=>d.navProfile&&d.navProfile(...t))},"Profile")])]),p,(0,e._)("ul",g,[(0,e._)("li",null,[(0,e._)("a",{onClick:i[3]||(i[3]=(...t)=>d.navChangePass&&d.navChangePass(...t))},"Registration and Password")])]),m,(0,e._)("ul",v,[(0,e._)("li",null,[(0,e._)("a",{onClick:i[4]||(i[4]=t=>this.$router.push("/contactus"))},"Contact Us")])]),k,(0,e._)("button",{class:"button is-danger",onClick:i[5]||(i[5]=(...t)=>d.logout&&d.logout(...t))},"Logout")],2)],64)}var w=a(594),b={name:"ManagerMenu",data(){return{isActive:!0,managerHospital:""}},async mounted(){await w.Z.get("/session/manager").then((t=>this.managerHospital=t.data.hospital))},methods:{async logout(){await w.Z["delete"]("/session/manager"),await this.$store.commit("managerHospital",null),await this.$router.push("/manager/login")},menuNav(){this.isActive=!this.isActive},navProfile(){this.$router.push(`/manager/${this.managerHospital}/profile`)},navDoctors(){this.$router.push(`/manager/${this.managerHospital}`)},navChangePass(){this.$router.push(`/manager/${this.managerHospital}/security`)}}},D=a(3744);const y=(0,D.Z)(b,[["render",_]]);var f=y},9056:function(t,i,a){a.r(i),a.d(i,{default:function(){return Bt}});var e=a(6252),s=a(3577),l=a(9963);const o=t=>((0,e.dD)("data-v-dd65ba6c"),t=t(),(0,e.Cn)(),t),n=o((()=>(0,e._)("div",{class:"modal-background"},null,-1))),c=o((()=>(0,e._)("div",{class:"modal-content loader"},null,-1))),d=[n,c],r={class:"columns"},u={class:"column is-2"},h={class:"column"},p={class:"section"},g={key:0,class:"notification is-light is-info"},m=o((()=>(0,e._)("b",null,"photo",-1))),v=o((()=>(0,e._)("b",null,"description",-1))),k=o((()=>(0,e._)("b",null,"contacts",-1))),_=o((()=>(0,e._)("b",null,"description",-1))),w=o((()=>(0,e._)("b",null,"contacts",-1))),b=o((()=>(0,e._)("b",null,'"Edit"',-1))),D=o((()=>(0,e._)("div",{class:"block"},null,-1))),y=o((()=>(0,e._)("b",null,"upload a photo",-1))),f={class:"box"},C=o((()=>(0,e._)("h1",{class:"title"},"Display Picture",-1))),z={key:0,class:"image is-16by9"},S=["src"],M={key:1,class:"image is-16by9"},H=["src"],U={id:"formUpload",action:"/api/imgUploadManager",method:"post",enctype:"multipart/form-data",style:{"margin-left":"auto",width:"50%"},class:"form"},L={class:"control"},P=["value"],x=o((()=>(0,e._)("div",{class:"block"},null,-1))),q={key:0,class:"buttons is-centered"},$=o((()=>(0,e._)("button",{type:"submit",value:"Upload",class:"button is-info"},"Upload Photo",-1))),I=o((()=>(0,e._)("br",null,null,-1))),Z={class:"container is-max-desktop"},A={class:"block"},E=o((()=>(0,e._)("h1",{class:"title"},"Description:",-1))),V={key:0,class:"subtitle"},Y={key:1,class:"form"},K={class:"control"},B={class:"block"},N=o((()=>(0,e._)("h1",{class:"title"},"Contacts:",-1))),R={key:0},j={class:"subtitle"},G={key:1},T={class:"subtitle"},W=["onClick"],F=o((()=>(0,e._)("br",null,null,-1))),O={key:2,class:"field has-addons"},X={class:"control"},J={class:"control"},Q=["disabled"],tt={class:"columns"},it={class:"column"},at=o((()=>(0,e._)("h1",{class:"title"},"Latitude N",-1))),et={key:0,class:"subtitle"},st={key:1,class:"field"},lt=o((()=>(0,e._)("h1",{class:"title"},"Longitude E",-1))),ot={key:2,class:"subtitle"},nt={key:3,class:"field"},ct=o((()=>(0,e._)("p",{class:"subtitle is-6 has-text-info"},[(0,e.Uk)("To get accurate geological coordinates, please refer to "),(0,e._)("a",{href:"https://www.google.com/maps",class:"has-text-weight-bold"},"Google Maps"),(0,e.Uk)(".")],-1))),dt={class:"column"},rt=["src"],ut=o((()=>(0,e._)("br",null,null,-1))),ht=o((()=>(0,e._)("h1",{class:"title"},"Specializations offered",-1))),pt={key:4,class:"columns is-multiline"},gt={class:"column",id:"selectedSpecializations"},mt={key:5,class:"columns"},vt={class:"column"},kt=o((()=>(0,e._)("label",{class:"label"},"Selected Specializations",-1))),_t={class:"columns is-multiline"},wt={class:"column",id:"selectedSpecializations"},bt=["onClick"],Dt={class:"column"},yt=o((()=>(0,e._)("label",{class:"label"},"Select Specializations",-1))),ft={class:"panel"},Ct={class:"panel-block"},zt={style:{"max-height":"20em",overflow:"auto"}},St=["value"],Mt=["onClick"],Ht={key:6,class:"control"},Ut={class:"radio"},Lt={key:0,class:"help"},Pt=o((()=>(0,e._)("b",null,"photo",-1))),xt=o((()=>(0,e._)("b",null,'"Cancel Editing"',-1))),qt=o((()=>(0,e._)("br",null,null,-1))),$t=["disabled"];function It(t,i,a,o,n,c){const It=(0,e.up)("ManagerMenuVue"),Zt=(0,e.up)("CatchError");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",{class:(0,s.C_)(["modal",{"is-active":n.loading}])},d,2),(0,e._)("div",r,[(0,e._)("div",u,[(0,e.Wm)(It)]),(0,e._)("div",h,[(0,e._)("section",p,[(0,e.Wm)(Zt,{"err-msg":n.errMsg},null,8,["err-msg"]),"Inactive"==n.hospitalStatus?((0,e.wg)(),(0,e.iD)("div",g,[(0,e.Uk)("To get started, upload a "),m,(0,e.Uk)(" of your hospital and fill in the details of your "),v,(0,e.Uk)(" and "),k,(0,e.Uk)(". Activation of the account is only available when you have filled up the "),_,(0,e.Uk)(" and "),w,(0,e.Uk)(". Get started by clicking "),b,(0,e.Uk)(". "),D,(0,e.Uk)(" Make sure you "),y,(0,e.Uk)(" of your hospital before activating the account. ")])):(0,e.kq)("",!0),(0,e._)("div",f,[C,"Inactive"===n.hospitalStatus||n.imgPreview?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("figure",z,[(0,e._)("img",{src:`https://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/managers/${n.managerHospital}.jpg`},null,8,S)])),n.imgPreview?((0,e.wg)(),(0,e.iD)("figure",M,[(0,e._)("img",{src:n.imgPreview},null,8,H)])):(0,e.kq)("",!0),(0,e._)("form",U,[(0,e._)("div",L,[(0,e._)("input",{type:"hidden",name:"hospital",value:n.managerHospital},null,8,P),(0,e._)("input",{class:"input",type:"file",name:"imgFile",onChange:i[0]||(i[0]=t=>c.fileHandlerInput(t)),required:""},null,32),x,n.imgPreview?((0,e.wg)(),(0,e.iD)("div",q,[(0,e._)("button",{class:"button",type:"button",onClick:i[1]||(i[1]=t=>n.imgPreview="")},"Cancel Upload"),$])):(0,e.kq)("",!0)])]),I,n.editingMode?((0,e.wg)(),(0,e.iD)("a",{key:3,class:"has-text-danger",onClick:i[3]||(i[3]=(...t)=>c.editModeCancel&&c.editModeCancel(...t))},"[Cancel Editing]")):((0,e.wg)(),(0,e.iD)("a",{key:2,class:"has-text-info",onClick:i[2]||(i[2]=(...t)=>c.editMode&&c.editMode(...t))},"[Edit]")),(0,e._)("div",Z,[(0,e._)("div",A,[E,n.editingMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("p",V,(0,s.zw)(n.description),1)),n.editingMode?((0,e.wg)(),(0,e.iD)("form",Y,[(0,e._)("div",K,[(0,e.wy)((0,e._)("textarea",{class:"textarea","onUpdate:modelValue":i[4]||(i[4]=t=>n.editDescription=t),placeholder:"Edit description..."},null,512),[[l.nr,n.editDescription]])])])):(0,e.kq)("",!0)]),(0,e._)("div",B,[N,n.editingMode?((0,e.wg)(),(0,e.iD)("ul",G,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.editContacts,((t,i)=>((0,e.wg)(),(0,e.iD)("li",{key:i},[(0,e._)("p",T,[(0,e.Uk)((0,s.zw)(t.contact)+" ",1),n.editingMode?((0,e.wg)(),(0,e.iD)("a",{key:0,class:"has-text-danger",onClick:i=>c.removeContact(t.contact)},"Remove",8,W)):(0,e.kq)("",!0)])])))),128))])):((0,e.wg)(),(0,e.iD)("ul",R,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.contacts,((t,i)=>((0,e.wg)(),(0,e.iD)("li",{key:i},[(0,e._)("p",j,(0,s.zw)(t.contact),1)])))),128))])),F,n.editingMode?((0,e.wg)(),(0,e.iD)("div",O,[(0,e._)("div",X,[(0,e.wy)((0,e._)("input",{class:"input",type:"number","onUpdate:modelValue":i[5]||(i[5]=t=>n.contact=t),placeholder:"Add contacts..."},null,512),[[l.nr,n.contact]])]),(0,e._)("div",J,[(0,e._)("button",{type:"submit",class:"button is-light",onClick:i[6]||(i[6]=(...t)=>c.addContact&&c.addContact(...t)),disabled:""==n.contact},"+",8,Q)])])):(0,e.kq)("",!0)]),(0,e._)("div",tt,[(0,e._)("div",it,[at,n.editingMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("p",et,(0,s.zw)(n.latitude),1)),n.editingMode?((0,e.wg)(),(0,e.iD)("div",st,[(0,e.wy)((0,e._)("input",{class:"input",type:"text","onUpdate:modelValue":i[7]||(i[7]=t=>n.editLatitude=t)},null,512),[[l.nr,n.editLatitude]])])):(0,e.kq)("",!0),lt,n.editingMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("p",ot,(0,s.zw)(n.longitude),1)),n.editingMode?((0,e.wg)(),(0,e.iD)("div",nt,[(0,e.wy)((0,e._)("input",{class:"input",type:"text","onUpdate:modelValue":i[8]||(i[8]=t=>n.editLongitude=t)},null,512),[[l.nr,n.editLongitude]])])):(0,e.kq)("",!0),ct]),(0,e._)("div",dt,[""!==n.hospitalData?((0,e.wg)(),(0,e.iD)("iframe",{key:0,width:"500",height:"500",src:`https://maps.google.com/maps?q=${n.hospitalData.location.coordinates[1]},${n.hospitalData.location.coordinates[0]}&hl=es;z=14&output=embed`},null,8,rt)):(0,e.kq)("",!0)])])]),ut,ht,n.editingMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",pt,[(0,e._)("div",gt,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.hospitalSpecializations,((t,i)=>((0,e.wg)(),(0,e.iD)("button",{key:i,class:"button",style:{margin:"5px"}},(0,s.zw)(t.specialist),1)))),128))])])),n.editingMode?((0,e.wg)(),(0,e.iD)("div",mt,[(0,e._)("div",vt,[kt,(0,e._)("div",_t,[(0,e._)("div",wt,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.editHospitalSpecializations,((t,i)=>((0,e.wg)(),(0,e.iD)("button",{key:i,class:"button is-light",style:{margin:"5px"}},[(0,e.Uk)((0,s.zw)(t.specialist)+"Â  ",1),(0,e._)("span",{class:"has-text-danger",onClick:i=>c.undoSpecialization(t.specialist)},"X",8,bt)])))),128))])])]),(0,e._)("div",Dt,[yt,(0,e._)("nav",ft,[(0,e._)("div",Ct,[(0,e.wy)((0,e._)("input",{class:"input",type:"text","onUpdate:modelValue":i[9]||(i[9]=t=>n.searchBar=t),placeholder:"Search"},null,512),[[l.nr,n.searchBar]])]),(0,e._)("div",zt,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(c.specializationListIndexed,((t,i)=>((0,e.wg)(),(0,e.iD)("div",{class:"panel-block",key:i,value:t},[(0,e._)("a",{onClick:i=>c.selectSpecialization(t)},(0,s.zw)(t),9,Mt)],8,St)))),128))])])])])):(0,e.kq)("",!0),"Inactive"==n.hospitalStatus&&n.editingMode?((0,e.wg)(),(0,e.iD)("div",Ht,[(0,e._)("label",Ut,[(0,e._)("input",{type:"radio",onClick:i[10]||(i[10]=(...t)=>c.activateAccount&&c.activateAccount(...t))}),(0,e.Uk)(" Activate this account. ")]),n.activate?((0,e.wg)(),(0,e.iD)("p",Lt,[(0,e.Uk)("Please make sure you have uploaded a "),Pt,(0,e.Uk)(" of the hospital before activating it. To cancel this, just click "),xt,(0,e.Uk)(".")])):(0,e.kq)("",!0)])):(0,e.kq)("",!0),qt,n.editingMode?((0,e.wg)(),(0,e.iD)("button",{key:7,class:"button is-danger",onClick:i[11]||(i[11]=(...t)=>c.saveProfileEdit&&c.saveProfileEdit(...t)),disabled:""==n.editDescription||0==n.editContacts.length||""==n.editLatitude||""==n.editLongitude},(0,s.zw)("Inactive"===n.hospitalStatus&&n.activate?"Save changes and activate this account":"Save changes"),9,$t)):(0,e.kq)("",!0)])])])])],64)}var Zt=a(594),At=a(7787),Et=a(3238),Vt={name:"ManagerProfile",components:{ManagerMenuVue:Et.Z,CatchError:At.Z},async mounted(){this.loading=!0,await Zt.Z.get("/session/manager").then((t=>this.managerHospital=t.data.hospital)),await Zt.Z.get("/session/manager").then((t=>this.managerHospitalID=t.data._id)),await Zt.Z.post(`/api/manager/${this.managerHospitalID}`).then((t=>this.hospitalData=t.data)),this.hospitalStatus=await this.hospitalData.status,this.latitude=await this.hospitalData.location.coordinates[1],this.longitude=await this.hospitalData.location.coordinates[0],this.hospitalSpecializations=await this.hospitalData.specializations,"Inactive"!==this.hospitalStatus&&(this.description=await this.hospitalData.details[0].description,this.contacts=await this.hospitalData.details[0].contacts,this.latitude=await this.hospitalData.location.coordinates[1],this.longitude=await this.hospitalData.location.coordinates[0],this.hospitalSpecializations=await this.hospitalData.specializations),this.loading=!1},computed:{specializationListIndexed(){return this.specializationList.filter((t=>t.toLowerCase().includes(this.searchBar.toLowerCase())))}},data(){return{errMsg:"",searchBar:"",specializationList:this.$store.getters.getSpecializationList,loading:!1,hospitalStatus:"",activate:!1,managerHospital:"",managerHospitalID:"",editingMode:!1,editDescription:"",editContacts:[],editLatitude:"",editLongitude:"",hospitalSpecializations:[],editHospitalSpecializations:[],latitude:"",longitude:"",description:"",contact:"",contacts:[],hospitalData:"",details:[],coordinates:[],imgPreview:"",fileHandler:""}},methods:{fileHandlerInput(t){this.fileHandler=t.target.files[0],this.imgPreview=URL.createObjectURL(this.fileHandler),this.$store.commit("imgSuccessManager",!0)},editMode(){this.editingMode=!0,this.editDescription=this.description,this.editContacts=[...this.contacts],this.editLatitude=this.latitude,this.editLongitude=this.longitude,this.editHospitalSpecializations=[...this.hospitalSpecializations]},editModeCancel(){this.editingMode=!1,this.editDescription="",this.editContacts=[],this.editLatitude="",this.editLongitude="",this.editHospitalSpecializations=[],"Inactive"==this.hospitalStatus&&(this.activate=!1)},addContact(){this.editContacts.push({contact:this.contact}),this.contact=""},removeContact(t){this.editContacts=this.editContacts.filter((i=>i.contact!==t))},activateAccount(){this.activate=!0},selectSpecialization(t){this.editHospitalSpecializations.find((i=>i.specialist===t))||this.editHospitalSpecializations.push({specialist:t})},undoSpecialization(t){this.editHospitalSpecializations=this.editHospitalSpecializations.filter((i=>i.specialist!==t))},async saveProfileEdit(){""!==this.editDescription&&0!==this.editContacts.length&&""!==this.editLongitude&&""!==this.editLongitude&&this.editHospitalSpecializations&&(this.details.push({description:this.editDescription,contacts:this.editContacts}),this.coordinates.push(this.editLongitude,this.editLatitude),this.activate?await Zt.Z.put(`/api/manager/${this.managerHospitalID}`,{details:this.details,specializations:this.editHospitalSpecializations,location:{type:"Point",coordinates:this.coordinates},status:"Active"}).catch((t=>this.errMsg=t)):await Zt.Z.put(`/api/manager/${this.managerHospitalID}`,{details:this.details,specializations:this.editHospitalSpecializations,location:{type:"Point",coordinates:this.coordinates}}).catch((t=>this.errMsg=t)),await Zt.Z.get("/api/manager").then((t=>this.hospitalData=t.data.find((t=>t._id==this.managerHospitalID)))),this.description=await this.hospitalData.details[0].description,this.contacts=await this.hospitalData.details[0].contacts,this.hospitalStatus=await this.hospitalData.status,this.latitude=await this.hospitalData.location.coordinates[1],this.longitude=await this.hospitalData.location.coordinates[0],this.hospitalSpecializations=await this.hospitalData.specializations,this.editingMode=!1,this.editDescription="",this.editContacts=[],this.editLongitude="",this.editLatitude="",this.editHospitalSpecializations=[],this.details=[],this.coordinates=[],this.activate=!1)}}},Yt=a(3744);const Kt=(0,Yt.Z)(Vt,[["render",It],["__scopeId","data-v-dd65ba6c"]]);var Bt=Kt}}]);
//# sourceMappingURL=56.dfbe69e7.js.map