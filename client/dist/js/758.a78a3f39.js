"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[758],{7787:function(e,t,a){a.d(t,{Z:function(){return r}});var l=a(6252),s=a(2262),i=a(3577);const n={key:0,class:"notification is-danger"};var o={__name:"CatchError",props:{errMsg:null},setup(e){const t=e,a=(0,l.Fl)((()=>t.errMsg));return(e,t)=>{const o=(0,l.up)("router-link");return(0,s.SU)(a)?((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Uk)("Sorry, something went wrong. "+(0,i.zw)((0,s.SU)(a).message)+", please try again later or ",1),(0,l.Wm)(o,{to:"/contactus"},{default:(0,l.w5)((()=>[(0,l.Uk)("contact us")])),_:1}),(0,l.Uk)(". ")])):(0,l.kq)("",!0)}}};const c=o;var r=c},8618:function(e,t,a){a.d(t,{Z:function(){return H}});var l=a(6252),s=a(3577);const i=e=>((0,l.dD)("data-v-1bc7b8b5"),e=e(),(0,l.Cn)(),e),n={class:"navbar is-hidden-desktop"},o={class:"navbar-brand"},c={class:"navbar-item"},r={class:"label"},u=i((()=>(0,l._)("span",{"aria-hidden":"true"},null,-1))),d=i((()=>(0,l._)("span",{"aria-hidden":"true"},null,-1))),p=i((()=>(0,l._)("span",{"aria-hidden":"true"},null,-1))),m=[u,d,p],h={class:"has-text-centered block",style:{padding:"5px"}},v={class:"is-hidden-mobile is-hidden-touch image image-outer is-square",style:{margin:"auto"}},_=["src"],b={key:0,class:"title is-6"},w={class:"menu-list block"},y=i((()=>(0,l._)("p",{class:"menu-label"},"General",-1))),g=i((()=>(0,l._)("p",{class:"menu-label"},"Verification and Information",-1))),f=i((()=>(0,l._)("p",{class:"menu-label"},"Support",-1))),k={class:"block has-text-centered"};function D(e,t,a,i,u,d){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("nav",n,[(0,l._)("div",o,[(0,l._)("a",c,[(0,l._)("label",r,"Dr. "+(0,s.zw)(e.$store.state.doctorName),1)]),(0,l._)("a",{role:"button",class:(0,s.C_)(["navbar-burger",{"is-active":!u.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:t[0]||(t[0]=(...e)=>d.menuNav&&d.menuNav(...e))},m,2)])]),(0,l._)("aside",{class:(0,s.C_)(["menu box",{"is-hidden-mobile":u.isActive,fixedMenu:u.isActive}]),style:{"background-color":"#D8E5FF",padding:"20px"}},[(0,l._)("div",h,[(0,l._)("figure",v,[(0,l._)("img",{class:"is-rounded image-inner",src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${u.alias}.jpg`},null,8,_)]),u.isActive?((0,l.wg)(),(0,l.iD)("h5",b,"Dr. "+(0,s.zw)(e.$store.state.doctorName),1)):(0,l.kq)("",!0)]),(0,l._)("ul",w,[y,(0,l._)("li",null,[(0,l._)("a",{onClick:t[1]||(t[1]=(...e)=>d.routeHome&&d.routeHome(...e))},"Appointments")]),(0,l._)("li",null,[(0,l._)("a",{onClick:t[2]||(t[2]=(...e)=>d.openPatientHistory&&d.openPatientHistory(...e))},"Appointment History")]),(0,l._)("li",null,[(0,l._)("a",{onClick:t[3]||(t[3]=(...e)=>d.openPatientAppointmentsCancelled&&d.openPatientAppointmentsCancelled(...e))},"Cancelled Appointments")]),(0,l._)("li",null,[(0,l._)("a",{onClick:t[4]||(t[4]=(...e)=>d.openSchedule&&d.openSchedule(...e))},"Schedule")]),g,(0,l._)("li",null,[(0,l._)("a",{onClick:t[5]||(t[5]=(...e)=>d.openProfile&&d.openProfile(...e))},"Profile")]),(0,l._)("li",null,[(0,l._)("a",{onClick:t[6]||(t[6]=(...e)=>d.openSecurity&&d.openSecurity(...e))},"Security")]),(0,l._)("li",null,[(0,l._)("a",{onClick:t[7]||(t[7]=(...e)=>d.openPayment&&d.openPayment(...e))},"Payment")]),f,(0,l._)("li",null,[(0,l._)("a",{onClick:t[8]||(t[8]=e=>this.$router.push("/contactus"))},"Contact Us")])]),(0,l._)("div",k,[(0,l._)("button",{onClick:t[9]||(t[9]=(...e)=>d.logout&&d.logout(...e)),class:"button is-link is-rounded",type:"button"},"Logout")])],2)],64)}var C=a(4239),x=a(8945),N={name:"AdminMenu",data(){return{alias:C.Z.state.alias,isActive:!0}},methods:{async logout(){C.Z.commit("alias",null),await x.Z["delete"]("/session/doctor"),await this.$router.push("/account/login")},async routeHome(){await this.$router.push(`/doctor/${this.alias}/appointments`)},async openProfile(){await this.$router.push(`/doctor/${this.alias}/profile`)},async openPatientHistory(){await this.$router.push(`/doctor/${this.alias}/appointments/history`)},async openPatientAppointmentsCancelled(){await this.$router.push(`/doctor/${this.alias}/appointments/cancelled`)},async openSecurity(){await this.$router.push(`/doctor/${this.alias}/security`)},async openSchedule(){await this.$router.push(`/doctor/${this.alias}/schedule`)},async openPayment(){await this.$router.push(`/doctor/${this.alias}/payment`)},menuNav(){this.isActive=!this.isActive}}},S=a(3744);const $=(0,S.Z)(N,[["render",D],["__scopeId","data-v-1bc7b8b5"]]);var H=$},3758:function(e,t,a){a.r(t),a.d(t,{default:function(){return he}});var l=a(6252),s=a(9963),i=a(2262),n=a(3577),o=a(8945),c=a(3907),r=a(7739),u=a.n(r),d=a(8618),p=a(4058),m=a(7787);const h=e=>((0,l.dD)("data-v-9d3c2e7a"),e=e(),(0,l.Cn)(),e),v={class:"main-doctor"},_={class:"columns"},b={class:"column is-2"},w={class:"column"},y={class:"section"},g=h((()=>(0,l._)("h1",{class:"title"},"APPOINTMENTS",-1))),f={key:0,class:"field"},k={class:"control"},D={key:1,class:"container is-widescreen is-fullhd"},C={key:0,class:"subtitle"},x=h((()=>(0,l._)("b",null,"TODAY",-1))),N=[x],S={class:"subtitle has-text-black"},$={class:"table-container"},H={class:"table is-fullwidth"},Z=h((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"has-text-black-ter"},"Controls"),(0,l._)("th",{class:"has-text-black-ter"},"Reference ID"),(0,l._)("th",{class:"has-text-black-ter"},"Priority No."),(0,l._)("th",{class:"has-text-black-ter"},"Hospital Appointed"),(0,l._)("th",{class:"has-text-black-ter"},"First Name"),(0,l._)("th",{class:"has-text-black-ter"},"Last Name"),(0,l._)("th",{class:"has-text-black-ter"},"Contact Number"),(0,l._)("th",{class:"has-text-black-ter"},"Birthday"),(0,l._)("th",{class:"has-text-black-ter"},"Symptoms/Comments")])],-1))),P=["onClick"],A=["onClick"],I=h((()=>(0,l._)("br",null,null,-1))),L=h((()=>(0,l._)("div",{class:"modal-background"},null,-1))),U={class:"modal-content animate__animated animate__fadeInLeft"},M={class:"field customField has-text-centered"},z=h((()=>(0,l._)("h1",{class:"title is-4"},"Confirm Patient Details",-1))),T=h((()=>(0,l._)("label",{class:"label"},"First Name",-1))),V={class:"control"},F=h((()=>(0,l._)("label",{class:"label"},"Last Name",-1))),q={class:"control"},Y=h((()=>(0,l._)("label",{class:"label"},"Contact Number",-1))),j={class:"control"},E=h((()=>(0,l._)("label",{class:"label"},"Birthday",-1))),O={class:"control"},W={class:"field"},B=h((()=>(0,l._)("label",{class:"label"},"Upload a prescription(optional)",-1))),K={class:"control"},R=h((()=>(0,l._)("button",{class:"is-hidden",type:"submit",value:"submit"},"Submit",-1))),G=h((()=>(0,l._)("div",{class:"modal-background"},null,-1))),J=h((()=>(0,l._)("p",{class:"subtitle is-4 has-text-centered"},"Do you wish to cancel the appointment? ",-1))),Q=h((()=>(0,l._)("p",{class:"subtitle is-6 has-text-centered"},"The user will be notified of the cancellation via email and notifications if you wish to proceed.",-1))),X=h((()=>(0,l._)("p",{class:"help"},"NOTE: This action cannot be undone.",-1))),ee={class:"has-text-black-ter"},te={class:"has-text-black-ter"},ae={class:"has-text-black-ter"},le={class:"has-text-black-ter"},se={class:"has-text-black-ter"},ie={class:"has-text-black-ter"},ne={class:"has-text-black-ter"},oe={class:"has-text-black-ter",style:{"white-space":"pre-wrap"}},ce={key:2,class:"section"},re=h((()=>(0,l._)("div",{class:"notification is-info"},[(0,l._)("h1",{class:"title is-5"},"No upcoming appointments.")],-1))),ue=[re];var de={__name:"Doctor",setup(e){const t=(0,c.oR)(),a=(0,i.iH)(""),r=(0,i.iH)(!1),h=(0,i.iH)(!1),x=(0,i.iH)(null),re=(0,i.iH)(null),de=(0,i.iH)(null),pe=(0,i.iH)(null),me=(0,i.iH)(null),he=(0,i.iH)(null),ve=(0,i.iH)(null),_e=(0,i.iH)(null),be=(0,i.iH)(""),we=(0,i.iH)([]),ye=(0,i.iH)(null),ge=(0,i.iH)(!1),fe=(0,l.Fl)((()=>!!we.value&&u()(we.value.filter((e=>e.firstName.toLowerCase().includes(be.value.toLowerCase())||e.lastName.toLowerCase().includes(be.value.toLowerCase())||e.referenceID.toLowerCase().includes(be.value.toLowerCase()))).sort(((e,t)=>new Date(e.schedule[0].date).getTime()-new Date(t.schedule[0].date).getTime())),"schedule[0].date")));async function ke(){ge.value=!0,$e();let e="Appointment visitation confirmed",l=`Your appointment visitation has been confirmed by your doctor Ms/Mr. ${_e.value}, reference ID: ${de.value}, a digital prescription will be displayed below if your doctor has uploaded one. We hope you well!`;if(p.Z.emit("message",ye.value?re.value:null,e,l,"Medic Search",new Date),ye.value){const e=new FormData;e.append("id",re.value),e.append("imgFile",ye.value),await o.Z.post("/api/imgUploadVisitation",e,{headers:{"Content-Type":"multipart/form-data"}}).catch((e=>a.value=e))}try{await o.Z.put(`/api/appointmentList/${x.value}`,{firstName:pe.value,lastName:me.value,contactNum:ve.value,birthDay:he.value,ifPatientVisited:!0}),await o.Z.put(`/api/doctor/${t.state.doctorID}`,{visits:we.value.filter((e=>1==e.ifPatientVisited)).length+1}),await o.Z.post("/api/appointmentList/doctors",{id:t.state.doctorID,ongoing:!0}).then((e=>we.value=e.data)).catch((e=>a.value=e))}catch(s){a.value=s}ge.value=!1,r.value=!1}async function De(){let e="Your appointment has been cancelled!",l=`Your appointment visitation has been cancelled by your doctor Ms/Mr. ${_e.value}, reference ID: ${de.value}, this is due to some emergencies or problems in their side. We hope you understand.`;p.Z.emit("message",null,e,l,"Medic Search",new Date),await o.Z.put(`/api/appointmentList/${x.value}`,{ifPatientCancelled:!0}).catch((e=>a.value=e)),await o.Z.post("/api/appointmentList/doctors",{id:t.state.doctorID,ongoing:!0}).then((e=>we.value=e.data)),h.value=!1}async function Ce(e,t,a,l,s,i,n,o){r.value=!0,de.value=e,_e.value=t,pe.value=l,me.value=s,ve.value=i,he.value=n,x.value=o,p.Z.connect(),p.Z.emit("join room",a)}function xe(){r.value=!1,p.Z.disconnect()}async function Ne(e){h.value=!0,de.value=e.referenceID,_e.value=e.doctorName,x.value=e._id,p.Z.connect(),p.Z.emit("join room",e.patientID)}function Se(){h.value=!1,p.Z.disconnect()}(0,l.bv)((async()=>{await o.Z.post("/api/appointmentList/doctors",{id:t.state.doctorID,ongoing:!0}).then((e=>we.value=e.data)).catch((e=>a.value=e))}));class $e{constructor(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length;for(let l=0;l<12;l++)e+=t.charAt(Math.floor(Math.random()*a));re.value=e}}class He{constructor(e){ye.value=e.target.files[0]}}return(e,t)=>((0,l.wg)(),(0,l.iD)("div",v,[(0,l._)("div",_,[(0,l._)("div",b,[(0,l.Wm)(d.Z)]),(0,l._)("div",w,[(0,l._)("section",y,[(0,l.Wm)(m.Z,{"err-msg":a.value},null,8,["err-msg"]),g,0!==we.value.length?((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("div",k,[(0,l.wy)((0,l._)("input",{class:"input",type:"text",style:{width:"50% !important"},"onUpdate:modelValue":t[0]||(t[0]=e=>be.value=e),placeholder:"Search..."},null,512),[[s.nr,be.value]])])])):(0,l.kq)("",!0),0!==Object.keys((0,i.SU)(fe)).length?((0,l.wg)(),(0,l.iD)("div",D,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,i.SU)(fe),((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"box",key:a,style:(0,n.j5)(new Date(a).toDateString()==(new Date).toDateString()?"box-shadow: rgb(10 10 10 / 10%) 0px 0.5em 1em -0.125em, #485fc7 0px 0px 0px 1px !important;":"")},[new Date(a).toDateString()==(new Date).toDateString()?((0,l.wg)(),(0,l.iD)("h1",C,N)):(0,l.kq)("",!0),(0,l._)("h1",S,"Schedule: "+(0,n.zw)(new Date(a).toDateString()),1),(0,l._)("div",$,[(0,l._)("table",H,[Z,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e._id},[new Date(a).getTime()==new Date((new Date).toDateString()).getTime()?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"button has-text-success",type:"button",onClick:t=>Ce(e.referenceID,e.doctorName,e.patientID,e.firstName,e.lastName,e.contactNum,e.birthDay,e._id)},"Confirm Visitation",8,P)):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"button has-text-danger",type:"button",onClick:t=>Ne(e)},"Cancel Visitation",8,A)),I,(0,l._)("div",{class:(0,n.C_)(["modal",{"is-active":r.value}])},[L,(0,l._)("div",U,[(0,l._)("div",M,[z,T,(0,l._)("div",V,[(0,l.wy)((0,l._)("input",{class:"input",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>pe.value=e),placeholder:"First Name",required:""},null,512),[[s.nr,pe.value]])]),F,(0,l._)("div",q,[(0,l.wy)((0,l._)("input",{class:"input",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>me.value=e),placeholder:"Last Name",required:""},null,512),[[s.nr,me.value]])]),Y,(0,l._)("div",j,[(0,l.wy)((0,l._)("input",{class:"input",type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>ve.value=e),placeholder:"Contact Number",required:""},null,512),[[s.nr,ve.value]])]),E,(0,l._)("div",O,[(0,l.wy)((0,l._)("input",{class:"input",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>he.value=e),placeholder:"Birthday",required:""},null,512),[[s.nr,he.value]])]),(0,l._)("div",W,[B,(0,l._)("div",K,[(0,l._)("input",{onChange:t[5]||(t[5]=e=>He(e)),class:"input",type:"file"},null,32)]),R]),(0,l._)("button",{class:(0,n.C_)(["button is-info",{"is-loading":ge.value}]),onClick:t[6]||(t[6]=e=>ke())},"Submit",2)])]),(0,l._)("button",{class:"modal-close is-large","aria-label":"close",onClick:xe})],2),(0,l._)("div",{class:(0,n.C_)(["modal",{"is-active":h.value}])},[G,(0,l._)("div",{class:"modal-content animate__animated animate__fadeInLeft"},[J,Q,(0,l._)("div",{class:"buttons is-centered"},[(0,l._)("button",{class:"button has-text-success",onClick:De},"YES"),(0,l._)("button",{class:"button has-text-danger",onClick:Se},"NO")]),X]),(0,l._)("button",{class:"modal-close is-large","aria-label":"close",onClick:Se})],2),(0,l._)("th",ee,(0,n.zw)(e.referenceID),1),(0,l._)("th",te,(0,n.zw)(e.priorityNum),1),(0,l._)("th",ae,(0,n.zw)(e.hospital),1),(0,l._)("td",le,(0,n.zw)(e.firstName),1),(0,l._)("td",se,(0,n.zw)(e.lastName),1),(0,l._)("td",ie,(0,n.zw)(e.contactNum),1),(0,l._)("td",ne,(0,n.zw)(e.birthDay),1),(0,l._)("td",oe,(0,n.zw)(e.comments),1)])))),128))])])])],4)))),128))])):((0,l.wg)(),(0,l.iD)("section",ce,ue))])])])]))}},pe=a(3744);const me=(0,pe.Z)(de,[["__scopeId","data-v-9d3c2e7a"]]);var he=me}}]);
//# sourceMappingURL=758.a78a3f39.js.map