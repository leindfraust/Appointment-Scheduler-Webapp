"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[687,885],{9885:function(e,a,s){s.r(a),s.d(a,{default:function(){return J}});var t=s(6252),l=s(2262),i=s(3577),o=s(9963),n=s(9669),r=s.n(n);const u=e=>((0,t.dD)("data-v-c2f9401e"),e=e(),(0,t.Cn)(),e),c=u((()=>(0,t._)("div",{class:"modal-background"},null,-1))),d={class:"modal-content has-text-left",style:{width:"40%",margin:"auto"}},v={key:0,class:"section box"},p=u((()=>(0,t._)("p",{class:"title is-4 has-text-danger"},"Forgot Password",-1))),m={key:0,class:"notification is-danger"},h={key:1,class:"notification is-warning"},w={key:2,class:"container"},g={class:"field"},_={class:"control"},f=u((()=>(0,t._)("label",{class:"label"},"Enter Username",-1))),y={class:"field"},D={class:"control"},b=u((()=>(0,t._)("label",{class:"label"},"Enter Email",-1))),U={class:"field"},k={class:"control"},S=["disabled"],P={key:3,class:"notification is-danger"},H={key:1,class:"section box"},C={key:0,class:"container"},q={class:"field"},x={class:"control"},T=u((()=>(0,t._)("label",{class:"label"},"Enter code",-1))),I={key:1,class:"container"},M={key:0,class:"notification is-danger"},V={key:1,class:"container"},O={class:"field"},Z={class:"control"},N=u((()=>(0,t._)("label",{class:"label"},"New Password:",-1))),F={class:"field"},$={class:"control"},z=u((()=>(0,t._)("label",{class:"label"},"Confirm Password:",-1))),E={class:"field"},L={class:"control"},Y=["disabled"],K={key:2,class:"container"},B=u((()=>(0,t._)("div",{class:"notification is-success"},"Your password has been successfully changed.",-1))),W=[B];var j={__name:"ForgotPassword",props:{userType:String,username:String,email:String},setup(e){const a=e;let s=(0,l.iH)(!1),n=(0,l.iH)(""),u=(0,l.iH)(!1),B=(0,l.iH)(!1),j=(0,l.iH)(""),A=(0,l.iH)(!1),G=(0,l.iH)(!1),J=(0,l.iH)(""),Q=(0,l.iH)(""),R=(0,l.iH)(!1),X=(0,l.iH)(!1),ee=(0,l.iH)(!1),ae=(0,l.iH)(""),se=(0,l.iH)(a.username),te=(0,l.iH)(a.email);async function le(){if(null!=se.value||null!=te.value){let t;if(s.value=!0,await r().post("/api/code/email",{email:te.value}).then((e=>t=e.data)),t)B.value=!0;else if(B.value=!1,"patient"==a.userType)if(await r().post("/api/user/verify_username",{username:se.value,email:te.value}).then((e=>ae.value=e.data)),ae.value){ee.value=!1;try{await r().post("/api/OTPMail",{email:te.value}).then(A.value=!0),A.value=!0}catch(e){n.value=e}}else ee.value=!0;else if("doctor"==a.userType)if(await r().post("/api/doctor/verify_username",{username:se.value,email:te.value}).then((e=>ae.value=e.data)),ae.value){ee.value=!1;try{await r().post("/api/OTPMail",{email:te.value}).then(A.value=!0),A.value=!0}catch(e){n.value=e}}else ee.value=!0;else if("manager"==a.userType)if(await r().post("/api/manager/verify_username",{username:se.value,email:te.value}).then((e=>ae.value=e.data)),ae.value){ee.value=!1;try{await r().post("/api/OTPMail",{email:te.value}).then(A.value=!0),A.value=!0}catch(e){n.value=e}}else ee.value=!0;s.value=!1}}async function ie(){let e;G.value=!1,await r().post("/api/code/verify",{code:j.value}).then((a=>e=a.data)),e&&(G.value=!0)}async function oe(){if(J.value===Q.value){if("patient"==a.userType)try{await r().put("/api/fupdatePassword/patient",{patientID:ae.value._id,password:J.value}),ae.value="",X.value=!0}catch(e){X.value=!1,n.value=e,ae.value=""}else if("doctor"==a.userType)try{await r().put("/api/fupdatePassword/doctor",{doctorID:ae.value._id,password:J.value}),ae.value="",X.value=!0}catch(e){X.value=!1,n.value=e,ae.value=""}else if("manager"==a.userType)try{await r().put("/api/fupdatePassword/manager",{managerID:ae.value._id,password:J.value}),ae.value="",X.value=!0}catch(e){X.value=!1,n.value=e,ae.value=""}}else R.value=!0}return(e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("a",{class:"subtitle has-text-danger",onClick:a[0]||(a[0]=e=>(0,l.dq)(u)?u.value=!(0,l.SU)(u):u=!(0,l.SU)(u))},"Forgot Password"),(0,t._)("div",{class:(0,i.C_)(["modal",{"is-active":(0,l.SU)(u)}])},[c,(0,t._)("div",d,[(0,l.SU)(A)?((0,t.wg)(),(0,t.iD)("section",H,[(0,l.SU)(G)?((0,t.wg)(),(0,t.iD)("div",I,[(0,l.SU)(R)?((0,t.wg)(),(0,t.iD)("div",M,"Passwords not match.")):(0,t.kq)("",!0),(0,l.SU)(X)?((0,t.wg)(),(0,t.iD)("div",K,W)):((0,t.wg)(),(0,t.iD)("div",V,[(0,t._)("div",O,[(0,t._)("div",Z,[N,(0,t.wy)((0,t._)("input",{class:"input",type:"password","onUpdate:modelValue":a[4]||(a[4]=e=>(0,l.dq)(J)?J.value=e:J=e)},null,512),[[o.nr,(0,l.SU)(J)]])])]),(0,t._)("div",F,[(0,t._)("div",$,[z,(0,t.wy)((0,t._)("input",{class:"input",type:"password","onUpdate:modelValue":a[5]||(a[5]=e=>(0,l.dq)(Q)?Q.value=e:Q=e)},null,512),[[o.nr,(0,l.SU)(Q)]])])]),(0,t._)("div",E,[(0,t._)("div",L,[(0,t._)("button",{class:"button",onClick:oe,disabled:""==(0,l.SU)(J)&&""==(0,l.SU)(Q)},"Confirm",8,Y)])])]))])):((0,t.wg)(),(0,t.iD)("div",C,[(0,t._)("div",q,[(0,t._)("div",x,[T,(0,t.wy)((0,t._)("input",{class:"input",type:"number","onUpdate:modelValue":a[3]||(a[3]=e=>(0,l.dq)(j)?j.value=e:j=e)},null,512),[[o.nr,(0,l.SU)(j)]])])]),(0,t._)("div",{class:"field"},[(0,t._)("div",{class:"control"},[(0,t._)("button",{class:"button",onClick:ie},"Verify")])])]))])):((0,t.wg)(),(0,t.iD)("section",v,[p,(0,l.SU)(n)?((0,t.wg)(),(0,t.iD)("div",m,(0,i.zw)((0,l.SU)(n)),1)):(0,t.kq)("",!0),(0,l.SU)(ee)?((0,t.wg)(),(0,t.iD)("div",h,"No account has been found linked with this email.")):(0,t.kq)("",!0),(0,l.SU)(B)?((0,t.wg)(),(0,t.iD)("div",P,"You have to wait 10 minutes before requesting a code again. ")):((0,t.wg)(),(0,t.iD)("div",w,[(0,t._)("div",g,[(0,t._)("div",_,[f,(0,t.wy)((0,t._)("input",{class:"input",type:"email","onUpdate:modelValue":a[1]||(a[1]=e=>(0,l.dq)(se)?se.value=e:se=e)},null,512),[[o.nr,(0,l.SU)(se)]])])]),(0,t._)("div",y,[(0,t._)("div",D,[b,(0,t.wy)((0,t._)("input",{class:"input",type:"email","onUpdate:modelValue":a[2]||(a[2]=e=>(0,l.dq)(te)?te.value=e:te=e)},null,512),[[o.nr,(0,l.SU)(te)]])])]),(0,t._)("div",U,[(0,t._)("div",k,[(0,t._)("button",{class:(0,i.C_)(["button",{"is-loading":(0,l.SU)(s)}]),onClick:le,disabled:null==(0,l.SU)(te)||null==(0,l.SU)(se)},"Send OTP",10,S)])])]))]))]),(0,t._)("button",{class:"modal-close is-large","aria-label":"close",onClick:a[6]||(a[6]=e=>(0,l.dq)(u)?u.value=!1:u=!1)})],2)],64))}},A=s(3744);const G=(0,A.Z)(j,[["__scopeId","data-v-c2f9401e"]]);var J=G},6687:function(e,a,s){s.r(a),s.d(a,{default:function(){return q}});var t=s(6252),l=s(9963),i=s(3577);const o=e=>((0,t.dD)("data-v-7dfb8f9b"),e=e(),(0,t.Cn)(),e),n={class:"hero is-fullheight"},r={class:"hero-body animate__animated animate__fadeInLeft"},u={class:"box has-text-centered",style:{margin:"auto"}},c={class:"container is-fluid",style:{width:"100%",margin:"auto"}},d={style:{"margin-top":"5%"}},v={class:"field"},p=o((()=>(0,t._)("h1",{class:"title has-text-link has-text-left"},"Nice to see you Doc.",-1))),m={class:"control"},h={class:"field"},w={class:"control",style:{"margin-top":"2%"}},g={key:0,class:"has-text-danger",style:{"margin-top":"5%"}},_={key:1,class:"has-text-danger",style:{"margin-top":"5%"}},f=o((()=>(0,t._)("hr",null,null,-1))),y=o((()=>(0,t._)("h1",{class:"title"},"Or",-1)));function D(e,a,s,o,D,b){const U=(0,t.up)("ForgotPassword");return(0,t.wg)(),(0,t.iD)("section",n,[(0,t._)("div",r,[(0,t._)("div",u,[(0,t._)("div",c,[(0,t._)("form",d,[(0,t._)("div",v,[p,(0,t._)("div",m,[(0,t.wy)((0,t._)("input",{class:"input is-rounded",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>D.username=e),placeholder:"username",onKeyup:a[1]||(a[1]=(0,l.D2)(((...e)=>b.login&&b.login(...e)),["enter"])),required:""},null,544),[[l.nr,D.username]])])]),(0,t._)("div",h,[(0,t._)("div",w,[(0,t.wy)((0,t._)("input",{class:"input is-rounded",type:"password","onUpdate:modelValue":a[2]||(a[2]=e=>D.password=e),placeholder:"password",onKeyup:a[3]||(a[3]=(0,l.D2)(((...e)=>b.login&&b.login(...e)),["enter"])),required:""},null,544),[[l.nr,D.password]])])]),D.incorrectUserPass?((0,t.wg)(),(0,t.iD)("p",g,(0,i.zw)(D.validateMessage),1)):0==D.incorrectUserPass?((0,t.wg)(),(0,t.iD)("p",_,(0,i.zw)(D.validateMessage),1)):(0,t.kq)("",!0),(0,t._)("button",{type:"button",class:"button is-rounded is-link",onClick:a[4]||(a[4]=(...e)=>b.login&&b.login(...e))},"Login"),f,y,(0,t._)("a",{onClick:a[5]||(a[5]=(...e)=>b.signup&&b.signup(...e)),class:"is-danger"},"Create an account")])]),(0,t.Wm)(U,{userType:"doctor"})])])])}var b=s(4239),U=s(9669),k=s.n(U),S=s(9885),P={name:"LoginDoctor",component:S["default"],data(){return{username:null,password:null,userDoctor:null,incorrectUserPass:Boolean,validateMessage:"",specializations:null}},async mounted(){null!==b.Z.state.alias&&await this.$router.push(`/doctor/user/${b.Z.state.alias}`)},methods:{async login(){null==this.username||null==this.password?(this.incorrectUserPass=!1,this.validateMessage="empty username or password",this.username=null,this.password=null):await k().post("/api/auth/doctor",{username:this.username,password:this.password}).then((async e=>{this.userDoctor=e.data,await this.userDoctor?(await k().post("/session/doctor",{verified:this.userDoctor.verified,_id:this.userDoctor._id,licenseNo:this.userDoctor.licenseNo,alias:this.userDoctor.alias,fullname:this.userDoctor.name,specialist:this.userDoctor.specialist,gmail:this.userDoctor.gmail,hospitalOrigin:this.userDoctor.hospitalOrigin,schedule:this.userDoctor.schedule,username:this.userDoctor.username,messageHistory:this.userDoctor.messageHistory}),b.Z.commit("alias",this.userDoctor.alias),b.Z.commit("doctorID",this.userDoctor._id),b.Z.commit("doctorName",this.userDoctor.name),await this.$router.push(`/doctor/user/${this.userDoctor.alias}`)):(this.validateMessage="Incorrect username or password",this.incorrectUserPass=!0,this.username=null,this.password=null)}))},async signup(){await this.$router.push("/doctor/signup")}},components:{ForgotPassword:S["default"]}},H=s(3744);const C=(0,H.Z)(P,[["render",D],["__scopeId","data-v-7dfb8f9b"]]);var q=C}}]);
//# sourceMappingURL=687.b7927fed.js.map