"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[323],{7192:function(t,e,s){s.d(e,{Z:function(){return $}});var a=s(6252),i=s(3577);const l=t=>((0,a.dD)("data-v-67924956"),t=t(),(0,a.Cn)(),t),o={class:"navbar is-hidden-desktop"},n={class:"navbar-brand"},c={class:"navbar-item"},r={class:"label"},d=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),u=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),h=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),p=[d,u,h],g={class:"has-text-centered block",style:{padding:"5px"}},m={class:"is-hidden-mobile is-hidden-touch image image-outer is-square",style:{margin:"auto"}},_=["src"],b={key:0,class:"title is-6"},v={class:"menu-list block"},f=l((()=>(0,a._)("p",{class:"menu-label"},"General",-1))),w=l((()=>(0,a._)("p",{class:"menu-label"},"Verification and Information",-1))),y=l((()=>(0,a._)("p",{class:"menu-label"},"Support",-1))),D={class:"block has-text-centered"};function k(t,e,s,l,d,u){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",o,[(0,a._)("div",n,[(0,a._)("a",c,[(0,a._)("label",r,"Dr. "+(0,i.zw)(t.$store.state.doctorName),1)]),(0,a._)("a",{role:"button",class:(0,i.C_)(["navbar-burger",{"is-active":!d.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:e[0]||(e[0]=(...t)=>u.menuNav&&u.menuNav(...t))},p,2)])]),(0,a._)("aside",{class:(0,i.C_)(["menu box",{"is-hidden-mobile":d.isActive,fixedMenu:d.isActive}]),style:{"background-color":"#D8E5FF",padding:"20px"}},[(0,a._)("div",g,[(0,a._)("figure",m,[(0,a._)("img",{class:"is-rounded image-inner",src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${d.alias}.jpg`},null,8,_)]),d.isActive?((0,a.wg)(),(0,a.iD)("h5",b,"Dr. "+(0,i.zw)(t.$store.state.doctorName),1)):(0,a.kq)("",!0)]),(0,a._)("ul",v,[f,(0,a._)("li",null,[(0,a._)("a",{onClick:e[1]||(e[1]=(...t)=>u.routeHome&&u.routeHome(...t))},"Appointments")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[2]||(e[2]=(...t)=>u.patientLogs&&u.patientLogs(...t))},"Patient History")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[3]||(e[3]=(...t)=>u.openSchedule&&u.openSchedule(...t))},"Schedule")]),w,(0,a._)("li",null,[(0,a._)("a",{onClick:e[4]||(e[4]=(...t)=>u.profile&&u.profile(...t))},"Profile")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[5]||(e[5]=(...t)=>u.openSecurity&&u.openSecurity(...t))},"Security")]),y,(0,a._)("li",null,[(0,a._)("a",{onClick:e[6]||(e[6]=(...e)=>t.openFAQs&&t.openFAQs(...e))},"FAQ")]),(0,a._)("li",null,[(0,a._)("a",{onClick:e[7]||(e[7]=t=>this.$router.push("/contactus"))},"Contact Us")])]),(0,a._)("div",D,[(0,a._)("button",{onClick:e[8]||(e[8]=(...t)=>u.logout&&u.logout(...t)),class:"button is-link is-rounded",type:"button"},"Logout")])],2)],64)}var C=s(4239),M=s(9669),N=s.n(M),x={name:"AdminMenu",data(){return{alias:C.Z.state.alias,isActive:!0}},methods:{async logout(){C.Z.commit("alias",null),await N()["delete"]("/session/doctor"),await this.$router.push("/doctor/login")},async routeHome(){await this.$router.push(`/doctor/user/${this.alias}`)},async profile(){await this.$router.push(`/doctor/user/${this.alias}/profile`)},async patientLogs(){await this.$router.push(`/doctor/user/${this.alias}/patients`)},async openSecurity(){await this.$router.push(`/doctor/user/${this.alias}/security`)},async openSchedule(){await this.$router.push(`/doctor/user/${this.alias}/schedule`)},menuNav(){this.isActive=!this.isActive}}},S=s(3744);const I=(0,S.Z)(x,[["render",k],["__scopeId","data-v-67924956"]]);var $=I},3323:function(t,e,s){s.r(e),s.d(e,{default:function(){return At}});var a=s(6252),i=s(3577),l=s(9963);const o={class:"main-doctor"},n={class:"columns"},c={class:"column is-2"},r={class:"column"},d=(0,a._)("div",{class:"modal-background"},null,-1),u={class:"modal-content"},h={class:"section box"},p={class:"field is-horizontal"},g={class:"field-body"},m={class:"field"},_={class:"control"},b=(0,a._)("label",{class:"label"},"From:",-1),v=["value"],f={class:"field"},w={class:"control"},y=(0,a._)("div",{class:"label"},"To(Patient):",-1),D=["value"],k={class:"field"},C={class:"control"},M=(0,a._)("label",{class:"label"},"Attach an image(optional):",-1),N={class:"field"},x={class:"control"},S=(0,a._)("label",{class:"label"},"Subject: ",-1),I={class:"field"},$={class:"control"},A=(0,a._)("label",{class:"label"},"Message:",-1),P={class:"field"},H={class:"control has-text-right"},z=["disabled"],L={key:0,class:"has-text-success"},B=(0,a.Uk)(" A message has been sent to "),F=(0,a.Uk)(". "),j=(0,a._)("p",{class:"subtitle"},"Messaging History",-1),T={key:1,class:"container"},Z=(0,a._)("p",{class:"subtitle is-size-6 has-text-right"},"Are you sure you want to delete all messages?",-1),U={class:"buttons is-right"},q={key:2},Y={class:"notification",style:{margin:"5%"}},V={class:"content"},O={key:0},R={class:"image is-square"},K=["src"],Q={class:"has-text-centered"},E=["href"],G=(0,a._)("br",null,null,-1),W=["onClick"],J={key:3},X=(0,a._)("p",null,"No past messages yet.",-1),tt=[X],et={class:"section"},st={class:"container is-widescreen is-fullhd",style:{padding:"15"}},at=(0,a._)("h1",{class:"title"}," APPOINTMENT HISTORY ",-1),it={class:"field"},lt={class:"control"},ot={key:0,class:"container"},nt={class:"subtitle has-text-black"},ct={class:"table-container"},rt={class:"table is-striped is-narrow is-fullwidth is-bordered"},dt=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"has-text-black-ter"},"Controls"),(0,a._)("th",{class:"has-text-black-ter"},"Reference ID"),(0,a._)("th",{class:"has-text-black-ter"},"Priority No."),(0,a._)("th",{class:"has-text-black-ter"},"Hospital Appointed"),(0,a._)("th",{class:"has-text-black-ter"},"First Name"),(0,a._)("th",{class:"has-text-black-ter"},"Last Name"),(0,a._)("th",{class:"has-text-black-ter"},"Contact Number"),(0,a._)("th",{class:"has-text-black-ter"},"Birthday"),(0,a._)("th",{class:"has-text-black-ter"},"Symptoms/Comments")])],-1),ut=["onClick"],ht={class:"has-text-black-ter"},pt={class:"has-text-black-ter"},gt={class:"has-text-black-ter"},mt={class:"has-text-black-ter"},_t={class:"has-text-black-ter"},bt={class:"has-text-black-ter"},vt={class:"has-text-black-ter"},ft={class:"has-text-black-ter"},wt={key:1,class:"notification is-info"};function yt(t,e,s,X,yt,Dt){const kt=(0,a.up)("DoctorMenu");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[(0,a._)("div",c,[(0,a.Wm)(kt)]),(0,a._)("div",r,[(0,a._)("div",{class:(0,i.C_)(["modal",{"is-active":yt.isActiveModal}])},[d,(0,a._)("div",u,[(0,a._)("div",h,[(0,a._)("div",p,[(0,a._)("div",g,[(0,a._)("div",m,[(0,a._)("div",_,[b,(0,a._)("input",{class:"input",type:"text",value:"Dr. "+yt.doctorName,disabled:""},null,8,v)])]),(0,a._)("div",f,[(0,a._)("div",w,[y,(0,a._)("input",{class:"input",type:"text",value:yt.selectedPatient,disabled:""},null,8,D)])])])]),(0,a._)("div",k,[(0,a._)("div",C,[M,(0,a._)("input",{class:"input",type:"file",onChange:e[0]||(e[0]=t=>Dt.handleFile(t))},null,32)])]),(0,a._)("div",N,[(0,a._)("div",x,[S,(0,a.wy)((0,a._)("input",{class:"input",type:"text",placeholder:"Subject","onUpdate:modelValue":e[1]||(e[1]=t=>yt.titleMsg=t)},null,512),[[l.nr,yt.titleMsg]])])]),(0,a._)("div",I,[(0,a._)("div",$,[A,(0,a.wy)((0,a._)("textarea",{class:"textarea",placeholder:"Message","onUpdate:modelValue":e[2]||(e[2]=t=>yt.noticeMsg=t)},"default value",512),[[l.nr,yt.noticeMsg]])])]),(0,a._)("div",P,[(0,a._)("div",H,[(0,a._)("button",{class:(0,i.C_)(["button is-primary",{"is-loading":yt.loadingButton}]),onClick:e[3]||(e[3]=(...t)=>Dt.sendNotif&&Dt.sendNotif(...t)),disabled:""==yt.selectedPatient||""==yt.noticeMsg},"Send",10,z)])]),yt.notificationSent?((0,a.wg)(),(0,a.iD)("p",L,[B,(0,a._)("b",null,(0,i.zw)(yt.messageSuccessSelectedPatient),1),F])):(0,a.kq)("",!0),(0,a._)("a",{class:"button is-size-6 has-text-danger is-pulled-right",onClick:e[4]||(e[4]=t=>yt.clearMsgPrompt=!0)},"Clear message history"),j,yt.clearMsgPrompt?((0,a.wg)(),(0,a.iD)("div",T,[Z,(0,a._)("div",U,[(0,a._)("button",{class:"button",onClick:e[5]||(e[5]=(...t)=>Dt.clearNotif&&Dt.clearNotif(...t))},"Yes"),(0,a._)("button",{class:"button",onClick:e[6]||(e[6]=t=>yt.clearMsgPrompt=!1)},"No")])])):(0,a.kq)("",!0),0!==Object.keys(yt.messageHistory).length?((0,a.wg)(),(0,a.iD)("div",q,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(yt.messageHistory,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{class:"container",key:s},[(0,a._)("div",Y,[(0,a._)("div",V,[(0,a._)("p",null,"To: "+(0,i.zw)(e.to),1),(0,a._)("p",null,"Subject: "+(0,i.zw)(e.subject),1),(0,a._)("p",null,"Message: "+(0,i.zw)(e.message),1),e.id?((0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("figure",R,[(0,a._)("img",{loading:"lazy",src:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/doctorCopy/${t.$store.state.doctorID+e.id}.jpg`},null,8,K)]),(0,a._)("div",Q,[(0,a._)("a",{href:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/doctorCopy/${t.$store.state.doctorID+e.id}.jpg`,class:"button",download:""},"Download File",8,E)])])):(0,a.kq)("",!0),G,(0,a._)("p",null,"Date: "+(0,i.zw)(new Date(e.date).toLocaleString()),1)]),(0,a._)("button",{class:"delete",onClick:t=>Dt.deleteNotif(e)},null,8,W)])])))),128))])):((0,a.wg)(),(0,a.iD)("div",J,tt))])]),(0,a._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[7]||(e[7]=(...t)=>Dt.sendNotifInactive&&Dt.sendNotifInactive(...t))})],2),(0,a._)("section",et,[(0,a._)("div",st,[at,(0,a._)("div",it,[(0,a._)("div",lt,[(0,a.wy)((0,a._)("input",{class:"input",type:"text",style:{width:"50% !important"},"onUpdate:modelValue":e[8]||(e[8]=t=>yt.searchBar=t),placeholder:"Search..."},null,512),[[l.nr,yt.searchBar]])])]),0!==Object.keys(Dt.appointmentSchedules).length?((0,a.wg)(),(0,a.iD)("div",ot,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Dt.appointmentSchedules,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["box",{"is-hidden":new Date(e).toDateString()==(new Date).toDateString()}]),key:e},[(0,a._)("h1",nt,"Schedule: "+(0,i.zw)(new Date(e).toDateString()),1),(0,a._)("div",ct,[(0,a._)("table",rt,[dt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,(t=>((0,a.wg)(),(0,a.iD)("tbody",{key:t._id},[(0,a._)("tr",null,[(0,a._)("button",{class:"button is-info",onClick:e=>Dt.sendNotifActive(t.patientID,t.firstName,t.lastName)},"Send a notification",8,ut),(0,a._)("th",ht,(0,i.zw)(t.referenceID),1),(0,a._)("th",pt,(0,i.zw)(t.priorityNum),1),(0,a._)("th",gt,(0,i.zw)(t.hospital),1),(0,a._)("td",mt,(0,i.zw)(t.firstName),1),(0,a._)("td",_t,(0,i.zw)(t.lastName),1),(0,a._)("td",bt,(0,i.zw)(t.contactNum),1),(0,a._)("td",vt,(0,i.zw)(t.birthDay),1),(0,a._)("td",ft,(0,i.zw)(t.comments),1)])])))),128))])])],2)))),128))])):((0,a.wg)(),(0,a.iD)("div",wt,"No previous appointments."))])])])])])}var Dt=s(9669),kt=s.n(Dt),Ct=s(6486),Mt=s.n(Ct),Nt=s(7192),xt=s(4058),St={name:"PatientLogs",components:{DoctorMenu:Nt.Z},async mounted(){await kt().post("/api/appointmentList/doctors",{id:this.$store.state.doctorID}).then((t=>this.appointmentSched=t.data)),await kt().get("/api/doctor").then((t=>this.patients=t.data.find((t=>t.alias==this.alias)))),await kt().get("/session/doctor").then((t=>this.doctorName=t.data.fullname)),await kt().get("/session/doctor").then((t=>this.messageHistory=t.data.messageHistory.reverse()))},data(){return{clearMsgPrompt:!1,loadingButton:!1,searchBar:"",appointmentSched:[],alias:this.$store.state.alias,file:null,patients:[],isActiveModal:!1,selectedPatient:"",messageSuccessSelectedPatient:"",refID:"",doctorName:"",titleMsg:"",noticeMsg:"Dear",notificationSent:!1,messageHistory:[]}},computed:{appointmentSchedules(){return!!this.appointmentSched&&Mt().groupBy(this.appointmentSched.filter((t=>t.firstName.toLowerCase().includes(this.searchBar.toLowerCase())||t.lastName.toLowerCase().includes(this.searchBar.toLowerCase())||t.referenceID.toLowerCase().includes(this.searchBar.toLowerCase()))).sort(((t,e)=>new Date(e.schedule[0].date).getTime()-new Date(t.schedule[0].date).getTime())).filter((t=>new Date(t.schedule[0].date).getTime()<(new Date).getTime()||1==t.ifPatientVisited)),"schedule[0].date")}},methods:{sendNotifActive(t,e,s){this.isActiveModal=!0,this.selectedPatient=e+" "+s,this.noticeMsg=`Dear Ms/Mr. ${this.selectedPatient},`,xt.Z.connect(),xt.Z.emit("join room",t)},sendNotifInactive(){this.isActiveModal=!1,this.selectedPatient="",xt.Z.disconnect()},generateRefID(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=e.length;for(let a=0;a<12;a++)t+=e.charAt(Math.floor(Math.random()*s));this.refID=t},async sendNotif(){if(this.loadingButton=!0,this.file){this.generateRefID();const t=new FormData;t.append("id",this.refID),t.append("doctorID",this.$store.state.doctorID),t.append("imgFile",this.file),await kt().post("/api/imgUploadImgMsg",t,{headers:{"Content-Type":"multipart/form-data"}})}else this.refID=null;let t;this.messageSuccessSelectedPatient=this.selectedPatient,xt.Z.emit("message",this.refID,this.titleMsg,this.noticeMsg,this.doctorName,new Date),await kt().post("/api/pushMsg",{id:this.$store.state.doctorID,message:{id:this.refID,to:this.selectedPatient,subject:this.titleMsg,message:this.noticeMsg,date:new Date}}).then((e=>t=e.data)).catch((t=>{console.log(t)})),await kt().put("/session/doctor",{messageHistory:t}),this.messageHistory=t.reverse(),this.noticeMsg="",this.notificationSent=!0,this.loadingButton=!1},async deleteNotif(t){let e;try{await kt().post("/api/imgUploadImgMsgDeleteDoctor",{doctorID:"assets/patientimgmsg/doctorCopy/"+this.$store.state.doctorID,id:t.id}),await kt().post("/api/pullMsg",{id:this.$store.state.doctorID,message:t}).then((t=>e=t.data)).catch((t=>{console.log(t)})),await kt().put("/session/doctor",{messageHistory:e})}catch(s){console.log(s)}this.messageHistory=e.reverse()},async clearNotif(){try{await kt().post("/api/imgUploadImgMsgClearDoctor",{doctorID:this.$store.state.doctorID}),await kt().post("/api/clearMsg",{id:this.$store.state.doctorID}).then((t=>this.messageHistory=t.data)).catch((t=>console.log(t))),await kt().put("/session/doctor",{messageHistory:this.messageHistory})}catch(t){console.log(t)}this.clearMsgPrompt=!1},handleFile(t){this.file=t.target.files[0]}}},It=s(3744);const $t=(0,It.Z)(St,[["render",yt]]);var At=$t}}]);
//# sourceMappingURL=323.cb7f52a0.js.map