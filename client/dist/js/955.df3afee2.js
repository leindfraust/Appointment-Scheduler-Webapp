"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[955,848],{2848:function(a,e,l){l.r(e),l.d(e,{default:function(){return j}});var s=l(6252),i=l(2262),t=l(3577),n=l(9963),o=l(196);const u=a=>((0,s.dD)("data-v-29b358e4"),a=a(),(0,s.Cn)(),a),r=u((()=>(0,s._)("div",{class:"modal-background"},null,-1))),c={class:"modal-content has-text-left",style:{width:"40%",margin:"auto"}},d={key:0,class:"section box"},v=u((()=>(0,s._)("p",{class:"title is-4 has-text-danger"},"Forgot Password",-1))),p={key:0,class:"notification is-danger"},_={key:1,class:"notification is-warning"},w={key:2,class:"container"},g={class:"field"},m={class:"control"},h=u((()=>(0,s._)("label",{class:"label"},"Enter Username",-1))),f={class:"field"},y={class:"control"},b=u((()=>(0,s._)("label",{class:"label"},"Enter Email",-1))),k={class:"field"},P={class:"control"},U=["disabled"],S={key:3,class:"notification is-danger"},C={key:1,class:"section box"},H={key:0,class:"container"},D={key:0,class:"notification is-warning"},Z={class:"field"},q={class:"control"},x=u((()=>(0,s._)("label",{class:"label"},"Enter code",-1))),T={key:1,class:"container"},V={key:0,class:"notification is-danger"},M={key:1,class:"container"},$={class:"field"},A={class:"control"},N=u((()=>(0,s._)("label",{class:"label"},"New Password:",-1))),I={class:"field"},E={class:"control"},F=u((()=>(0,s._)("label",{class:"label"},"Confirm Password:",-1))),O={class:"field"},Y={class:"control"},z=["disabled"],R={key:2,class:"container"},W=u((()=>(0,s._)("div",{class:"notification is-success"},"Your password has been successfully changed.",-1))),B=[W];var G={__name:"ForgotPassword",props:{userType:String,username:String,email:String},setup(a){const e=a;let l=(0,i.iH)(!1),u=(0,i.iH)(""),W=(0,i.iH)(!1),G=(0,i.iH)(!1),L=(0,i.iH)(""),Q=(0,i.iH)(!1),j=(0,i.iH)(!1),J=(0,i.iH)(!1),K=(0,i.iH)(""),X=(0,i.iH)(""),aa=(0,i.iH)(!1),ea=(0,i.iH)(!1),la=(0,i.iH)(!1),sa=(0,i.iH)(""),ia=(0,i.iH)(e.username),ta=(0,i.iH)(e.email);async function na(){if(null!=ia.value||null!=ta.value){let s;if(l.value=!0,await o.ZP.post("/api/code/email",{email:ta.value}).then((a=>s=a.data)),s)G.value=!0;else if(G.value=!1,"patient"==e.userType)if(await o.ZP.post("/api/user/verify_username",{username:ia.value,email:ta.value}).then((a=>sa.value=a.data)),sa.value){la.value=!1;try{await o.ZP.post("/api/OTPMail",{email:ta.value}).then(Q.value=!0),Q.value=!0}catch(a){u.value=a}}else la.value=!0;else if("doctor"==e.userType)if(await o.ZP.post("/api/doctor/verify_username",{username:ia.value,email:ta.value}).then((a=>sa.value=a.data)),sa.value){la.value=!1;try{await o.ZP.post("/api/OTPMail",{email:ta.value}).then(Q.value=!0),Q.value=!0}catch(a){u.value=a}}else la.value=!0;else if("manager"==e.userType)if(await o.ZP.post("/api/manager/verify_username",{username:ia.value,email:ta.value}).then((a=>sa.value=a.data)),sa.value){la.value=!1;try{await o.ZP.post("/api/OTPMail",{email:ta.value}).then(Q.value=!0),Q.value=!0}catch(a){u.value=a}}else la.value=!0;l.value=!1}}async function oa(){let a;J.value=!1,j.value=!1,await o.ZP.post("/api/code/verify",{code:L.value}).then((e=>a=e.data)),a?j.value=!0:J.value=!0}async function ua(){if(K.value===X.value){if("patient"==e.userType)try{await o.ZP.put("/api/fupdatePassword/patient",{patientID:sa.value._id,password:K.value}),sa.value="",ea.value=!0}catch(a){ea.value=!1,u.value=a,sa.value=""}else if("doctor"==e.userType)try{await o.ZP.put("/api/fupdatePassword/doctor",{doctorID:sa.value._id,password:K.value}),sa.value="",ea.value=!0}catch(a){ea.value=!1,u.value=a,sa.value=""}else if("manager"==e.userType)try{await o.ZP.put("/api/fupdatePassword/manager",{managerID:sa.value._id,password:K.value}),sa.value="",ea.value=!0}catch(a){ea.value=!1,u.value=a,sa.value=""}}else aa.value=!0}return(a,e)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("a",{class:"subtitle has-text-danger",onClick:e[0]||(e[0]=a=>(0,i.dq)(W)?W.value=!(0,i.SU)(W):W=!(0,i.SU)(W))},"Forgot Password"),(0,s._)("div",{class:(0,t.C_)(["modal",{"is-active":(0,i.SU)(W)}])},[r,(0,s._)("div",c,[(0,i.SU)(Q)?((0,s.wg)(),(0,s.iD)("section",C,[(0,i.SU)(j)?((0,s.wg)(),(0,s.iD)("div",T,[(0,i.SU)(aa)?((0,s.wg)(),(0,s.iD)("div",V,"Passwords not match.")):(0,s.kq)("",!0),(0,i.SU)(ea)?((0,s.wg)(),(0,s.iD)("div",R,B)):((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",$,[(0,s._)("div",A,[N,(0,s.wy)((0,s._)("input",{class:"input",type:"password","onUpdate:modelValue":e[4]||(e[4]=a=>(0,i.dq)(K)?K.value=a:K=a)},null,512),[[n.nr,(0,i.SU)(K)]])])]),(0,s._)("div",I,[(0,s._)("div",E,[F,(0,s.wy)((0,s._)("input",{class:"input",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>(0,i.dq)(X)?X.value=a:X=a)},null,512),[[n.nr,(0,i.SU)(X)]])])]),(0,s._)("div",O,[(0,s._)("div",Y,[(0,s._)("button",{class:"button",onClick:ua,disabled:""==(0,i.SU)(K)&&""==(0,i.SU)(X)},"Confirm",8,z)])])]))])):((0,s.wg)(),(0,s.iD)("div",H,[(0,i.SU)(J)?((0,s.wg)(),(0,s.iD)("div",D,"Incorrect code, please try again.")):(0,s.kq)("",!0),(0,s._)("div",Z,[(0,s._)("div",q,[x,(0,s.wy)((0,s._)("input",{class:"input",type:"number","onUpdate:modelValue":e[3]||(e[3]=a=>(0,i.dq)(L)?L.value=a:L=a)},null,512),[[n.nr,(0,i.SU)(L)]])])]),(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("button",{class:"button",onClick:oa},"Verify")])])]))])):((0,s.wg)(),(0,s.iD)("section",d,[v,(0,i.SU)(u)?((0,s.wg)(),(0,s.iD)("div",p,(0,t.zw)((0,i.SU)(u)),1)):(0,s.kq)("",!0),(0,i.SU)(la)?((0,s.wg)(),(0,s.iD)("div",_,"No account has been found linked with this email.")):(0,s.kq)("",!0),(0,i.SU)(G)?((0,s.wg)(),(0,s.iD)("div",S,"You have to wait 10 minutes before requesting a code again. ")):((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",g,[(0,s._)("div",m,[h,(0,s.wy)((0,s._)("input",{class:"input",type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>(0,i.dq)(ia)?ia.value=a:ia=a)},null,512),[[n.nr,(0,i.SU)(ia)]])])]),(0,s._)("div",f,[(0,s._)("div",y,[b,(0,s.wy)((0,s._)("input",{class:"input",type:"email","onUpdate:modelValue":e[2]||(e[2]=a=>(0,i.dq)(ta)?ta.value=a:ta=a)},null,512),[[n.nr,(0,i.SU)(ta)]])])]),(0,s._)("div",k,[(0,s._)("div",P,[(0,s._)("button",{class:(0,t.C_)(["button",{"is-loading":(0,i.SU)(l)}]),onClick:na,disabled:null==(0,i.SU)(ta)||null==(0,i.SU)(ia)},"Send OTP",10,U)])])]))]))]),(0,s._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=a=>(0,i.dq)(W)?W.value=!1:W=!1)})],2)],64))}},L=l(3744);const Q=(0,L.Z)(G,[["__scopeId","data-v-29b358e4"]]);var j=Q},7063:function(a,e,l){l.d(e,{Z:function(){return U}});var s=l(6252),i=l(3577);const t={class:"navbar is-hidden-desktop"},n={class:"navbar-brand"},o=(0,s._)("span",{"aria-hidden":"true"},null,-1),u=(0,s._)("span",{"aria-hidden":"true"},null,-1),r=(0,s._)("span",{"aria-hidden":"true"},null,-1),c=[o,u,r],d=(0,s._)("p",{class:"menu-label"},"General",-1),v={class:"menu-list"},p=(0,s._)("p",{class:"menu-label"},"Security",-1),_={class:"menu-list"},w=(0,s._)("p",{class:"menu-label"},"Support",-1),g={class:"menu-list"},m=(0,s._)("li",null,[(0,s._)("a",null,"FAQ")],-1),h=(0,s._)("hr",null,null,-1);function f(a,e,l,o,u,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",t,[(0,s._)("div",n,[(0,s._)("a",{role:"button",class:(0,i.C_)(["navbar-burger",{"is-active":!u.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:e[0]||(e[0]=(...a)=>r.menuNav&&r.menuNav(...a))},c,2)])]),(0,s._)("aside",{class:(0,i.C_)(["menu box",{"is-hidden-mobile":u.isActive,fixedMenu:u.isActive}]),style:{"background-color":"white",padding:"20px",height:"100vh"}},[d,(0,s._)("ul",v,[(0,s._)("li",null,[(0,s._)("a",{onClick:e[1]||(e[1]=(...a)=>r.navDoctors&&r.navDoctors(...a))},"Dashboard")]),(0,s._)("li",null,[(0,s._)("a",{onClick:e[2]||(e[2]=(...a)=>r.navProfile&&r.navProfile(...a))},"Profile")])]),p,(0,s._)("ul",_,[(0,s._)("li",null,[(0,s._)("a",{onClick:e[3]||(e[3]=(...a)=>r.navChangePass&&r.navChangePass(...a))},"Registration and Password")])]),w,(0,s._)("ul",g,[m,(0,s._)("li",null,[(0,s._)("a",{onClick:e[4]||(e[4]=a=>this.$router.push("/contactus"))},"Contact Us")])]),h,(0,s._)("button",{class:"button is-danger",onClick:e[5]||(e[5]=(...a)=>r.logout&&r.logout(...a))},"Logout")],2)],64)}var y=l(196),b={name:"ManagerMenu",data(){return{isActive:!0,managerHospital:""}},async mounted(){await y.ZP.get("/session/manager").then((a=>this.managerHospital=a.data.hospital))},methods:{async logout(){await y.ZP["delete"]("/session/manager"),await this.$store.commit("managerHospital",null),await this.$router.push("/manager/login")},menuNav(){this.isActive=!this.isActive},navProfile(){this.$router.push(`/manager/${this.managerHospital}/profile`)},navDoctors(){this.$router.push(`/manager/${this.managerHospital}`)},navChangePass(){this.$router.push(`/manager/${this.managerHospital}/security`)}}},k=l(3744);const P=(0,k.Z)(b,[["render",f]]);var U=P},6955:function(a,e,l){l.r(e),l.d(e,{default:function(){return F}});var s=l(6252),i=l(2262),t=l(9963),n=l(3577),o=l(196),u=l(7063),r=l(2848);const c={class:"columns"},d={class:"column is-2"},v={class:"column"},p={class:"section"},_={class:"container box"},w=(0,s._)("label",{class:"label"},"Registration Code",-1),g={class:"field has-addons"},m={class:"control"},h=(0,s._)("i",{class:"fa-solid fa-arrows-rotate"},null,-1),f=[h],y=(0,s._)("hr",null,null,-1),b={key:0,class:"notification is-success"},k={key:1,class:"notification is-danger"},P={class:"field"},U=(0,s._)("label",{class:"label"},"Current Password",-1),S={class:"control"},C={key:0,class:"help is-danger"},H={class:"field"},D=(0,s._)("label",{class:"label"},"New Password",-1),Z={class:"control"},q={key:0,class:"help is-danger"},x={class:"field"},T=(0,s._)("label",{class:"label"},"Confirm Password",-1),V={class:"control"},M={key:0,class:"help is-danger"},$={class:"field has-text-right"},A={class:"control"},N=["disabled"];var I={__name:"ManagerSecurity",setup(a){let e=(0,i.iH)(""),l=(0,i.iH)(""),h=(0,i.iH)(""),I=(0,i.iH)(!1),E=(0,i.iH)(""),F=(0,i.iH)(""),O=(0,i.iH)(!1),Y=(0,i.iH)(!1),z=(0,i.iH)("");function R(){let a="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=e.length;for(let s=0;s<8;s++)a+=e.charAt(Math.floor(Math.random()*l));z.value=a.toUpperCase()}async function W(){R();try{await o.ZP.put(`/api/manager/${E.value}`,{registrationCode:z.value}),await o.ZP.put("/session/manager",{registrationCode:z.value})}catch(a){F.value=a}}function B(){let a=document.getElementsByClassName("password");for(let e=0;e<a.length;e++)"password"===a[e].type?a[e].type="text":a[e].type="password"}async function G(){l.value===h.value?await o.ZP.put("/api/updatePassword/manager",{managerID:E.value,currentPassword:e.value,newPassword:l.value}).then((a=>{a.data?(Y.value=!1,e.value="",l.value="",h.value="",O.value=!0,F.value="",I.value=!1):(O.value=!1,Y.value=!0)})).catch((a=>{F.value=a,O.value=!1})):(I.value=!0,O.value=!1)}return(0,s.bv)((async()=>{await o.ZP.get("/session/manager").then((a=>E.value=a.data._id)),await o.ZP.get("/session/manager").then((a=>z.value=a.data.registrationCode))})),(a,o)=>((0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",d,[(0,s.Wm)(u.Z)]),(0,s._)("div",v,[(0,s._)("section",p,[(0,s._)("div",_,[w,(0,s._)("div",g,[(0,s._)("div",m,[(0,s.wy)((0,s._)("input",{class:"input",type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>(0,i.dq)(z)?z.value=a:z=a)},null,512),[[t.nr,(0,i.SU)(z)]])]),(0,s._)("div",{class:"control"},[(0,s._)("a",{class:"button",onClick:W},f)])]),y,(0,i.SU)(O)?((0,s.wg)(),(0,s.iD)("div",b,"Password has been changed successfully. ")):(0,s.kq)("",!0),(0,i.SU)(F)?((0,s.wg)(),(0,s.iD)("div",k,(0,n.zw)((0,i.SU)(F)),1)):(0,s.kq)("",!0),(0,s._)("div",P,[U,(0,s._)("div",S,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":o[1]||(o[1]=a=>(0,i.dq)(e)?e.value=a:e=a),placeholder:"Current password"},null,512),[[t.nr,(0,i.SU)(e)]])]),(0,i.SU)(Y)?((0,s.wg)(),(0,s.iD)("p",C,"Current password does not match in our database.")):(0,s.kq)("",!0)]),(0,s._)("div",H,[D,(0,s._)("div",Z,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":o[2]||(o[2]=a=>(0,i.dq)(l)?l.value=a:l=a),placeholder:"New password"},null,512),[[t.nr,(0,i.SU)(l)]])]),(0,i.SU)(I)?((0,s.wg)(),(0,s.iD)("p",q,"Password do not match.")):(0,s.kq)("",!0)]),(0,s._)("div",x,[T,(0,s._)("div",V,[(0,s.wy)((0,s._)("input",{type:"password",class:"input password","onUpdate:modelValue":o[3]||(o[3]=a=>(0,i.dq)(h)?h.value=a:h=a),placeholder:"Confirm password"},null,512),[[t.nr,(0,i.SU)(h)]])]),(0,i.SU)(I)?((0,s.wg)(),(0,s.iD)("p",M,"Password do not match.")):(0,s.kq)("",!0)]),(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("label",{class:"checkbox"},[(0,s._)("input",{type:"checkbox",onClick:B}),(0,s.Uk)(" Show password ")])])]),(0,s._)("div",$,[(0,s._)("div",A,[(0,s._)("button",{class:"button is-danger",disabled:""==(0,i.SU)(e)||""==(0,i.SU)(l)||""==(0,i.SU)(h),onClick:G},"Change password",8,N)])]),(0,s.Wm)(r["default"],{userType:"manager"})])])])]))}};const E=I;var F=E}}]);
//# sourceMappingURL=955.df3afee2.js.map