"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[906,345],{7345:function(a,e,s){s.r(e),s.d(e,{default:function(){return J}});var t=s(6252),i=s(2262),l=s(3577),o=s(9963),n=s(594);const r=a=>((0,t.dD)("data-v-3decfc24"),a=a(),(0,t.Cn)(),a),u=r((()=>(0,t._)("div",{class:"modal-background"},null,-1))),c={class:"modal-content has-text-left",style:{width:"40%",margin:"auto"}},d={key:0,class:"section box"},p=r((()=>(0,t._)("p",{class:"title is-4 has-text-danger"},"Forgot Password",-1))),v={key:0,class:"notification is-danger"},m={key:1,class:"notification is-warning"},h={key:2,class:"container"},w={class:"field"},g={class:"control"},f=r((()=>(0,t._)("label",{class:"label"},"Enter Username",-1))),y={class:"field"},_={class:"control"},D=r((()=>(0,t._)("label",{class:"label"},"Enter Email",-1))),b={class:"field"},k={class:"control"},U=["disabled"],P={key:3,class:"notification is-danger"},C={key:1,class:"section box"},S={key:0,class:"container"},H={key:0,class:"notification is-warning"},q={class:"field"},Z={class:"control"},x=r((()=>(0,t._)("label",{class:"label"},"Enter code",-1))),T={key:1,class:"container"},$={key:0,class:"notification is-danger"},I={key:1,class:"container"},M={class:"field"},N={class:"control"},V=r((()=>(0,t._)("label",{class:"label"},"New Password:",-1))),F={class:"field"},O={class:"control"},z=r((()=>(0,t._)("label",{class:"label"},"Confirm Password:",-1))),E={class:"field"},L={class:"control"},Y=["disabled"],K={key:2,class:"container"},B=r((()=>(0,t._)("div",{class:"notification is-success"},"Your password has been successfully changed.",-1))),W=[B];var j={__name:"ForgotPassword",props:{userType:String,username:String,email:String,forgotPasswordPromptCount:{type:Number,default:0}},setup(a){const e=a;let s=(0,i.iH)(!1),r=(0,i.iH)(""),B=(0,i.iH)(!1),j=(0,i.iH)(!1),A=(0,i.iH)(""),G=(0,i.iH)(!1),J=(0,i.iH)(!1),Q=(0,i.iH)(!1),R=(0,i.iH)(""),X=(0,i.iH)(""),aa=(0,i.iH)(!1),ea=(0,i.iH)(!1),sa=(0,i.iH)(!1),ta=(0,i.iH)(""),ia=(0,i.iH)(e.username),la=(0,i.iH)(e.email);const oa=(0,i.iH)(2),na=(0,t.Fl)((()=>e.forgotPasswordPromptCount));async function ra(){if(null!=ia.value||null!=la.value){let t;if(s.value=!0,await n.Z.post("/api/code/email",{email:la.value}).then((a=>t=a.data)),t)j.value=!0;else if(j.value=!1,"patient"==e.userType)if(await n.Z.post("/api/user/verify_username",{username:ia.value,email:la.value}).then((a=>ta.value=a.data)),ta.value){sa.value=!1;try{await n.Z.post("/api/OTPMail",{email:la.value}).then(G.value=!0),G.value=!0}catch(a){r.value=a}}else sa.value=!0;else if("doctor"==e.userType)if(await n.Z.post("/api/doctor/verify_username",{username:ia.value,email:la.value}).then((a=>ta.value=a.data)),ta.value){sa.value=!1;try{await n.Z.post("/api/OTPMail",{email:la.value}).then(G.value=!0),G.value=!0}catch(a){r.value=a}}else sa.value=!0;else if("manager"==e.userType)if(await n.Z.post("/api/manager/verify_username",{username:ia.value,email:la.value}).then((a=>ta.value=a.data)),ta.value){sa.value=!1;try{await n.Z.post("/api/OTPMail",{email:la.value}).then(G.value=!0),G.value=!0}catch(a){r.value=a}}else sa.value=!0;s.value=!1}}async function ua(){let a;Q.value=!1,J.value=!1,await n.Z.post("/api/code/verify",{code:A.value}).then((e=>a=e.data)),a?J.value=!0:Q.value=!0}async function ca(){if(R.value===X.value){if("patient"==e.userType)try{await n.Z.put("/api/fupdatePassword/patient",{patientID:ta.value._id,password:R.value}),ta.value="",ea.value=!0}catch(a){ea.value=!1,r.value=a,ta.value=""}else if("doctor"==e.userType)try{await n.Z.put("/api/fupdatePassword/doctor",{doctorID:ta.value._id,password:R.value}),ta.value="",ea.value=!0}catch(a){ea.value=!1,r.value=a,ta.value=""}else if("manager"==e.userType)try{await n.Z.put("/api/fupdatePassword/manager",{managerID:ta.value._id,password:R.value}),ta.value="",ea.value=!0}catch(a){ea.value=!1,r.value=a,ta.value=""}}else aa.value=!0}return(a,e)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,i.SU)(na)>=oa.value?((0,t.wg)(),(0,t.iD)("a",{key:0,class:"help has-text-danger",onClick:e[0]||(e[0]=a=>(0,i.dq)(B)?B.value=!(0,i.SU)(B):B=!(0,i.SU)(B))},"Forgot Password")):(0,t.kq)("",!0),(0,t._)("div",{class:(0,l.C_)(["modal",{"is-active":(0,i.SU)(B)}])},[u,(0,t._)("div",c,[(0,i.SU)(G)?((0,t.wg)(),(0,t.iD)("section",C,[(0,i.SU)(J)?((0,t.wg)(),(0,t.iD)("div",T,[(0,i.SU)(aa)?((0,t.wg)(),(0,t.iD)("div",$,"Passwords not match.")):(0,t.kq)("",!0),(0,i.SU)(ea)?((0,t.wg)(),(0,t.iD)("div",K,W)):((0,t.wg)(),(0,t.iD)("div",I,[(0,t._)("div",M,[(0,t._)("div",N,[V,(0,t.wy)((0,t._)("input",{class:"input",type:"password","onUpdate:modelValue":e[4]||(e[4]=a=>(0,i.dq)(R)?R.value=a:R=a)},null,512),[[o.nr,(0,i.SU)(R)]])])]),(0,t._)("div",F,[(0,t._)("div",O,[z,(0,t.wy)((0,t._)("input",{class:"input",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>(0,i.dq)(X)?X.value=a:X=a)},null,512),[[o.nr,(0,i.SU)(X)]])])]),(0,t._)("div",E,[(0,t._)("div",L,[(0,t._)("button",{class:"button",onClick:ca,disabled:""==(0,i.SU)(R)&&""==(0,i.SU)(X)},"Confirm",8,Y)])])]))])):((0,t.wg)(),(0,t.iD)("div",S,[(0,i.SU)(Q)?((0,t.wg)(),(0,t.iD)("div",H,"Incorrect code, please try again.")):(0,t.kq)("",!0),(0,t._)("div",q,[(0,t._)("div",Z,[x,(0,t.wy)((0,t._)("input",{class:"input",type:"number","onUpdate:modelValue":e[3]||(e[3]=a=>(0,i.dq)(A)?A.value=a:A=a)},null,512),[[o.nr,(0,i.SU)(A)]])])]),(0,t._)("div",{class:"field"},[(0,t._)("div",{class:"control"},[(0,t._)("button",{class:"button",onClick:ua},"Verify")])])]))])):((0,t.wg)(),(0,t.iD)("section",d,[p,(0,i.SU)(r)?((0,t.wg)(),(0,t.iD)("div",v,(0,l.zw)((0,i.SU)(r)),1)):(0,t.kq)("",!0),(0,i.SU)(sa)?((0,t.wg)(),(0,t.iD)("div",m,"No account has been found linked with this email.")):(0,t.kq)("",!0),(0,i.SU)(j)?((0,t.wg)(),(0,t.iD)("div",P,"You have to wait 10 minutes before requesting a code again. ")):((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("div",w,[(0,t._)("div",g,[f,(0,t.wy)((0,t._)("input",{class:"input",type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>(0,i.dq)(ia)?ia.value=a:ia=a)},null,512),[[o.nr,(0,i.SU)(ia)]])])]),(0,t._)("div",y,[(0,t._)("div",_,[D,(0,t.wy)((0,t._)("input",{class:"input",type:"email","onUpdate:modelValue":e[2]||(e[2]=a=>(0,i.dq)(la)?la.value=a:la=a)},null,512),[[o.nr,(0,i.SU)(la)]])])]),(0,t._)("div",b,[(0,t._)("div",k,[(0,t._)("button",{class:(0,l.C_)(["button",{"is-loading":(0,i.SU)(s)}]),onClick:ra,disabled:null==(0,i.SU)(la)||null==(0,i.SU)(ia)},"Send OTP",10,U)])])]))]))]),(0,t._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[6]||(e[6]=a=>(0,i.dq)(B)?B.value=!1:B=!1)})],2)],64))}},A=s(3744);const G=(0,A.Z)(j,[["__scopeId","data-v-3decfc24"]]);var J=G},1906:function(a,e,s){s.r(e),s.d(e,{default:function(){return C}});var t=s(6252),i=s(9963),l=s(3577);const o=a=>((0,t.dD)("data-v-8e58cb14"),a=a(),(0,t.Cn)(),a),n={class:"hero is-fullheight"},r={class:"hero-body animate__animated animate__fadeInLeft"},u={class:"box has-text-centered",style:{margin:"auto"}},c={class:"container is-fluid",style:{width:"100%",margin:"auto"}},d={style:{"margin-top":"5%"}},p={class:"field"},v=o((()=>(0,t._)("h1",{class:"title has-text-link has-text-left"},"Nice to see you Doc.",-1))),m={class:"control"},h={class:"field"},w={class:"control",style:{"margin-top":"2%"}},g={key:0,class:"has-text-danger",style:{"margin-top":"5%"}},f={key:1,class:"has-text-danger",style:{"margin-top":"5%"}},y=o((()=>(0,t._)("hr",null,null,-1)));function _(a,e,s,o,_,D){const b=(0,t.up)("ForgotPassword");return(0,t.wg)(),(0,t.iD)("section",n,[(0,t._)("div",r,[(0,t._)("div",u,[(0,t._)("div",c,[(0,t._)("form",d,[(0,t._)("div",p,[v,(0,t._)("div",m,[(0,t.wy)((0,t._)("input",{class:"input is-rounded",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>_.username=a),placeholder:"username",onKeyup:e[1]||(e[1]=(0,i.D2)(((...a)=>D.login&&D.login(...a)),["enter"])),required:""},null,544),[[i.nr,_.username]])])]),(0,t._)("div",h,[(0,t._)("div",w,[(0,t.wy)((0,t._)("input",{class:"input is-rounded",type:"password","onUpdate:modelValue":e[2]||(e[2]=a=>_.password=a),placeholder:"password",onKeyup:e[3]||(e[3]=(0,i.D2)(((...a)=>D.login&&D.login(...a)),["enter"])),required:""},null,544),[[i.nr,_.password]])])]),_.incorrectUserPass?((0,t.wg)(),(0,t.iD)("p",g,(0,l.zw)(_.validateMessage),1)):0==_.incorrectUserPass?((0,t.wg)(),(0,t.iD)("p",f,(0,l.zw)(_.validateMessage),1)):(0,t.kq)("",!0),(0,t._)("button",{type:"button",class:"button is-rounded is-link",onClick:e[4]||(e[4]=(...a)=>D.login&&D.login(...a))},"Login"),y,(0,t._)("a",{onClick:e[5]||(e[5]=(...a)=>D.signup&&D.signup(...a)),class:"is-danger"},"Create an account")])]),(0,t.Wm)(b,{userType:"doctor",forgotPasswordPromptCount:_.forgotPasswordCount},null,8,["forgotPasswordPromptCount"])])])])}var D=s(594),b=s(7345),k={name:"LoginDoctor",component:b["default"],data(){return{username:null,password:null,userDoctor:null,incorrectUserPass:Boolean,validateMessage:"",specializations:null,forgotPasswordCount:0}},async beforeCreate(){await D.Z.get("/session/doctor").then((async a=>{"undefined"!==typeof a.data.alias&&(this.$store.commit("alias",a.data.alias),this.$store.commit("doctorID",a.data._id),this.$store.commit("doctorName",a.data.fullname),await this.$router.push(`/doctor/${this.$store.state.alias}/appointments`))}))},methods:{async login(){null==this.username||null==this.password?(this.incorrectUserPass=!1,this.validateMessage="empty username or password",this.username=null,this.password=null):await D.Z.post("/api/auth/doctor",{username:this.username,password:this.password}).then((async a=>{this.userDoctor=await a.data,await this.userDoctor?(await D.Z.post("/session/doctor",{verified:this.userDoctor.verified,_id:this.userDoctor._id,licenseNo:this.userDoctor.licenseNo,alias:this.userDoctor.alias,fullname:this.userDoctor.name,specialist:this.userDoctor.specialist,gmail:this.userDoctor.gmail,hospitalOrigin:this.userDoctor.hospitalOrigin,schedule:this.userDoctor.schedule,username:this.userDoctor.username,messageHistory:this.userDoctor.messageHistory,appointmentCategories:this.userDoctor.appointmentCategories,paymentMethods:this.userDoctor.paymentMethods}),this.$store.commit("alias",this.userDoctor.alias),this.$store.commit("doctorID",this.userDoctor._id),this.$store.commit("doctorName",this.userDoctor.name),await this.$router.push(`/doctor/${this.userDoctor.alias}/appointments`)):(this.forgotPasswordCount=this.forgotPasswordCount+1,this.validateMessage="Incorrect username or password",this.incorrectUserPass=!0,this.username=null,this.password=null)}))},async signup(){await this.$router.push("/doctor/signup")}},components:{ForgotPassword:b["default"]}},U=s(3744);const P=(0,U.Z)(k,[["render",_],["__scopeId","data-v-8e58cb14"]]);var C=P}}]);
//# sourceMappingURL=906.5e991027.js.map