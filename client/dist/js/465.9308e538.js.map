{"version":3,"file":"js/465.9308e538.js","mappings":"2iFAOMA,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,OAkBfC,EAAAA,EAAAA,KAAUC,gBACAC,EAAAA,EAAAA,IAAW,0EAAyEN,EAAMO,MAAMC,uBAAuBC,MAAKC,GAA+B,KAAnBA,EAASC,OAAgBX,EAAMY,OAAO,mBAAmB,GAAQZ,EAAMY,OAAO,mBAAmB,KAAQC,OAAMC,GAAOA,EAAMd,EAAMY,OAAO,mBAAmB,GAASZ,EAAMY,OAAO,mBAAmB,KACnVG,GAAcC,OAAQ,EAElBhB,EAAMO,MAAMU,YACZC,EAAAA,EAAAA,UACAA,EAAAA,EAAAA,KAAY,YAAalB,EAAMO,MAAMU,WACrCC,EAAAA,EAAAA,GAAU,iBAAkBR,IACxBS,EAAcH,MAAQN,CAAQ,IAElCQ,EAAAA,EAAAA,GAAU,mBAAoBR,IAC1BS,EAAcH,MAAQN,CAAQ,IAElCQ,EAAAA,EAAAA,GAAU,YAAaR,IACnBS,EAAcH,MAAQN,CAAQ,IAEtC,IAGJ,MAAMU,GAAwBC,EAAAA,EAAAA,KAAI,GAC5BC,GAAgBD,EAAAA,EAAAA,KAAI,GACpBE,GAA0BF,EAAAA,EAAAA,KAAI,GAE9BG,GAAWH,EAAAA,EAAAA,KAAI,GACfI,EAAUzB,EAAMO,MAAMC,gBACtBW,GAAgBE,EAAAA,EAAAA,IAAI,IACpBK,IAAYL,EAAAA,EAAAA,IAAI,IAChBN,IAAgBM,EAAAA,EAAAA,KAAI,GACpBM,IAAaN,EAAAA,EAAAA,IAAIO,EAAMC,OAE7B,SAASC,KACLN,EAASR,OAASQ,EAASR,KAC/B,CACAX,eAAe0B,KACX/B,EAAMY,OAAO,YAAa,MAC1BZ,EAAMY,OAAO,kBAAmB,UAC1BN,EAAAA,EAAAA,UAAa,0BACbJ,EAAO8B,KAAK,kBAClBd,EAAAA,EAAAA,YACJ,CACA,SAASe,KACLb,EAAsBJ,OAASI,EAAsBJ,KACzD,CACAX,eAAe6B,GAAYC,SACjB7B,EAAAA,EAAAA,KAAW,oCAAqC,CAClD8B,GAAI,oCAAsCD,EAAMC,KAEpDlB,EAAAA,EAAAA,KAAY,iBAAkBlB,EAAMO,MAAMU,UAAWkB,EACzD,CACA,SAASE,GAAUF,EAAOG,GACtBZ,GAAUV,MAAQmB,EAClBb,EAAcN,OAAQ,EAClBU,GAAUV,MAAMuB,MAChBpB,EAAcH,MAAMsB,GAAOC,KAAM,EACjCrB,EAAAA,EAAAA,KAAY,iBAAkBC,EAAcH,OAEpD,CACA,SAASwB,KACLlB,EAAcN,OAAQ,CAC1B,C,87LC/EA,MAAMyB,IAA2B,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE,S","sources":["webpack://client/./src/components/NavigationTab.vue","webpack://client/./src/components/NavigationTab.vue?c415"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport socket from '../socket'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst store = useStore()\r\nconst router = useRouter()\r\n\r\nconst props = defineProps({\r\n    providerFinderMode: {\r\n        type: Boolean,\r\n        default: false\r\n    },\r\n    providerProvinces: {\r\n        type: Array,\r\n        default: undefined\r\n    },\r\n    providerList: {\r\n        type: undefined,\r\n        default: undefined\r\n    },\r\n    query: String\r\n})\r\ndefineEmits(['unloadPropData'])\r\nonMounted(async () => {\r\n    await axios.get(`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patients/${store.state.patientUsername}.jpg`).then(response => response.status == 200 ? store.commit('checkProfileImg', true) : store.commit('checkProfileImg', false)).catch(err => err ? store.commit('checkProfileImg', false) : store.commit('checkProfileImg', true))\r\n    checkImgState.value = true\r\n\r\n    if (store.state.patientID) {\r\n        socket.connect()\r\n        socket.emit('join room', store.state.patientID)\r\n        socket.on('send messages', (response) => {\r\n            notifications.value = response\r\n        });\r\n        socket.on('delete messages', (response) => {\r\n            notifications.value = response\r\n        });\r\n        socket.on('messages', (response) => {\r\n            notifications.value = response\r\n        });\r\n    }\r\n})\r\n\r\nconst isActiveNotifications = ref(false)\r\nconst isActiveModal = ref(false)\r\nconst isActiveProfileDropdown = ref(false)\r\n//const isActiveMenuDropdown = ref(false)\r\nconst isActive = ref(false)\r\nconst patient = store.state.patientUsername\r\nconst notifications = ref([])\r\nconst viewNotif = ref([])\r\nconst checkImgState = ref(false)\r\nconst queryInput = ref(props.query)\r\n\r\nfunction navbar() {\r\n    isActive.value = !isActive.value\r\n}\r\nasync function logout() {\r\n    store.commit(\"patientID\", null);\r\n    store.commit(\"patientUsername\", '');\r\n    await axios.delete(\"/session/patient\");\r\n    await router.push(\"/account/login\");\r\n    socket.disconnect();\r\n}\r\nfunction notification() {\r\n    isActiveNotifications.value = !isActiveNotifications.value\r\n}\r\nasync function deleteNotif(notif) {\r\n    await axios.post('/api/imgUploadImgMsgDeletePatient', {\r\n        id: 'assets/patientimgmsg/patientCopy/' + notif.id\r\n    });\r\n    socket.emit('delete message', store.state.patientID, notif)\r\n}\r\nfunction openNotif(notif, index) {\r\n    viewNotif.value = notif\r\n    isActiveModal.value = true\r\n    if (viewNotif.value.new) {\r\n        notifications.value[index].new = false\r\n        socket.emit('update message', notifications.value)\r\n    }\r\n}\r\nfunction closeNotificationModal() {\r\n    isActiveModal.value = false\r\n}\r\n</script>\r\n<template>\r\n    <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\"\r\n        :class=\"{ 'provider-finder-mode': providerFinderMode }\"\r\n        style=\"background-color: transparent; border-bottom:  0.5px solid #969696;\">\r\n        <div class=\"navbar-brand\">\r\n            <a class=\"navbar-item\" href=\"/\">\r\n                <img src=\"../assets/images/logos/medi-search-horizontal.png\" />\r\n            </a>\r\n            <router-link :to=\"'/about'\" class=\"navbar-item is-hidden-desktop is-hidden-tablet\">About</router-link>\r\n            <router-link :to=\"'/contactus'\" class=\"navbar-item is-hidden-desktop is-hidden-tablet\">Contact</router-link>\r\n            <a role=\"button\" class=\"navbar-burger\" :class=\"{ 'is-active': isActive }\" aria-label=\"menu\"\r\n                aria-expanded=\"false\" data-target=\"navbar\" @click=\"navbar\">\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n            </a>\r\n        </div>\r\n        <div class=\"navbar-menu\">\r\n            <div class=\"navbar-start\">\r\n                <router-link :to=\"'/about'\" class=\"navbar-item\">About</router-link>\r\n                <router-link :to=\"'/contactus'\" class=\"navbar-item\">Contact</router-link>\r\n            </div>\r\n            <div class=\"field has-addons navbar-item\" style=\"margin-left: auto\" v-if=\"providerFinderMode\">\r\n                <div class=\"control has-icons-left\">\r\n                    <input class=\"input is-rounded\" type=\"text\" v-model=\"queryInput\" style=\"width: 350px;\"\r\n                        placeholder=\"Search...\" list=\"providers\" @keyup.enter=\"$emit('unloadPropData', queryInput)\" />\r\n                    <span class=\"icon is-small is-left has-text-info\">\r\n                        <i class=\"fa-solid fa-location-dot\"></i>\r\n                    </span>\r\n                </div>\r\n                <datalist id=\"providers\">\r\n                    <option v-for=\"geodata in providerProvinces\" :key=\"geodata._id\">\r\n                        {{ geodata.province }}</option>\r\n                    <option v-for=\"provider in providerList\" :key=\"provider._id\">\r\n                        {{ provider.hospital }}</option>\r\n                </datalist>\r\n                <div class=\"control\">\r\n                    <button class=\"button is-info is-rounded\" :disabled=\"queryInput == ''\"\r\n                        @click=\"$emit('unloadPropData', queryInput)\">Search</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div id=\"navbar\" class=\"navbar-menu\" :class=\"{ 'is-active': isActive }\">\r\n            <div class=\"field has-addons navbar-item is-hidden-desktop is-hidden-tablet\" v-if=\"providerFinderMode\">\r\n                <div class=\"control has-icons-left\">\r\n                    <input class=\"input is-rounded\" type=\"text\" v-model=\"queryInput\" style=\"width: 200px;\"\r\n                        placeholder=\"Search...\" list=\"providers\" @keyup.enter=\"$emit('unloadPropData', queryInput)\" />\r\n                    <span class=\"icon is-small is-left has-text-info\">\r\n                        <i class=\"fa-solid fa-location-dot\"></i>\r\n                    </span>\r\n                </div>\r\n                <datalist id=\"providers\">\r\n                    <option v-for=\"geodata in providerProvinces\" :key=\"geodata._id\">\r\n                        {{ geodata.province }}</option>\r\n                    <option v-for=\"provider in providerList\" :key=\"provider._id\">\r\n                        {{ provider.hospital }}</option>\r\n                </datalist>\r\n                <div class=\"control\">\r\n                    <button class=\"button is-info is-rounded\" :disabled=\"queryInput == ''\"\r\n                        @click=\"$emit('unloadPropData', queryInput)\">Search</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"navbar-end\" v-if=\"patient != ''\">\r\n                <div class=\"navbar-item has-dropdown\" :class=\"{ 'is-active': isActiveNotifications }\">\r\n                    <a class=\"navbar-link\" @click=\"notification\"><span class=\"has-text-danger\"\r\n                            v-if=\"notifications.find(x => x.new === true)\"><i\r\n                                class=\"fa-solid fa-bell animate__animated animate__heartBeat animate__infinite\"><span\r\n                                    class=\"is-size-7\">{{\r\n                                        notifications.filter(x =>\r\n                                            x.new).length\r\n                                    }}</span></i></span><span class=\"has-text-info\" v-else><i\r\n                                class=\"fa-solid fa-bell\"></i></span></a>\r\n                    <div class=\"navbar-dropdown is-right notif-list\" v-if=\"notifications.length !== 0\">\r\n                        <div class=\"navbar-item\" v-for=\"(notifs, index) in notifications.sort((a, b) => {\r\n                            return new Date(b.date).getTime() - new Date(a.date).getTime()\r\n                        })\" :key=\"index\">\r\n                            <div class=\"notification is-info\" :class=\"{ 'is-light': !notifs.new }\" style=\"width: 20rem\">\r\n                                <a style=\"text-decoration: none;\" @click=\"openNotif(notifs, index)\">{{ notifs.subject }}\r\n                                    <p class=\"help\">{{\r\n                                        notifs.from == 'Medic Search' ? `From ${notifs.from}` : `From\r\n                                                                            Dr. ${notifs.from}`\r\n                                    }}</p>\r\n                                </a>\r\n                                <button class=\"delete\" @click=\"deleteNotif(notifs)\"></button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"navbar-dropdown is-right\" v-else>\r\n                        <div class=\"navbar-item\">No new notifications.</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"navbar-item has-dropdown\" :class=\"{ 'is-active': isActiveProfileDropdown }\"\r\n                    @click=\"isActiveProfileDropdown = !isActiveProfileDropdown\">\r\n                    <a class=\"navbar-item is-hidden-mobile\" v-if=\"checkImgState\">\r\n                        <figure class=\"image\" v-if=\"store.state.checkProfileImg\">\r\n                            <img class=\"is-rounded\"\r\n                                :src=\"`https://res.cloudinary.com/leindfraust/image/upload/v${new Date().getMonth()}${new Date().getDate()}/assets/patients/${$store.state.patientUsername}.jpg`\">\r\n                        </figure>\r\n                        <figure class=\"image\" v-else>\r\n                            <img class=\"is-rounded\"\r\n                                :src=\"`https://ui-avatars.com/api/?name=${store.state.patientUsername}`\">\r\n                        </figure>\r\n                    </a>\r\n                    <div class=\"navbar-dropdown is-right\">\r\n                        <router-link :to=\"`/user/${patient}/profile`\" class=\"navbar-item\">Profile</router-link>\r\n                        <router-link :to=\"`/user/${patient}/security`\" class=\"navbar-item\">Security</router-link>\r\n                        <hr class=\"navbar-divider\">\r\n                        <a class=\"navbar-item has-text-danger\" @click=\"logout\">\r\n                            <strong>Logout</strong>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"navbar-end\" v-else>\r\n                <div class=\"navbar-item\">\r\n                    <router-link :to=\"'/account/login'\" class=\"button is-dark is-inverted is-medium\"\r\n                        style=\"background-color: transparent\">Sign In</router-link>\r\n                </div>\r\n                <div class=\"navbar-item\">\r\n                    <router-link :to=\"'/user/signup'\" class=\"button is-info is-medium\">\r\n                        <strong>Sign up</strong>\r\n                    </router-link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n    <!--Modal for notifications-->\r\n    <div class=\"modal\" :class=\"{ 'is-active': isActiveModal }\">\r\n        <div class=\"modal-background\"></div>\r\n        <div class=\"modal-content box\">\r\n            <section class=\"section\">\r\n                <p class=\"title\">{{\r\n                    viewNotif.from == 'Medic Search' ? `From ${viewNotif.from}` : `From\r\n                                    Dr. ${viewNotif.from}`\r\n                }}</p>\r\n                <p class=\"subtitle\">{{ new Date(viewNotif.date).toDateString() }}</p>\r\n                <p class=\"subtitle\">{{ viewNotif.message }}</p>\r\n                <div v-if=\"viewNotif.id\">\r\n                    <figure class=\"image is-square\">\r\n                        <img loading=\"lazy\"\r\n                            :src=\"`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/patientCopy/${viewNotif.id}.jpg`\" />\r\n                    </figure>\r\n                    <div class=\"has-text-centered\">\r\n                        <a :href=\"`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/patientCopy/${viewNotif.id}.jpg`\"\r\n                            class=\"button\" download>Download File</a>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <button class=\"modal-close is-large\" aria-label=\"close\" @click=\"closeNotificationModal\"></button>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n.notif-list {\r\n    max-height: 20em;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n}\r\n\r\n.provider-finder-mode {\r\n    padding: 1.5% !important;\r\n    background-color: rgba(216, 229, 255, 0.44) !important;\r\n    box-shadow: 0px 4px 30px rgba(0, 0, 0, 0.1);\r\n    border-bottom: 0px !important;\r\n}\r\n\r\n[list]::-webkit-calendar-picker-indicator {\r\n    opacity: 0 !important;\r\n}\r\n</style>","import script from \"./NavigationTab.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./NavigationTab.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./NavigationTab.vue?vue&type=style&index=0&id=7da9c66a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\ronan\\\\Documents\\\\Projects\\\\Appointment-Scheduler-Webapp\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7da9c66a\"]])\n\nexport default __exports__"],"names":["store","useStore","router","useRouter","onMounted","async","axios","state","patientUsername","then","response","status","commit","catch","err","checkImgState","value","patientID","socket","notifications","isActiveNotifications","ref","isActiveModal","isActiveProfileDropdown","isActive","patient","viewNotif","queryInput","props","query","navbar","logout","push","notification","deleteNotif","notif","id","openNotif","index","new","closeNotificationModal","__exports__"],"sourceRoot":""}