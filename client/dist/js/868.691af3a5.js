"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[868],{1199:function(i,t,e){e.d(t,{Z:function(){return wi}});var s=e(6252),a=e(3577),o=e(475);const n=i=>((0,s.dD)("data-v-74b627be"),i=i(),(0,s.Cn)(),i),l={class:"navbar",role:"navigation","aria-label":"main navigation"},r={class:"navbar-brand"},c=n((()=>(0,s._)("a",{class:"navbar-item",href:"/"},[(0,s._)("img",{src:o})],-1))),d=n((()=>(0,s._)("span",{"aria-hidden":"true"},null,-1))),p=n((()=>(0,s._)("span",{"aria-hidden":"true"},null,-1))),u=n((()=>(0,s._)("span",{"aria-hidden":"true"},null,-1))),h=[d,p,u],g={class:"navbar-start is-hidden-desktop"},v=n((()=>(0,s._)("a",{class:"navbar-item"},"About",-1))),m={key:0,class:"navbar-end"},f={key:0,class:"has-text-danger"},w={class:"fa-solid fa-bell animate__animated animate__heartBeat animate__infinite"},_={class:"is-size-7"},y={key:1,class:"has-text-info"},b=n((()=>(0,s._)("i",{class:"fa-solid fa-bell"},null,-1))),k=[b],D={key:0,class:"navbar-dropdown is-right notif-list"},C=["onClick"],$={class:"help"},A=["onClick"],F={key:1,class:"navbar-dropdown is-right"},U=n((()=>(0,s._)("div",{class:"navbar-item"},"No new notifications.",-1))),N=[U],S={key:0,class:"navbar-item is-hidden-mobile"},H={key:0,class:"image"},L=["src"],z={key:1,class:"image"},M=["src"],P={class:"navbar-dropdown is-right"},x=(0,s.Uk)("Profile"),I=(0,s.Uk)("Security"),q=n((()=>(0,s._)("hr",{class:"navbar-divider"},null,-1))),T=n((()=>(0,s._)("strong",null,"Logout",-1))),Z=[T],B=n((()=>(0,s._)("i",{class:"fa-solid fa-bars"},null,-1))),j=[B],O={class:"navbar-dropdown is-right"},Y=n((()=>(0,s._)("a",{class:"navbar-item"},"About",-1))),K={key:1,class:"navbar-end"},W={class:"navbar-item"},R={class:"buttons"},E=(0,s.Uk)("Log in"),V=n((()=>(0,s._)("strong",null,"Sign up",-1))),G=n((()=>(0,s._)("i",{class:"fa-solid fa-bars"},null,-1))),J=[G],Q={class:"navbar-dropdown is-right"},X=n((()=>(0,s._)("a",{class:"navbar-item"},"About",-1))),ii=n((()=>(0,s._)("div",{class:"modal-background"},null,-1))),ti={class:"modal-content box"},ei={class:"section"},si={class:"title"},ai={class:"subtitle"},oi={class:"subtitle"},ni={key:0},li={class:"image is-square"},ri=["src"],ci={class:"has-text-centered"},di=["href"];function pi(i,t,e,o,n,d){const p=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",l,[(0,s._)("div",r,[c,(0,s._)("a",{role:"button",class:(0,a.C_)(["navbar-burger",{"is-active":n.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:t[0]||(t[0]=(...i)=>d.navbar&&d.navbar(...i))},h,2)]),(0,s._)("div",{id:"navbar",class:(0,a.C_)(["navbar-menu",{"is-active":n.isActive}])},[(0,s._)("div",g,[v,(0,s._)("a",{class:"navbar-item",onClick:t[1]||(t[1]=i=>this.$router.push("/contactus"))},"Contact Us")]),""!=n.patient?((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",{class:(0,a.C_)(["navbar-item has-dropdown",{"is-active":n.isActiveNotifications}])},[(0,s._)("a",{class:"navbar-link",onClick:t[2]||(t[2]=(...i)=>d.notification&&d.notification(...i))},[n.notifications.find((i=>!0===i.new))?((0,s.wg)(),(0,s.iD)("span",f,[(0,s._)("i",w,[(0,s._)("span",_,(0,a.zw)(n.notifications.filter((i=>i.new)).length),1)])])):((0,s.wg)(),(0,s.iD)("span",y,k))]),0!==n.notifications.length?((0,s.wg)(),(0,s.iD)("div",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.notifications.sort(((i,t)=>new Date(t.date).getTime()-new Date(i.date).getTime())),((i,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"navbar-item",key:t},[(0,s._)("div",{class:(0,a.C_)(["notification is-info",{"is-light":!i.new}])},[(0,s._)("a",{style:{"text-decoration":"none"},onClick:e=>d.openNotif(i,t)},[(0,s.Uk)((0,a.zw)(i.subject)+" ",1),(0,s._)("p",$,(0,a.zw)("Med Search"==i.from?`From ${i.from}`:`From\n                                    Dr. ${i.from}`),1)],8,C),(0,s._)("button",{class:"delete",onClick:t=>d.deleteNotif(i)},null,8,A)],2)])))),128))])):((0,s.wg)(),(0,s.iD)("div",F,N))],2),(0,s._)("div",{class:(0,a.C_)(["navbar-item has-dropdown",{"is-active":n.isActiveProfileDropdown}]),onClick:t[4]||(t[4]=i=>n.isActiveProfileDropdown=!n.isActiveProfileDropdown)},[n.checkImgState?((0,s.wg)(),(0,s.iD)("a",S,[i.$store.state.checkProfileImg?((0,s.wg)(),(0,s.iD)("figure",H,[(0,s._)("img",{class:"is-rounded",src:`https://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/patients/${i.$store.state.patientUsername}.jpg`},null,8,L)])):((0,s.wg)(),(0,s.iD)("figure",z,[(0,s._)("img",{class:"is-rounded",src:`https://ui-avatars.com/api/?name=${this.$store.state.patientUsername}`},null,8,M)]))])):(0,s.kq)("",!0),(0,s._)("div",P,[(0,s.Wm)(p,{to:`/user/${n.patient}/profile`,class:"navbar-item"},{default:(0,s.w5)((()=>[x])),_:1},8,["to"]),(0,s.Wm)(p,{to:`/user/${n.patient}/security`,class:"navbar-item"},{default:(0,s.w5)((()=>[I])),_:1},8,["to"]),q,(0,s._)("a",{class:"navbar-item has-text-danger",onClick:t[3]||(t[3]=(...i)=>d.logout&&d.logout(...i))},Z)])],2),(0,s._)("div",{class:(0,a.C_)(["navbar-item has-dropdown is-hidden-mobile",{"is-active":n.isActiveMenuDropdown}])},[(0,s._)("a",{class:"navbar-item",onClick:t[5]||(t[5]=i=>n.isActiveMenuDropdown=!n.isActiveMenuDropdown)},j),(0,s._)("div",O,[Y,(0,s._)("a",{class:"navbar-item",onClick:t[6]||(t[6]=i=>this.$router.push("/contactus"))},"Contact Us")])],2)])):((0,s.wg)(),(0,s.iD)("div",K,[(0,s._)("div",W,[(0,s._)("div",R,[(0,s.Wm)(p,{to:"/user/login",class:"button is-dark is-inverted",style:{"background-color":"transparent"}},{default:(0,s.w5)((()=>[E])),_:1}),(0,s.Wm)(p,{to:"/user/signup",class:"button is-info"},{default:(0,s.w5)((()=>[V])),_:1})])]),(0,s._)("div",{class:(0,a.C_)(["navbar-item has-dropdown is-hidden-mobile",{"is-active":n.isActiveMenuDropdown}])},[(0,s._)("a",{class:"navbar-item",onClick:t[7]||(t[7]=i=>n.isActiveMenuDropdown=!n.isActiveMenuDropdown)},J),(0,s._)("div",Q,[X,(0,s._)("a",{class:"navbar-item",onClick:t[8]||(t[8]=i=>this.$router.push("/contactus"))},"Contact Us")])],2)]))],2)]),(0,s._)("div",{class:(0,a.C_)(["modal",{"is-active":n.isActiveModal}])},[ii,(0,s._)("div",ti,[(0,s._)("section",ei,[(0,s._)("p",si,(0,a.zw)("Med Search"==n.viewNotif.from?`From ${n.viewNotif.from}`:`From\n                Dr. ${n.viewNotif.from}`),1),(0,s._)("p",ai,(0,a.zw)(new Date(n.viewNotif.date).toDateString()),1),(0,s._)("p",oi,(0,a.zw)(n.viewNotif.message),1),n.viewNotif.id?((0,s.wg)(),(0,s.iD)("div",ni,[(0,s._)("figure",li,[(0,s._)("img",{loading:"lazy",src:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/patientCopy/${n.viewNotif.id}.jpg`},null,8,ri)]),(0,s._)("div",ci,[(0,s._)("a",{href:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/patientCopy/${n.viewNotif.id}.jpg`,class:"button",download:""},"Download File",8,di)])])):(0,s.kq)("",!0)])]),(0,s._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[9]||(t[9]=(...i)=>d.closeNotificationModal&&d.closeNotificationModal(...i))})],2)],64)}var ui=e(9669),hi=e.n(ui),gi=e(4058),vi={name:"NavigationTab",async mounted(){await hi().get(`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patients/${this.$store.state.patientUsername}.jpg`).then((i=>200==i.status?this.$store.commit("checkProfileImg",!0):this.$store.commit("checkProfileImg",!1))).catch((i=>i?this.$store.commit("checkProfileImg",!1):this.$store.commit("checkProfileImg",!0))),this.checkImgState=!0,this.$store.state.patientID&&(gi.Z.connect(),gi.Z.emit("join room",this.$store.state.patientID),gi.Z.on("send messages",(i=>{this.notifications=i})),gi.Z.on("delete messages",(i=>{this.notifications=i})),gi.Z.on("messages",(i=>{this.notifications=i})))},data(){return{isActiveNotifications:!1,isActiveModal:!1,isActiveProfileDropdown:!1,isActiveMenuDropdown:!1,isActive:!1,patient:this.$store.state.patientUsername,notifications:[],viewNotif:[],checkImgState:!1}},methods:{navbar(){this.isActive=!this.isActive},async logout(){await this.$store.commit("patientID",null),await this.$store.commit("patientUsername",""),await hi()["delete"]("/session/patient"),await this.$router.push("/user/login"),gi.Z.disconnect()},notification(){this.isActiveNotifications=!this.isActiveNotifications},async deleteNotif(i){await hi().post("/api/imgUploadImgMsgDeletePatient",{id:"assets/patientimgmsg/patientCopy/"+i.id}),gi.Z.emit("delete message",this.$store.state.patientID,i)},openNotif(i,t){this.viewNotif=i,this.isActiveModal=!0,this.viewNotif.new&&(this.notifications[t].new=!1,gi.Z.emit("update message",this.notifications))},closeNotificationModal(){this.isActiveModal=!1}}},mi=e(3744);const fi=(0,mi.Z)(vi,[["render",pi],["__scopeId","data-v-74b627be"]]);var wi=fi},2868:function(i,t,e){e.r(t),e.d(t,{default:function(){return Li}});var s=e(6252),a=e(3577),o=e(9963);const n=i=>((0,s.dD)("data-v-b76452ec"),i=i(),(0,s.Cn)(),i),l={id:"background"},r=n((()=>(0,s._)("div",{class:"modal-background"},null,-1))),c=n((()=>(0,s._)("div",{class:"modal-content",style:{overflow:"hidden"}},[(0,s._)("div",{class:"loader",style:{margin:"auto"}})],-1))),d=[r,c],p=n((()=>(0,s._)("div",{class:"block is-hidden-desktop"},null,-1))),u={key:0},h={class:"columns is-mobile",style:{overflow:"auto"}},g={class:"column is-narrow"},v={class:"doprdown-trigger"},m=n((()=>(0,s._)("span",{class:"icon is-small"},[(0,s._)("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1))),f={class:"dropdown-menu"},w={class:"dropdown-content",style:{overflow:"hidden"}},_={class:"dropdown-item"},y=["onClick"],b={class:"column is-narrow"},k={class:"doprdown-trigger"},D=n((()=>(0,s._)("span",{class:"icon is-small"},[(0,s._)("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1))),C={class:"dropdown-menu"},$={class:"dropdown-content"},A={class:"dropdown-item"},F={class:"dropdown-item"},U={class:"dropdown-item"},N={class:"column is-narrow"},S=n((()=>(0,s._)("span",null,"Distance",-1))),H={class:"icon is-small"},L={key:0,class:"fas fa-angle-down","aria-hidden":"true"},z={key:1,class:"fas fa-angle-up","aria-hidden":"true"},M={class:"column is-narrow"},P={class:"select is-rounded"},x=n((()=>(0,s._)("option",{value:"",disabled:""},"Specialist",-1))),I=n((()=>(0,s._)("option",{value:""},"Any",-1))),q=["value"],T={class:"column has-text-right"},Z={class:"dropdown-trigger"},B={class:"field has-addons"},j={class:"control has-icons-left"},O=n((()=>(0,s._)("span",{class:"icon is-small is-left"},[(0,s._)("i",{class:"fa-solid fa-location-dot"})],-1))),Y={class:"control"},K=["disabled"],W={class:"dropdown-menu"},R={key:0,class:"dropdown-content has-text-left"},E=["onClick"],V={key:1,class:"dropdown-content has-text-left"},G=n((()=>(0,s._)("p",{class:"dropdown-item has-text-danger"}," Region not found or supported, please try again. ",-1))),J=[G],Q={key:0,class:"block"},X=n((()=>(0,s._)("div",{class:"notification box",id:"notification",style:{width:"50%",margin:"auto","background-color":"white"}},[(0,s.Uk)(" You must "),(0,s._)("a",{class:"has-text-success",href:"/user/login"},"login"),(0,s.Uk)(". or "),(0,s._)("a",{class:"has-text-danger",href:"/user/signup"},"create an account"),(0,s.Uk)(". to make an appointment. ")],-1))),ii=[X],ti={class:"columns"},ei={key:0,class:"column",style:{"max-height":"100vh",overflow:"auto"}},si={class:"container is-fluid"},ai={class:"column is-5"},oi=["onClick"],ni={class:"image is-3by2 is-rounded"},li=["src"],ri={class:"column"},ci={key:0,class:"notification is-info is-light"},di=["onClick"],pi={class:"title is-4"},ui={class:"subtitle is-6"},hi=n((()=>(0,s._)("br",null,null,-1))),gi={class:"content"},vi=n((()=>(0,s._)("b",null,"Type of Facility:",-1))),mi={key:0},fi={class:"subtitle is-6"},wi=n((()=>(0,s._)("b",null,"Contacts:",-1))),_i=(0,s.Uk)(),yi=n((()=>(0,s._)("hr",null,null,-1))),bi={key:0,class:"column notification is-danger is-light has-text-centered"},ki={key:1,class:"column notification is-danger is-light has-text-centered"},Di={class:"column is-5"},Ci=["src"];function $i(i,t,e,n,r,c){const G=(0,s.up)("NavigationTab");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(G),(0,s._)("div",{class:(0,a.C_)(["modal",{"is-active":r.isHospitalLoading}])},d,2),p,""!=r.citiesOrMunicipalities?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",h,[(0,s._)("div",g,[(0,s._)("div",{class:(0,a.C_)(["dropdown",{"is-active":r.cityMunicipalityFilter}])},[(0,s._)("div",v,[(0,s._)("button",{class:"button is-rounded",onClick:t[0]||(t[0]=i=>r.cityMunicipalityFilter=!r.cityMunicipalityFilter)},[(0,s._)("span",null,(0,a.zw)(""==r.city?"City/Municipality":r.city),1),m])]),(0,s._)("div",f,[(0,s._)("div",w,[(0,s._)("div",_,[(0,s._)("a",{onClick:t[1]||(t[1]=i=>c.filterByCity(""))},"Any")]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.citiesOrMunicipalities.citiesOrMunicipalities.sort(((i,t)=>i.name>t.name?1:-1)),((i,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"dropdown-item",key:t},[(0,s._)("a",{onClick:t=>c.filterByCity(i.name)},(0,a.zw)(i.name),9,y)])))),128))])])],2)]),(0,s._)("div",b,[(0,s._)("div",{class:(0,a.C_)(["dropdown",{"is-active":r.facilityTypeFilter}])},[(0,s._)("div",k,[(0,s._)("button",{class:"button is-rounded",onClick:t[2]||(t[2]=i=>r.facilityTypeFilter=!r.facilityTypeFilter)},[(0,s._)("span",null,(0,a.zw)(null==r.typeFilter?"Type of Facility":r.typeFilter),1),D])]),(0,s._)("div",C,[(0,s._)("div",$,[(0,s._)("div",A,[(0,s._)("a",{onClick:t[3]||(t[3]=(...i)=>c.filterAll&&c.filterAll(...i))},"All ")]),(0,s._)("div",F,[(0,s._)("a",{onClick:t[4]||(t[4]=(...i)=>c.filterPublic&&c.filterPublic(...i))},"Public ")]),(0,s._)("div",U,[(0,s._)("a",{onClick:t[5]||(t[5]=(...i)=>c.filterPrivate&&c.filterPrivate(...i))},"Private ")])])])],2)]),(0,s._)("div",N,[(0,s._)("button",{class:"button is-rounded",onClick:t[6]||(t[6]=(...i)=>c.filterDistanceToggle&&c.filterDistanceToggle(...i))},[S,(0,s._)("span",H,[r.distanceFilter?((0,s.wg)(),(0,s.iD)("i",L)):((0,s.wg)(),(0,s.iD)("i",z))])])]),(0,s._)("div",M,[(0,s._)("div",P,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[7]||(t[7]=i=>r.filterSpecialist=i),onChange:t[8]||(t[8]=(...i)=>c.filterBySpecialization&&c.filterBySpecialization(...i))},[x,I,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.specializations,(i=>((0,s.wg)(),(0,s.iD)("option",{key:i,value:i},(0,a.zw)(i),9,q)))),128))],544),[[o.bM,r.filterSpecialist]])])]),(0,s._)("div",T,[(0,s._)("div",{class:(0,a.C_)(["dropdown",{"is-active":r.isActiveDropdown}])},[(0,s._)("div",Z,[(0,s._)("div",B,[(0,s._)("div",j,[(0,s.wy)((0,s._)("input",{class:"input",type:"text","onUpdate:modelValue":t[9]||(t[9]=i=>r.province=i),style:{width:"300px"},placeholder:"What region are you located?",onInput:t[10]||(t[10]=(...i)=>c.regionSelect&&c.regionSelect(...i))},null,544),[[o.nr,r.province]]),O]),(0,s._)("div",Y,[(0,s._)("button",{class:"button is-info is-rounded",onClick:t[11]||(t[11]=i=>c.loadProvider()),disabled:""==r.province},"Search",8,K)])]),(0,s._)("div",W,[0!==Object.keys(c.geolocationIndexed).length?((0,s.wg)(),(0,s.iD)("div",R,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.geolocationIndexed,(i=>((0,s.wg)(),(0,s.iD)("a",{class:"dropdown-item",key:i._id,onClick:t=>c.selectRegion(i.province)},(0,a.zw)(i.province),9,E)))),128))])):((0,s.wg)(),(0,s.iD)("div",V,J))])])],2)])]),0==this.checkUser?((0,s.wg)(),(0,s.iD)("div",Q,ii)):(0,s.kq)("",!0),(0,s._)("div",ti,[0!==r.geoHospitalNearestUser.length?((0,s.wg)(),(0,s.iD)("div",ei,[(0,s._)("div",si,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.geoHospitalNearestUserIndexed,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"columns has-text-left",id:"hospital",style:{"margin-bottom":"5%"},key:e},[(0,s._)("div",ai,[(0,s._)("a",{onClick:e=>r.checkUser?c.bookAppointment(t):i.$router.push("/user/login")},[(0,s._)("figure",ni,[(0,s._)("img",{loading:"lazy",style:{"border-radius":"10px"},src:`https://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/managers/${t.hospital}.jpg`},null,8,li)])],8,oi)]),(0,s._)("div",ri,[r.filterSpecialist&&0!==t?.specialistArrFilter?((0,s.wg)(),(0,s.iD)("div",ci,(0,a.zw)(t?.specialistArrFilter)+" available "+(0,a.zw)(r.filterSpecialist),1)):(0,s.kq)("",!0),(0,s._)("a",{onClick:e=>r.checkUser?c.bookAppointment(t):i.$router.push("/user/login")},[(0,s._)("h1",pi,(0,a.zw)(t.hospital),1),(0,s._)("p",ui,(0,a.zw)(t.barangayORStreet)+", "+(0,a.zw)(t.city)+", "+(0,a.zw)(t.province),1)],8,di),hi,(0,s._)("div",gi,[vi,(0,s.Uk)(" "+(0,a.zw)(t.type)+" ",1),"undefined"!==typeof t.details[0].contacts?((0,s.wg)(),(0,s.iD)("span",mi,[(0,s._)("p",fi,[wi,_i,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.details[0].contacts,((i,t)=>((0,s.wg)(),(0,s.iD)("span",{key:t},(0,a.zw)(i.contact+" "),1)))),128))])])):(0,s.kq)("",!0)])]),yi])))),128))]),0==c.geoHospitalNearestUserIndexed.length?((0,s.wg)(),(0,s.iD)("div",bi," Sorry, no Hospitals/Clinics has been found. ")):(0,s.kq)("",!0)])):r.isHospitalLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ki," Hospitals/Clinics not found, please try again or search another region. ")),(0,s._)("div",Di,[(0,s._)("iframe",{loading:"lazy",id:"geoIframe",src:`https://maps.google.com/maps?q=${r.userLatitude},${r.userLongitude}&hl=es;z=14&output=embed`},null,8,Ci)])])])):(0,s.kq)("",!0)])}var Ai=e(9669),Fi=e.n(Ai),Ui=e(1199),Ni={name:"HospitalFinder",computed:{geolocationIndexed(){return this.geolocation.filter((i=>i.province.toLowerCase().includes(this.province.toLowerCase())))},geoHospitalNearestUserIndexed(){return this.geoHospitalNearestUser&&this.filterSpecialist?this.geoHospitalNearestUser.filter((i=>i.hospital.toLowerCase().includes(this.hospital.toLowerCase()))).filter((i=>i?.specialistArrFilter>0)).filter((i=>null==this.typeFilter?"Private"==i.type||"Public"==i.type:i.type==this.typeFilter)).filter((i=>i.city.includes(this.city))):!!this.geoHospitalNearestUser&&this.geoHospitalNearestUser.filter((i=>i.hospital.toLowerCase().includes(this.hospital.toLowerCase()))).filter((i=>null==this.typeFilter?"Private"==i.type||"Public"==i.type:i.type==this.typeFilter)).filter((i=>i.city.includes(this.city)))}},async mounted(){await Fi().get("/api/geolocation").then((i=>this.geolocation=i.data)),null!==this.$store.state.patientID?this.checkUser=!0:this.checkUser=!1,await this.loadProvider()},data(){return{city:"",isHospitalLoading:!1,checkUser:"",hospital:"",geolocation:[],typeFilter:null,citiesOrMunicipalities:[],province:this.$route.query.name,userLatitude:this.$route.query.userLat,userLongitude:this.$route.query.userLong,isActiveDropdown:!1,geoHospitalNearestUser:"",specializations:this.$store.getters.getSpecializationList,filterSpecialist:this.$route.query.symptom,distanceFilter:!1,cityMunicipalityFilter:!1,facilityTypeFilter:!1,doctorSpecialistFilter:[],provincePrompt:!1}},methods:{async bookAppointment(i){this.$store.commit("hospitalDetails",i),await Fi().put(`/api/manager/${i._id}`,{engagements:i.engagements+1}),await this.$router.push(`/user/${this.$store.state.patientUsername}/${i._id}/doctors`)},regionSelect(){this.isActiveDropdown=!0},filterByCity(i){this.city=i},filterAll(){this.typeFilter=null},filterPrivate(){this.typeFilter="Private"},filterPublic(){this.typeFilter="Public"},filterDistanceToggle(){this.isHospitalLoading=!0,this.geoHospitalNearestUser.sort(((i,t)=>this.distanceFilter?t.distance-i.distance:i.distance-t.distance)),this.distanceFilter=!this.distanceFilter,this.isHospitalLoading=!1},selectRegion(i){this.province=i,this.isActiveDropdown=!1},async loadProvider(){this.isHospitalLoading=!0,await this.geolocation.find((i=>i.province===this.province))&&(this.$router.push({path:"/provider",query:{name:this.province,symptom:this.filterSpecialist,userLat:this.userLatitude,userLong:this.userLongitude}}),this.citiesOrMunicipalities=this.geolocation.find((i=>i.province===this.province)),await Fi().post("/api/geoFindHospitalNearestUser",{province:this.province,latitude:parseFloat(this.userLatitude),longitude:parseFloat(this.userLongitude)}).then((i=>this.geoHospitalNearestUser=i.data)),document.getElementById("background").style.background="none",this.filterSpecialist&&await this.filterBySpecialization()),this.isHospitalLoading=!1},async filterBySpecialization(){this.isHospitalLoading=!0,this.doctorSpecialistFilter=[],this.$router.push({path:"/provider",query:{name:this.province,symptom:this.filterSpecialist,userLat:this.userLatitude,userLong:this.userLongitude}}),await Fi().get("/api/doctor/filteration").then((i=>{this.geoHospitalNearestUser.forEach((t=>this.doctorSpecialistFilter.push(i.data.filter((i=>i.hospitalOrigin.find((i=>i.hospital==t.hospital))&&i.specialist.find((i=>i==this.filterSpecialist&&t.specializations.find((i=>i.specialist==this.filterSpecialist))))&&i.schedule.find((i=>i.hospital==t.hospital&&new Date(i.id)>new Date)))).length)))})),this.geoHospitalNearestUser.forEach(((i,t)=>i["specialistArrFilter"]=this.doctorSpecialistFilter[t])),this.geoHospitalNearestUser.sort(((i,t)=>t.specialistArrFilter-i.specialistArrFilter)),this.isHospitalLoading=!1}},components:{NavigationTab:Ui.Z}},Si=e(3744);const Hi=(0,Si.Z)(Ni,[["render",$i],["__scopeId","data-v-b76452ec"]]);var Li=Hi},475:function(i,t,e){i.exports=e.p+"img/medi-search-horizontal.d15d9e4c.png"}}]);
//# sourceMappingURL=868.691af3a5.js.map