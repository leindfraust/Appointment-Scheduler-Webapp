"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[823],{7787:function(e,t,a){a.d(t,{Z:function(){return r}});var s=a(6252),l=a(2262),i=a(3577);const n={key:0,class:"notification is-danger"};var o={__name:"CatchError",props:{errMsg:null},setup(e){const t=e,a=(0,s.Fl)((()=>t.errMsg));return(e,t)=>{const o=(0,s.up)("router-link");return(0,l.SU)(a)?((0,s.wg)(),(0,s.iD)("div",n,[(0,s.Uk)("Sorry, something went wrong. "+(0,i.zw)((0,l.SU)(a).message)+", please try again later or ",1),(0,s.Wm)(o,{to:"/contactus"},{default:(0,s.w5)((()=>[(0,s.Uk)("contact us")])),_:1}),(0,s.Uk)(". ")])):(0,s.kq)("",!0)}}};const c=o;var r=c},8618:function(e,t,a){a.d(t,{Z:function(){return Z}});var s=a(6252),l=a(3577);const i=e=>((0,s.dD)("data-v-1bc7b8b5"),e=e(),(0,s.Cn)(),e),n={class:"navbar is-hidden-desktop"},o={class:"navbar-brand"},c={class:"navbar-item"},r={class:"label"},u=i((()=>(0,s._)("span",{"aria-hidden":"true"},null,-1))),d=i((()=>(0,s._)("span",{"aria-hidden":"true"},null,-1))),p=i((()=>(0,s._)("span",{"aria-hidden":"true"},null,-1))),v=[u,d,p],h={class:"has-text-centered block",style:{padding:"5px"}},m={class:"is-hidden-mobile is-hidden-touch image image-outer is-square",style:{margin:"auto"}},_=["src"],g={key:0,class:"title is-6"},b={class:"menu-list block"},w=i((()=>(0,s._)("p",{class:"menu-label"},"General",-1))),y=i((()=>(0,s._)("p",{class:"menu-label"},"Verification and Information",-1))),k=i((()=>(0,s._)("p",{class:"menu-label"},"Support",-1))),f={class:"block has-text-centered"};function D(e,t,a,i,u,d){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",n,[(0,s._)("div",o,[(0,s._)("a",c,[(0,s._)("label",r,"Dr. "+(0,l.zw)(e.$store.state.doctorName),1)]),(0,s._)("a",{role:"button",class:(0,l.C_)(["navbar-burger",{"is-active":!u.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:t[0]||(t[0]=(...e)=>d.menuNav&&d.menuNav(...e))},v,2)])]),(0,s._)("aside",{class:(0,l.C_)(["menu box",{"is-hidden-mobile":u.isActive,fixedMenu:u.isActive}]),style:{"background-color":"#D8E5FF",padding:"20px"}},[(0,s._)("div",h,[(0,s._)("figure",m,[(0,s._)("img",{class:"is-rounded image-inner",src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${u.alias}.jpg`},null,8,_)]),u.isActive?((0,s.wg)(),(0,s.iD)("h5",g,"Dr. "+(0,l.zw)(e.$store.state.doctorName),1)):(0,s.kq)("",!0)]),(0,s._)("ul",b,[w,(0,s._)("li",null,[(0,s._)("a",{onClick:t[1]||(t[1]=(...e)=>d.routeHome&&d.routeHome(...e))},"Appointments")]),(0,s._)("li",null,[(0,s._)("a",{onClick:t[2]||(t[2]=(...e)=>d.openPatientHistory&&d.openPatientHistory(...e))},"Appointment History")]),(0,s._)("li",null,[(0,s._)("a",{onClick:t[3]||(t[3]=(...e)=>d.openPatientAppointmentsCancelled&&d.openPatientAppointmentsCancelled(...e))},"Cancelled Appointments")]),(0,s._)("li",null,[(0,s._)("a",{onClick:t[4]||(t[4]=(...e)=>d.openSchedule&&d.openSchedule(...e))},"Schedule")]),y,(0,s._)("li",null,[(0,s._)("a",{onClick:t[5]||(t[5]=(...e)=>d.openProfile&&d.openProfile(...e))},"Profile")]),(0,s._)("li",null,[(0,s._)("a",{onClick:t[6]||(t[6]=(...e)=>d.openSecurity&&d.openSecurity(...e))},"Security")]),(0,s._)("li",null,[(0,s._)("a",{onClick:t[7]||(t[7]=(...e)=>d.openPayment&&d.openPayment(...e))},"Payment")]),k,(0,s._)("li",null,[(0,s._)("a",{onClick:t[8]||(t[8]=e=>this.$router.push("/contactus"))},"Contact Us")])]),(0,s._)("div",f,[(0,s._)("button",{onClick:t[9]||(t[9]=(...e)=>d.logout&&d.logout(...e)),class:"button is-link is-rounded",type:"button"},"Logout")])],2)],64)}var C=a(4239),x=a(8945),H={name:"AdminMenu",data(){return{alias:C.Z.state.alias,isActive:!0}},methods:{async logout(){C.Z.commit("alias",null),await x.Z["delete"]("/session/doctor"),await this.$router.push("/account/login")},async routeHome(){await this.$router.push(`/doctor/${this.alias}/appointments`)},async openProfile(){await this.$router.push(`/doctor/${this.alias}/profile`)},async openPatientHistory(){await this.$router.push(`/doctor/${this.alias}/appointments/history`)},async openPatientAppointmentsCancelled(){await this.$router.push(`/doctor/${this.alias}/appointments/cancelled`)},async openSecurity(){await this.$router.push(`/doctor/${this.alias}/security`)},async openSchedule(){await this.$router.push(`/doctor/${this.alias}/schedule`)},async openPayment(){await this.$router.push(`/doctor/${this.alias}/payment`)},menuNav(){this.isActive=!this.isActive}}},S=a(3744);const $=(0,S.Z)(H,[["render",D],["__scopeId","data-v-1bc7b8b5"]]);var Z=$},1823:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ze}});var s=a(6252),l=a(3577),i=a(9963),n=a(2262),o=a(8945),c=a(7739),r=a.n(c),u=a(7787),d=a(8618),p=a(4058),v=a(3907);const h={class:"main-doctor"},m={class:"columns"},_={class:"column is-2"},g={class:"column"},b=(0,s._)("div",{class:"modal-background"},null,-1),w={class:"modal-content"},y={class:"section box"},k={class:"field is-horizontal"},f={class:"field-body"},D={class:"field"},C={class:"control"},x=(0,s._)("label",{class:"label"},"From:",-1),H=["value"],S={class:"field"},$={class:"control"},Z=(0,s._)("div",{class:"label"},"To(Patient):",-1),I=["value"],N={class:"field"},z={class:"control"},A=(0,s._)("label",{class:"label"},"Attach an image(optional):",-1),M={class:"field"},P={class:"control"},U=(0,s._)("label",{class:"label"},"Subject: ",-1),j={class:"field"},L={class:"control"},F=(0,s._)("label",{class:"label"},"Message:",-1),q={class:"field"},T={class:"control has-text-right"},Y=["disabled"],O={key:0,class:"has-text-success"},V=(0,s._)("p",{class:"subtitle"},"Messaging History",-1),E={key:1,class:"container"},K=(0,s._)("p",{class:"subtitle is-size-6 has-text-right"},"Are you sure you want to delete all messages?",-1),R={class:"buttons is-right"},W={key:2},B={class:"notification",style:{margin:"5%"}},G={class:"content"},J={key:0},Q={class:"image is-square"},X=["src"],ee={class:"has-text-centered"},te=["href"],ae=(0,s._)("br",null,null,-1),se=["onClick"],le={key:3},ie=(0,s._)("p",null,"No past messages yet.",-1),ne=[ie],oe={class:"section"},ce={class:"container is-widescreen is-fullhd",style:{padding:"15"}},re=(0,s._)("h1",{class:"title"}," APPOINTMENT HISTORY ",-1),ue={key:0,class:"field"},de={class:"control"},pe={key:1,class:"container"},ve={class:"subtitle has-text-black"},he={class:"table-container"},me={class:"table is-fullwidth"},_e=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"has-text-black-ter"},"Controls"),(0,s._)("th",{class:"has-text-black-ter"},"Reference ID"),(0,s._)("th",{class:"has-text-black-ter"},"Priority No."),(0,s._)("th",{class:"has-text-black-ter"},"Hospital Appointed"),(0,s._)("th",{class:"has-text-black-ter"},"First Name"),(0,s._)("th",{class:"has-text-black-ter"},"Last Name"),(0,s._)("th",{class:"has-text-black-ter"},"Contact Number"),(0,s._)("th",{class:"has-text-black-ter"},"Birthday"),(0,s._)("th",{class:"has-text-black-ter"},"Symptoms/Comments")])],-1),ge=["onClick"],be={class:"has-text-black-ter"},we={class:"has-text-black-ter"},ye={class:"has-text-black-ter"},ke={class:"has-text-black-ter"},fe={class:"has-text-black-ter"},De={class:"has-text-black-ter"},Ce={class:"has-text-black-ter"},xe={class:"has-text-black-ter",style:{"white-space":"pre-wrap"}},He={key:2,class:"notification is-info"};var Se={__name:"DoctorPatientHistory",setup(e){const t=(0,v.oR)();(0,s.bv)((async()=>{await o.Z.post("/api/appointmentList/doctors",{id:t.state.doctorID,ongoing:!1}).then((e=>$e.value=e.data)),await o.Z.get("/session/doctor").then((e=>Me.value=e.data.fullname)),await o.Z.get("/session/doctor").then((e=>Le.value=e.data.messageHistory.reverse()))}));const a=(0,n.iH)(""),c=(0,n.iH)(!1),ie=(0,n.iH)(!1),Se=(0,n.iH)(""),$e=(0,n.iH)([]),Ze=(0,n.iH)(null),Ie=(0,n.iH)(!1),Ne=(0,n.iH)(""),ze=(0,n.iH)(""),Ae=(0,n.iH)(""),Me=(0,n.iH)(""),Pe=(0,n.iH)(""),Ue=(0,n.iH)("Dear"),je=(0,n.iH)(!1),Le=(0,n.iH)([]),Fe=(0,s.Fl)((()=>!!$e.value&&r()($e.value.filter((e=>e.firstName.toLowerCase().includes(Se.value.toLowerCase())||e.lastName.toLowerCase().includes(Se.value.toLowerCase())||e.referenceID.toLowerCase().includes(Se.value.toLowerCase()))).sort(((e,t)=>new Date(t.schedule[0].date).getTime()-new Date(e.schedule[0].date).getTime())),"schedule[0].date")));function qe(e,t,a){Ie.value=!0,Ne.value=t+" "+a,Ue.value=`Dear Ms/Mr. ${Ne.value},`,p.Z.connect(),p.Z.emit("join room",e)}function Te(){Ie.value=!1,Ne.value="",p.Z.disconnect()}function Ye(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length;for(let s=0;s<12;s++)e+=t.charAt(Math.floor(Math.random()*a));Ae.value=e}async function Oe(){if(ie.value=!0,Ze.value){Ye();const e=new FormData;e.append("id",Ae.value),e.append("doctorID",t.state.doctorID),e.append("imgFile",Ze.value),await o.Z.post("/api/imgUploadImgMsg",e,{headers:{"Content-Type":"multipart/form-data"}})}else Ae.value=null;let e;ze.value=Ne.value,p.Z.emit("message",Ae.value,Pe.value,Ue.value,Me.value,new Date),await o.Z.post("/api/pushMsg",{id:t.state.doctorID,message:{id:Ae.value,to:Ne.value,subject:Pe.value,message:Ue.value,date:new Date}}).then((t=>e=t.data)).catch((e=>a.value=e)),await o.Z.put("/session/doctor",{messageHistory:e}),Le.value=e.reverse(),Ue.value="",je.value=!0,ie.value=!1}async function Ve(e){let s;try{await o.Z.post("/api/imgUploadImgMsgDeleteDoctor",{doctorID:"assets/patientimgmsg/doctorCopy/"+t.state.doctorID,id:e.id}),await o.Z.post("/api/pullMsg",{id:t.state.doctorID,message:e}).then((e=>s=e.data)).catch((e=>{a.value=e})),await o.Z.put("/session/doctor",{messageHistory:s})}catch(l){a.value=l}Le.value=s.reverse()}async function Ee(){try{await o.Z.post("/api/imgUploadImgMsgClearDoctor",{doctorID:t.state.doctorID}),await o.Z.post("/api/clearMsg",{id:t.state.doctorID}).then((e=>Le.value=e.data)).catch((e=>a.value=e)),await o.Z.put("/session/doctor",{messageHistory:Le.value})}catch(e){a.value=e}c.value=!1}function Ke(e){Ze.value=e.target.files[0]}return(e,t)=>((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",m,[(0,s._)("div",_,[(0,s.Wm)(d.Z)]),(0,s._)("div",g,[(0,s._)("div",{class:(0,l.C_)(["modal",{"is-active":Ie.value}])},[b,(0,s._)("div",w,[(0,s._)("div",y,[(0,s._)("div",k,[(0,s._)("div",f,[(0,s._)("div",D,[(0,s._)("div",C,[x,(0,s._)("input",{class:"input",type:"text",value:"Dr. "+Me.value,disabled:""},null,8,H)])]),(0,s._)("div",S,[(0,s._)("div",$,[Z,(0,s._)("input",{class:"input",type:"text",value:Ne.value,disabled:""},null,8,I)])])])]),(0,s._)("div",N,[(0,s._)("div",z,[A,(0,s._)("input",{class:"input",type:"file",onChange:t[0]||(t[0]=e=>Ke(e))},null,32)])]),(0,s._)("div",M,[(0,s._)("div",P,[U,(0,s.wy)((0,s._)("input",{class:"input",type:"text",placeholder:"Subject","onUpdate:modelValue":t[1]||(t[1]=e=>Pe.value=e)},null,512),[[i.nr,Pe.value]])])]),(0,s._)("div",j,[(0,s._)("div",L,[F,(0,s.wy)((0,s._)("textarea",{class:"textarea",placeholder:"Message","onUpdate:modelValue":t[2]||(t[2]=e=>Ue.value=e)},"default value",512),[[i.nr,Ue.value]])])]),(0,s._)("div",q,[(0,s._)("div",T,[(0,s._)("button",{class:(0,l.C_)(["button is-primary",{"is-loading":ie.value}]),onClick:Oe,disabled:""==Ne.value||""==Ue.value},"Send",10,Y)])]),je.value?((0,s.wg)(),(0,s.iD)("p",O,[(0,s.Uk)(" A message has been sent to "),(0,s._)("b",null,(0,l.zw)(ze.value),1),(0,s.Uk)(". ")])):(0,s.kq)("",!0),(0,s._)("a",{class:"button is-size-6 has-text-danger is-pulled-right",onClick:t[3]||(t[3]=e=>c.value=!0)},"Clear message history"),V,c.value?((0,s.wg)(),(0,s.iD)("div",E,[K,(0,s._)("div",R,[(0,s._)("button",{class:"button",onClick:Ee},"Yes"),(0,s._)("button",{class:"button",onClick:t[4]||(t[4]=e=>c.value=!1)},"No")])])):(0,s.kq)("",!0),0!==Object.keys(Le.value).length?((0,s.wg)(),(0,s.iD)("div",W,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Le.value,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{class:"container",key:a},[(0,s._)("div",B,[(0,s._)("div",G,[(0,s._)("p",null,"To: "+(0,l.zw)(t.to),1),(0,s._)("p",null,"Subject: "+(0,l.zw)(t.subject),1),(0,s._)("p",null,"Message: "+(0,l.zw)(t.message),1),t.id?((0,s.wg)(),(0,s.iD)("div",J,[(0,s._)("figure",Q,[(0,s._)("img",{loading:"lazy",src:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/doctorCopy/${e.$store.state.doctorID+t.id}.jpg`},null,8,X)]),(0,s._)("div",ee,[(0,s._)("a",{href:`https://res.cloudinary.com/leindfraust/image/upload/v1/assets/patientimgmsg/doctorCopy/${e.$store.state.doctorID+t.id}.jpg`,class:"button",download:""},"Download File",8,te)])])):(0,s.kq)("",!0),ae,(0,s._)("p",null,"Date: "+(0,l.zw)(new Date(t.date).toLocaleString()),1)]),(0,s._)("button",{class:"delete",onClick:e=>Ve(t)},null,8,se)])])))),128))])):((0,s.wg)(),(0,s.iD)("div",le,ne))])]),(0,s._)("button",{class:"modal-close is-large","aria-label":"close",onClick:Te})],2),(0,s._)("section",oe,[(0,s.Wm)(u.Z,{"err-msg":a.value},null,8,["err-msg"]),(0,s._)("div",ce,[re,0!==$e.value.length?((0,s.wg)(),(0,s.iD)("div",ue,[(0,s._)("div",de,[(0,s.wy)((0,s._)("input",{class:"input",type:"text",style:{width:"50% !important"},"onUpdate:modelValue":t[5]||(t[5]=e=>Se.value=e),placeholder:"Search..."},null,512),[[i.nr,Se.value]])])])):(0,s.kq)("",!0),0!==Object.keys((0,n.SU)(Fe)).length?((0,s.wg)(),(0,s.iD)("div",pe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,n.SU)(Fe),((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["box",{"is-hidden":new Date(t).toDateString()==(new Date).toDateString()}]),key:t},[(0,s._)("h1",ve,"Schedule: "+(0,l.zw)(new Date(t).toDateString()),1),(0,s._)("div",he,[(0,s._)("table",me,[_e,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("button",{class:"button is-info is-light",onClick:t=>qe(e.patientID,e.firstName,e.lastName)},"Send a notification",8,ge),(0,s._)("th",be,(0,l.zw)(e.referenceID),1),(0,s._)("th",we,(0,l.zw)(e.priorityNum),1),(0,s._)("th",ye,(0,l.zw)(e.hospital),1),(0,s._)("td",ke,(0,l.zw)(e.firstName),1),(0,s._)("td",fe,(0,l.zw)(e.lastName),1),(0,s._)("td",De,(0,l.zw)(e.contactNum),1),(0,s._)("td",Ce,(0,l.zw)(e.birthDay),1),(0,s._)("td",xe,(0,l.zw)(e.comments),1)])))),128))])])])],2)))),128))])):((0,s.wg)(),(0,s.iD)("div",He,"No previous appointments."))])])])])]))}};const $e=Se;var Ze=$e}}]);
//# sourceMappingURL=823.6e23a750.js.map