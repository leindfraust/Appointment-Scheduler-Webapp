"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[516],{7787:function(i,t,s){s.d(t,{Z:function(){return r}});var a=s(6252),e=s(2262),l=s(3577);const o={key:0,class:"notification is-danger"};var c={__name:"CatchError",props:{errMsg:null},setup(i){const t=i,s=(0,a.Fl)((()=>t.errMsg));return(i,t)=>{const c=(0,a.up)("router-link");return(0,e.SU)(s)?((0,a.wg)(),(0,a.iD)("div",o,[(0,a.Uk)("Sorry, something went wrong. "+(0,l.zw)((0,e.SU)(s).message)+", please try again later or ",1),(0,a.Wm)(c,{to:"/contactus"},{default:(0,a.w5)((()=>[(0,a.Uk)("contact us")])),_:1}),(0,a.Uk)(". ")])):(0,a.kq)("",!0)}}};const n=c;var r=n},1622:function(i,t,s){s.r(t),s.d(t,{default:function(){return _i}});var a=s(6252),e=s(3577),l=s(9963);const o=i=>((0,a.dD)("data-v-7440c6a8"),i=i(),(0,a.Cn)(),i),c=o((()=>(0,a._)("div",{class:"block",style:{"box-shadow":"5px 5px 5px 5px whitesmoke"}},"Â ",-1))),n=o((()=>(0,a._)("div",{class:"modal-background"},null,-1))),r=o((()=>(0,a._)("div",{class:"modal-content",style:{overflow:"hidden"}},[(0,a._)("div",{class:"loader",style:{margin:"auto"}})],-1))),p=[n,r],d={key:0,class:"section"},u={class:"columns"},h={class:"column",id:"hospital-overview",style:{"border-right":"3px solid whitesmoke"}},k={class:"container is-fluid"},g={class:"title"},m={class:"subtitle"},w={class:"subtitle is-6"},D={class:"content"},v=o((()=>(0,a._)("b",null,"Type of Facility:",-1))),_={key:0},y={class:"subtitle is-6"},b=o((()=>(0,a._)("b",null,"Contacts:",-1))),f=o((()=>(0,a._)("br",null,null,-1))),C={class:"image is-16by9"},z=["src"],S={class:"column"},L={class:"container"},U={class:"block"},x={key:0,class:"block"},$=o((()=>(0,a._)("h1",{class:"title"},"Pick a specialist.",-1))),q={class:"subtitle"},Z={key:1,class:"columns is-multiline is-mobile"},B=["onClick"],H={key:0,class:"image is-4by3"},M=["src"],G={key:1,class:"subtitle has-text-centered"},I={key:2,class:"container"},N=o((()=>(0,a._)("i",{class:"fa-solid fa-arrow-left"},null,-1))),P={key:1},W=o((()=>(0,a._)("br",null,null,-1))),Y=o((()=>(0,a._)("p",{class:"subtitle has-text-centered"},"No doctors are currently available in this specialization.",-1))),K=[W,Y],A={key:2},E=o((()=>(0,a._)("br",null,null,-1))),T=o((()=>(0,a._)("h1",{class:"title is-3"},"Choose a doctor:",-1))),j={class:"field"},F={class:"control"},O=o((()=>(0,a._)("br",null,null,-1))),R={key:3},V={key:0},J={class:"column"},Q={class:"image is-5by4"},X=["src"],ii={class:"column is-5"},ti={class:"content"},si={key:0,class:"has-text-weight-semibold"},ai={key:1,class:"has-text-weight-semibold"},ei=o((()=>(0,a._)("br",null,null,-1))),li=o((()=>(0,a._)("br",null,null,-1))),oi={class:"column",style:{"margin-top":"auto"}},ci=["onClick"],ni={key:0,class:"notification"},ri=o((()=>(0,a._)("hr",null,null,-1))),pi={key:1},di={key:0,class:"notification is-info"};function ui(i,t,s,o,n,r){const W=(0,a.up)("NavigationTab"),Y=(0,a.up)("CatchError"),ui=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(W),c,(0,a._)("div",{class:(0,e.C_)(["modal",{"is-active":n.isDoctorLoading}])},p,2),0!==n.hospitalDetails.length?((0,a.wg)(),(0,a.iD)("section",d,[(0,a.Wm)(Y,{"err-msg":n.errMsg},null,8,["err-msg"]),(0,a._)("div",u,[(0,a._)("div",h,[(0,a._)("div",k,[(0,a._)("h1",g,(0,e.zw)(n.hospitalDetails.hospital),1),(0,a._)("p",m,(0,e.zw)(n.hospitalDetails.barangayORStreet)+", "+(0,e.zw)(n.hospitalDetails.city)+", "+(0,e.zw)(n.hospitalDetails.province),1),(0,a._)("p",w,(0,e.zw)(n.hospitalDetails.details[0].description),1),(0,a._)("div",D,[v,(0,a.Uk)(" "+(0,e.zw)(n.hospitalDetails.type)+" ",1),"undefined"!==typeof n.hospitalDetails.details[0].contacts?((0,a.wg)(),(0,a.iD)("span",_,[(0,a._)("p",y,[b,(0,a.Uk)(),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.hospitalDetails.details[0].contacts,((i,t)=>((0,a.wg)(),(0,a.iD)("span",{key:t},(0,e.zw)(i.contact+" "),1)))),128))])])):(0,a.kq)("",!0)]),f,(0,a._)("figure",C,[(0,a._)("iframe",{class:"has-ratio",src:`https://maps.google.com/maps?q=${n.hospitalDetails.location.coordinates[1]},${n.hospitalDetails.location.coordinates[0]}&hl=es;z=14&output=embed`},null,8,z)])])]),(0,a._)("div",S,[(0,a._)("div",L,[(0,a._)("div",U,[n.specializationClicked?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",x,[$,(0,a._)("p",q,[(0,a.Uk)(" Having trouble picking a specialist? Get appointed to a "),(0,a._)("a",{class:"has-text-link",onClick:t[0]||(t[0]=i=>r.getDoctors("General Practitioner"))},"General Practitioner"),(0,a.Uk)(". ")])])),n.specializationClicked?((0,a.wg)(),(0,a.iD)("div",I,[n.typeClinic?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("a",{key:0,class:"subtitle has-text-link",onClick:t[1]||(t[1]=i=>n.specializationClicked=!1)},[N,(0,a.Uk)(" Back")])),""==n.doctorList?((0,a.wg)(),(0,a.iD)("div",P,K)):((0,a.wg)(),(0,a.iD)("div",A,[E,T,(0,a._)("div",j,[(0,a._)("div",F,[(0,a.wy)((0,a._)("input",{class:"input",type:"text","onUpdate:modelValue":t[2]||(t[2]=i=>n.doctorSearchBar=i),placeholder:"Search..."},null,512),[[l.nr,n.doctorSearchBar]])])])])),O,n.specializationClicked?((0,a.wg)(),(0,a.iD)("div",R,[0!==Object.keys(r.doctorSearch).length?((0,a.wg)(),(0,a.iD)("div",V,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.doctorSearch,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"columns",key:t._id},[(0,a._)("div",J,[(0,a._)("figure",Q,[(0,a._)("img",{src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${t.alias}.jpg`},null,8,X)])]),(0,a._)("div",ii,[(0,a._)("div",ti,[(0,a._)("h5",null,(0,e.zw)(t.name),1),(0,a._)("p",null,[n.pickedSpecialist?((0,a.wg)(),(0,a.iD)("span",si,(0,e.zw)(n.pickedSpecialist),1)):((0,a.wg)(),(0,a.iD)("span",ai,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.specialist,(i=>((0,a.wg)(),(0,a.iD)("span",{key:i},[(0,a.Uk)((0,e.zw)(i)+" ",1),ei])))),128))])),li])])]),(0,a._)("div",oi,[null!==i.$store.state.patientID?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"button is-info is-rounded",onClick:i=>r.pickDoctor(t,n.pickedSpecialist)},"Book an Appointment",8,ci)):(0,a.kq)("",!0)])])))),128)),null==i.$store.state.patientID?((0,a.wg)(),(0,a.iD)("div",ni,[(0,a.Wm)(ui,{to:"/user/login",class:"has-text-weight-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)("Login")])),_:1}),(0,a.Uk)(" or "),(0,a.Wm)(ui,{to:"/user/signup",class:"has-text-weight-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)("create an account")])),_:1}),(0,a.Uk)(" to make an appointment. ")])):(0,a.kq)("",!0),ri])):((0,a.wg)(),(0,a.iD)("div",pi,[""!=n.doctorList?((0,a.wg)(),(0,a.iD)("div",di,"No such doctor is available right now.")):(0,a.kq)("",!0)]))])):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("div",Z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.specialistList,((i,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"column is-6-mobile is-4-desktop",key:t},[(0,a._)("a",{onClick:t=>r.getDoctors(i.specialist)},["General Practitioner"!==i.specialist?((0,a.wg)(),(0,a.iD)("figure",H,[(0,a._)("img",{src:`https://ui-avatars.com/api/?name=${i.specialist}`},null,8,M)])):(0,a.kq)("",!0),"General Practitioner"!==i.specialist?((0,a.wg)(),(0,a.iD)("p",G,(0,e.zw)(i.specialist),1)):(0,a.kq)("",!0)],8,B)])))),128))]))])])])])])):(0,a.kq)("",!0)],64)}var hi=s(594),ki=s(4239),gi=s(4172),mi=s(7787),wi={name:"DoctorList",components:{NavigationTab:gi.Z,CatchError:mi.Z},data(){return{errMsg:"",hospitalDetails:[],patientDetails:null,doctorList:null,specialistList:[],pickedSpecialist:null,specializationClicked:!1,doctorSearchBar:"",isDoctorLoading:!1,typeClinic:!1}},async mounted(){null!==this.$store.state.patientID&&await hi.Z.get("/session/patient").then((i=>this.patientDetails=i.data)),await hi.Z.post(`/api/manager/${this.$route.params.hospital}`).then((i=>{this.hospitalDetails=i.data,this.specialistList=i.data.specializations.sort()})),"Clinic"==this.hospitalDetails.type&&(this.typeClinic=!0,this.getDoctors(void 0))},computed:{doctorSearch(){return!!this.doctorList&&this.doctorList.filter((i=>i.name.toLowerCase().includes(this.doctorSearchBar.toLowerCase()))).slice().sort(((i,t)=>i.visits-t.visits))}},methods:{async getDoctors(i){this.doctorSearchBar="",this.isDoctorLoading=!0,this.specializationClicked=!0,this.pickedSpecialist=i,await hi.Z.post("/api/checkDoctorAvailability",{hospital:this.hospitalDetails.hospital,specialist:i}).then((i=>this.doctorList=i?i.data:[])).catch((i=>this.errMsg=i)),this.isDoctorLoading=!1},async pickDoctor(i,t){ki.Z.commit("pickedSpecialization",t),ki.Z.commit("doctorDetails",i),ki.Z.commit("statusAvailability",!0),ki.Z.commit("hospitalName",this.hospitalDetails.hospital),null!==this.$store.state.patientID?await this.$router.push(`/user/${this.patientDetails.username}/registration`):await this.$router.push("/user/signup")}}},Di=s(3744);const vi=(0,Di.Z)(wi,[["render",ui],["__scopeId","data-v-7440c6a8"]]);var _i=vi}}]);
//# sourceMappingURL=516.d9c3c7de.js.map