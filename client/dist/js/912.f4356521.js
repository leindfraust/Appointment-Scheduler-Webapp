"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[912],{7912:function(e,s,t){t.r(s),t.d(s,{default:function(){return x}});var a=t(6252),i=t(9963),r=t(3577);const l=e=>((0,a.dD)("data-v-380e4d17"),e=e(),(0,a.Cn)(),e),o={class:"container",style:{width:"33%","margin-top":"15%"}},u=l((()=>(0,a._)("h1",{class:"title has-text-centered"},"Welcome Superuser/Developer",-1))),n={class:"field"},d=l((()=>(0,a._)("label",{class:"label"},"Email",-1))),c={class:"control"},p=l((()=>(0,a._)("br",null,null,-1))),h={class:"has-text-centered"},m={key:0,class:"subtitle has-text-danger"},C=l((()=>(0,a._)("div",{class:"modal-background"},null,-1))),v={class:"modal-content"},U={class:"field",style:{"background-color":"whitesmoke",padding:"12%"}},g=l((()=>(0,a._)("label",{class:"label"},"Please check your email for the login code",-1))),f={class:"control"},_=l((()=>(0,a._)("br",null,null,-1))),b={class:"has-text-centered"},y={key:0,class:"subtitle has-text-danger"};function w(e,s,t,l,w,k){return(0,a.wg)(),(0,a.iD)("div",o,[u,(0,a._)("div",n,[d,(0,a._)("div",c,[(0,a.wy)((0,a._)("input",{class:"input is-rounded","onUpdate:modelValue":s[0]||(s[0]=e=>w.superUserEmail=e),type:"text",placeholder:"email"},null,512),[[i.nr,w.superUserEmail]])]),p,(0,a._)("div",h,[(0,a._)("button",{class:"button is-success",onClick:s[1]||(s[1]=(...e)=>k.authenticateMail&&k.authenticateMail(...e))},"Authenticate")]),"invalid developer"==w.statusMessage?((0,a.wg)(),(0,a.iD)("p",m,"Sorry, email not identified as superuser/developer. Please try again.")):(0,a.kq)("",!0)]),(0,a._)("div",{class:(0,r.C_)(["modal",{"is-active":w.modalActive}])},[C,(0,a._)("div",v,[(0,a._)("div",U,[g,(0,a._)("div",f,[(0,a.wy)((0,a._)("input",{class:"input","onUpdate:modelValue":s[2]||(s[2]=e=>w.superUserCode=e),type:"text",placeholder:"code"},null,512),[[i.nr,w.superUserCode]])]),_,(0,a._)("div",b,[(0,a._)("button",{class:"button is-primary",onClick:s[3]||(s[3]=(...e)=>k.authenticateCode&&k.authenticateCode(...e))},"Confirm")]),"invalid code"==w.statusMessage?((0,a.wg)(),(0,a.iD)("p",y,"Invalid login code, please check your email thoroughly.")):(0,a.kq)("",!0)])]),(0,a._)("button",{class:"modal-close is-large","aria-label":"close",onClick:s[4]||(s[4]=(...e)=>k.modalClose&&k.modalClose(...e))})],2)])}var k=t(196),E={name:"SuperUserLogin",async beforeCreate(){await k.ZP.get("/session/superuser").then((e=>this.superUserConfirmEmail=e.data)),"undefined"!==typeof this.superUserConfirmEmail.superuser?(this.$store.commit("superUserAuth",!0),await this.$router.push("/superuser")):await k.ZP["delete"]("/session/superuser")},data(){return{modalActive:!1,statusMessage:"",superUserEmail:"",superUserConfirmEmail:"",superUserCode:"",superUserConfirmCode:"",gmails:[]}},methods:{async authenticateMail(){await k.ZP.post("/api/code/superuser",{email:this.superUserEmail}).then((e=>this.superUserConfirmEmail=e.data)),this.superUserConfirmEmail?await k.ZP.post("/api/loginReqMail",{email:this.superUserEmail}).then(this.modalActive=!0).catch((e=>{e&&(this.statusMessage=e)})):(this.statusMessage="invalid developer",this.superUserEmail="")},async authenticateCode(){await k.ZP.post("/api/code/verify",{code:this.superUserCode}).then((e=>this.superUserConfirmCode=e.data)),this.superUserConfirmCode?(await k.ZP.post("/session/superuser",{superuser:this.superUserEmail}),await this.$store.commit("superUserAuth",!0),await this.$router.push("/superuser")):(this.statusMessage="invalid code",this.superUserCode="")},modalClose(){this.modalActive=!1}}},M=t(3744);const P=(0,M.Z)(E,[["render",w],["__scopeId","data-v-380e4d17"]]);var x=P}}]);
//# sourceMappingURL=912.f4356521.js.map