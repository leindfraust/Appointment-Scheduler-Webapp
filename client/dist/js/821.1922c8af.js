"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[821],{7192:function(e,t,s){s.d(t,{Z:function(){return L}});var a=s(6252),i=s(3577);const l=e=>((0,a.dD)("data-v-67924956"),e=e(),(0,a.Cn)(),e),n={class:"navbar is-hidden-desktop"},o={class:"navbar-brand"},d={class:"navbar-item"},c={class:"label"},r=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),u=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),h=l((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),m=[r,u,h],p={class:"has-text-centered block",style:{padding:"5px"}},_={class:"is-hidden-mobile is-hidden-touch image image-outer is-square",style:{margin:"auto"}},g=["src"],v={key:0,class:"title is-6"},b={class:"menu-list block"},y=l((()=>(0,a._)("p",{class:"menu-label"},"General",-1))),w=l((()=>(0,a._)("p",{class:"menu-label"},"Verification and Information",-1))),k=l((()=>(0,a._)("p",{class:"menu-label"},"Support",-1))),D={class:"block has-text-centered"};function f(e,t,s,l,r,u){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",n,[(0,a._)("div",o,[(0,a._)("a",d,[(0,a._)("label",c,"Dr. "+(0,i.zw)(e.$store.state.doctorName),1)]),(0,a._)("a",{role:"button",class:(0,i.C_)(["navbar-burger",{"is-active":!r.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:t[0]||(t[0]=(...e)=>u.menuNav&&u.menuNav(...e))},m,2)])]),(0,a._)("aside",{class:(0,i.C_)(["menu box",{"is-hidden-mobile":r.isActive,fixedMenu:r.isActive}]),style:{"background-color":"#D8E5FF",padding:"20px"}},[(0,a._)("div",p,[(0,a._)("figure",_,[(0,a._)("img",{class:"is-rounded image-inner",src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${r.alias}.jpg`},null,8,g)]),r.isActive?((0,a.wg)(),(0,a.iD)("h5",v,"Dr. "+(0,i.zw)(e.$store.state.doctorName),1)):(0,a.kq)("",!0)]),(0,a._)("ul",b,[y,(0,a._)("li",null,[(0,a._)("a",{onClick:t[1]||(t[1]=(...e)=>u.routeHome&&u.routeHome(...e))},"Appointments")]),(0,a._)("li",null,[(0,a._)("a",{onClick:t[2]||(t[2]=(...e)=>u.patientLogs&&u.patientLogs(...e))},"Patient History")]),(0,a._)("li",null,[(0,a._)("a",{onClick:t[3]||(t[3]=(...e)=>u.openSchedule&&u.openSchedule(...e))},"Schedule")]),w,(0,a._)("li",null,[(0,a._)("a",{onClick:t[4]||(t[4]=(...e)=>u.profile&&u.profile(...e))},"Profile")]),(0,a._)("li",null,[(0,a._)("a",{onClick:t[5]||(t[5]=(...e)=>u.openSecurity&&u.openSecurity(...e))},"Security")]),k,(0,a._)("li",null,[(0,a._)("a",{onClick:t[6]||(t[6]=(...t)=>e.openFAQs&&e.openFAQs(...t))},"FAQ")]),(0,a._)("li",null,[(0,a._)("a",{onClick:t[7]||(t[7]=e=>this.$router.push("/contactus"))},"Contact Us")])]),(0,a._)("div",D,[(0,a._)("button",{onClick:t[8]||(t[8]=(...e)=>u.logout&&u.logout(...e)),class:"button is-link is-rounded",type:"button"},"Logout")])],2)],64)}var S=s(4239),x=s(9669),C=s.n(x),A={name:"AdminMenu",data(){return{alias:S.Z.state.alias,isActive:!0}},methods:{async logout(){S.Z.commit("alias",null),await C()["delete"]("/session/doctor"),await this.$router.push("/doctor/login")},async routeHome(){await this.$router.push(`/doctor/user/${this.alias}`)},async profile(){await this.$router.push(`/doctor/user/${this.alias}/profile`)},async patientLogs(){await this.$router.push(`/doctor/user/${this.alias}/patients`)},async openSecurity(){await this.$router.push(`/doctor/user/${this.alias}/security`)},async openSchedule(){await this.$router.push(`/doctor/user/${this.alias}/schedule`)},menuNav(){this.isActive=!this.isActive}}},$=s(3744);const z=(0,$.Z)(A,[["render",f],["__scopeId","data-v-67924956"]]);var L=z},2821:function(e,t,s){s.r(t),s.d(t,{default:function(){return de}});var a=s(6252),i=s(3577),l=s(9963);const n={class:"main-doctor"},o={class:"columns"},d={class:"column is-2"},c={class:"column"},r={class:"section"},u=(0,a._)("h1",{class:"title"},"SET SCHEDULES",-1),h=(0,a._)("div",{class:"modal-background"},null,-1),m={class:"modal-content"},p={class:"card"},_={class:"card-content"},g={class:"content has-text-centered"},v={class:"control block"},b=(0,a._)("label",{class:"label"},"Prefix:",-1),y={class:"select block"},w=["value"],k=(0,a._)("label",{class:"label"},"Time start:",-1),D=(0,a._)("br",null,null,-1),f=(0,a._)("label",{class:"label"},"Time end:",-1),S={class:"control block"},x=(0,a._)("label",{class:"label"},"Appointment limit:",-1),C={class:"block"},A=["disabled"],$=(0,a._)("div",{class:"modal-background"},null,-1),z=(0,a._)("div",{class:"modal-content loader"},null,-1),L=[$,z],H={class:"columns"},U={class:"column"},V={key:0,class:"notification is-success has-text-centered"},I={class:"column"},E={class:"container"},T=(0,a._)("h1",{class:"subtitle has-text-weight-bold"},"Ongoing Schedules:",-1),Z={key:0,class:"columns is-multiline",style:{overflow:"scroll","max-height":"30em"}},M={class:"block card"},N={class:"card-content"},F={class:"content"},O={class:"title is-5 has-text-black has-text-left"},P={class:"icon-text"},W={class:"icon"},q=["onClick"],K=(0,a._)("i",{class:"fa-solid fa-trash-can"},null,-1),Q=[K],Y={class:"has-text-black"},j={class:"has-text-black"},G={class:"has-text-black"},R={class:"has-text-black"},B={key:1,class:"notification is-warning"},J=(0,a._)("h1",{class:"title is-5"},"No ongoing schedules.",-1),X=[J];function ee(e,t,s,$,z,K){const J=(0,a.up)("DoctorMenu"),ee=(0,a.up)("v-date-picker"),te=(0,a.up)("v-calendar");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",o,[(0,a._)("div",d,[(0,a.Wm)(J)]),(0,a._)("div",c,[(0,a._)("section",r,[u,(0,a._)("div",{class:(0,i.C_)(["modal",{"is-active":z.isActive}])},[h,(0,a._)("div",m,[(0,a._)("div",p,[(0,a._)("div",_,[(0,a._)("div",g,[(0,a._)("div",v,[b,(0,a.wy)((0,a._)("input",{class:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>z.prefix=e),style:{width:"33%"},placeholder:"e.g. ROOM305"},null,512),[[l.nr,z.prefix]])]),(0,a._)("div",y,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>z.selectedHospital=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(z.hospitalList,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e.hospital},(0,i.zw)(e.hospital),9,w)))),128))],512),[[l.bM,z.selectedHospital]])]),k,(0,a.Wm)(ee,{modelValue:z.timeStart,"onUpdate:modelValue":t[2]||(t[2]=e=>z.timeStart=e),mode:"time",timezone:z.timezone,class:"block"},null,8,["modelValue","timezone"]),D,f,(0,a.Wm)(ee,{modelValue:z.timeEnd,"onUpdate:modelValue":t[3]||(t[3]=e=>z.timeEnd=e),mode:"time",timezone:z.timezone,class:"block"},null,8,["modelValue","timezone"]),(0,a._)("div",S,[x,(0,a.wy)((0,a._)("input",{class:"input",type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>z.appointmentLimits=e),style:{width:"33%"}},null,512),[[l.nr,z.appointmentLimits]])]),(0,a._)("div",C,[(0,a._)("button",{class:"button is-primary",type:"button",onClick:t[5]||(t[5]=(...e)=>K.addSched&&K.addSched(...e)),disabled:""==z.prefix},"Confirm",8,A)])])])])]),(0,a._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[6]||(t[6]=(...e)=>K.modalClose&&K.modalClose(...e))})],2),(0,a._)("div",{class:(0,i.C_)(["modal",{"is-active":z.loading}])},L,2),(0,a._)("div",H,[(0,a._)("div",U,[z.uploadSchedSuccess?((0,a.wg)(),(0,a.iD)("div",V,"Schedules Added/Updated! ")):(0,a.kq)("",!0),(0,a.Wm)(te,{columns:e.$screens({default:1,lg:2}),rows:e.$screens({default:1,lg:2}),"is-expanded":e.$screens({default:!0,lg:!1}),modelValue:z.date,"onUpdate:modelValue":t[7]||(t[7]=e=>z.date=e),"min-date":new Date,"disabled-dates":[{start:new Date,end:new Date}],attributes:K.attributes,onDayclick:K.modalUp,timezone:z.timezone},null,8,["columns","rows","is-expanded","modelValue","min-date","disabled-dates","attributes","onDayclick","timezone"])]),(0,a._)("div",I,[(0,a._)("div",E,[T,0!==Object.keys(K.daysIndexed).length?((0,a.wg)(),(0,a.iD)("div",Z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.daysIndexed,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"column is-6",key:e.id},[(0,a._)("div",M,[(0,a._)("div",N,[(0,a._)("div",F,[(0,a._)("p",O,[(0,a.Uk)((0,i.zw)(new Date(e.date).toDateString())+" Â ",1),(0,a._)("span",P,[(0,a._)("span",W,[(0,a._)("a",{class:"has-text-black-ter",onClick:t=>K.modalUp(e.dayDetail)},Q,8,q)])])]),(0,a._)("p",Y,"Prefix: "+(0,i.zw)(e.prefix),1),(0,a._)("p",j,"Hospital: "+(0,i.zw)(e.hospital),1),(0,a._)("p",G,(0,i.zw)(e.timeStart)+" - "+(0,i.zw)(e.timeEnd),1),(0,a._)("p",R,"Appointment limit: "+(0,i.zw)(e.appointmentLimit),1)])])])])))),128))])):((0,a.wg)(),(0,a.iD)("div",B,X))])])])])])])])}var te=s(9669),se=s.n(te),ae=s(4239),ie=s(7192),le={name:"SchedulerPage",components:{DoctorMenu:ie.Z},data(){return{alias:ae.Z.state.alias,profileImg:ae.Z.state.profileImg,userID:"",date:new Date,timeStart:"",timeEnd:"",timezone:"Asia/Hong_Kong",prefix:"",days:[],appointmentLimits:10,checkServer:null,isActive:!1,uploadSchedSuccess:!1,loading:!1,hospitalList:[],selectedHospital:""}},async mounted(){await se().get("/session/doctor").then((e=>this.days=e.data.schedule)),await se().get("/session/doctor").then((e=>this.userID=e.data._id)),await se().get("/session/doctor").then((e=>this.hospitalList=e.data.hospitalOrigin)),this.selectedHospital=await this.hospitalList[0].hospital},computed:{dates(){return this.days.map((e=>new Date(e.date).toDateString()))},attributes(){return this.dates.map((e=>({highlight:!0,dates:e})))},daysIndexed(){return""!==this.days&&this.sortDate()}},methods:{sortDate(){return this.days.sort(((e,t)=>{new Date(e.date).getTime(),new Date(t.date).getTime()})).filter((e=>new Date(e.date).getTime()>(new Date).getTime()))},async onDayClick(e){this.loading=!0,this.days.push({dayDetail:e,id:e.id,date:e.date,timeStart:this.timeStart.toLocaleTimeString(),timeEnd:this.timeEnd.toLocaleTimeString(),appointmentLimit:this.appointmentLimits,prefix:this.prefix,hospital:this.selectedHospital}),await se().put(`/api/doctor/${this.userID}`,{schedule:this.days}),await se().put("/session/doctor",{schedule:this.days}),await se().get("/session/doctor").then((e=>this.days=e.data.schedule)),this.uploadSchedSuccess=!0,this.loading=!1},async modalUp(e){if(!e?.isDisabled){this.isActive=!0;const t=this.days.findIndex((t=>t.id===e.id));t>=0&&(this.loading=!0,this.days.splice(t,1),this.isActive=!1,await se().put(`/api/doctor/${this.userID}`,{schedule:this.days}),await se().put("/session/doctor",{schedule:this.days}),await se().get("/session/doctor").then((e=>this.days=e.data.schedule)),this.uploadSchedSuccess=!0,this.loading=!1),this.day=e,this.timeStart=e.date,this.timeEnd=e.date}},addSched(e){e=this.day,this.onDayClick(e),this.isActive=!this.isActive},modalClose(){this.isActive=!this.isActive}}},ne=s(3744);const oe=(0,ne.Z)(le,[["render",ee]]);var de=oe}}]);
//# sourceMappingURL=821.1922c8af.js.map