{"version":3,"file":"js/973.18f50266.js","mappings":"yoDAQA,MAAMA,GAAQC,EAAAA,EAAAA,MAERC,GAAwBC,EAAAA,EAAAA,IAAI,IAC5BC,GAAYD,EAAAA,EAAAA,IAAI,IAChBE,GAASF,EAAAA,EAAAA,IAAI,KAEnBG,EAAAA,EAAAA,KAAcC,gBACJC,EAAAA,GAAAA,KAAW,6CAA8C,CAAEC,GAAIT,EAAMU,MAAMC,WAAYC,MAAKC,GAAYX,EAAsBY,MAAQD,EAASE,MAAK,IAG9J,MAAMC,GAAgCC,EAAAA,EAAAA,KAAS,IACA,IAAvCf,EAAsBY,MAAMI,QACrBC,IAAQjB,EAAsBY,MAAMM,QAAOC,GAE1CA,EAAEC,UAAUC,cAAcC,SAASpB,EAAUU,MAAMS,gBACnDF,EAAEI,SAASF,cAAcC,SAASpB,EAAUU,MAAMS,gBAClDF,EAAEK,YAAYH,cAAcC,SAASpB,EAAUU,MAAMS,iBAE1DI,MAAK,CAACC,EAAGC,IACD,IAAIC,KAAKF,EAAEG,SAAS,GAAGC,MAAMC,UAAY,IAAIH,KAAKD,EAAEE,SAAS,GAAGC,MAAMC,YAE7E,sBAMZ1B,eAAe2B,EAAkBzB,SACvBD,EAAAA,GAAAA,UAAc,wBAAuBC,KAAM0B,OAAMC,GAAO/B,EAAOS,MAAQsB,UACvE5B,EAAAA,GAAAA,KAAW,6CAA8C,CAAEC,GAAIT,EAAMU,MAAMC,WAAYC,MAAKC,GAAYX,EAAsBY,MAAQD,EAASE,MACzJ,C,40CCnCA,MAAMsB,EAAc,EAEpB,O","sources":["webpack://client/./src/views/PortalDoctor/DoctorCancelledAppointments.vue","webpack://client/./src/views/PortalDoctor/DoctorCancelledAppointments.vue?ff87"],"sourcesContent":["<script setup>\r\nimport { ref, onBeforeMount, computed } from 'vue'\r\nimport DoctorMenu from '../../components/DoctorMenu.vue'\r\nimport axios from 'axios'\r\nimport { useStore } from 'vuex';\r\nimport groupBy from 'lodash/groupBy'\r\nimport CatchError from '../../components/CatchError.vue';\r\n\r\nconst store = useStore()\r\n\r\nconst cancelledAppointments = ref([])\r\nconst searchBar = ref('')\r\nconst errMsg = ref('')\r\n\r\nonBeforeMount(async () => {\r\n    await axios.post('/api/appointmentList/cancelledAppointments', { id: store.state.doctorID }).then(response => cancelledAppointments.value = response.data)\r\n})\r\n\r\nconst cancelledAppointmentsFiltered = computed(() => {\r\n    if (cancelledAppointments.value.length !== 0) {\r\n        return groupBy(cancelledAppointments.value.filter(x => {\r\n            return (\r\n                x.firstName.toLowerCase().includes(searchBar.value.toLowerCase()) ||\r\n                x.lastName.toLowerCase().includes(searchBar.value.toLowerCase()) ||\r\n                x.referenceID.toLowerCase().includes(searchBar.value.toLowerCase())\r\n            );\r\n        }).sort((a, b) => {\r\n            return new Date(a.schedule[0].date).getTime() - new Date(b.schedule[0].date).getTime()\r\n        }),\r\n            \"schedule[0].date\")\r\n    } else {\r\n        return false\r\n    }\r\n});\r\n\r\nasync function deleteAppointment(id) {\r\n    await axios.delete(`/api/appointmentList/${id}`).catch(err => errMsg.value = err)\r\n    await axios.post('/api/appointmentList/cancelledAppointments', { id: store.state.doctorID }).then(response => cancelledAppointments.value = response.data)\r\n}\r\n\r\n</script>\r\n<template>\r\n    <div class=\"main-doctor\">\r\n        <div class=\"columns\">\r\n            <div class=\"column is-2\">\r\n                <DoctorMenu />\r\n            </div>\r\n            <div class=\"column\">\r\n                <section class=\"section\">\r\n                    <CatchError :err-msg=\"errMsg\" />\r\n                    <h1 class=\"title\">CANCELLED APPOINTMENTS</h1>\r\n                    <div class=\"field\" v-if=\"cancelledAppointments.length !== 0\">\r\n                        <div class=\"control\">\r\n                            <input class=\"input\" type=\"text\" style=\"width: 50% !important\" v-model=\"searchBar\"\r\n                                placeholder=\"Search...\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"container is-widescreen is-fullhd\"\r\n                        v-if=\"Object.keys(cancelledAppointmentsFiltered).length !== 0\">\r\n                        <div class=\"box\" v-for=\"(appointmentList, index) in cancelledAppointmentsFiltered\" :key=\"index\">\r\n                            <h1 class=\"subtitle has-text-black\">Schedule: {{ new\r\n                                    Date(index).toDateString()\r\n                            }}</h1>\r\n                            <div class=\"table-container\">\r\n                                <table class=\"table is-fullwidth\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th class=\"has-text-black-ter\">Controls</th>\r\n                                            <th class=\"has-text-black-ter\">Reference ID</th>\r\n                                            <th class=\"has-text-black-ter\">Priority No.</th>\r\n                                            <th class=\"has-text-black-ter\">Hospital Appointed</th>\r\n                                            <th class=\"has-text-black-ter\">First Name</th>\r\n                                            <th class=\"has-text-black-ter\">Last Name</th>\r\n                                            <th class=\"has-text-black-ter\">Contact Number</th>\r\n                                            <th class=\"has-text-black-ter\">Birthday</th>\r\n                                            <th class=\"has-text-black-ter\">Symptoms/Comments</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr v-for=\"appointments in appointmentList\" :key=\"appointments._id\">\r\n                                            <button class=\"button is-danger is-light\"\r\n                                                @click=\"deleteAppointment(appointment._id)\">Delete</button>\r\n                                            <th class=\"has-text-black-ter\">{{ appointments.referenceID }}</th>\r\n                                            <th class=\"has-text-black-ter\">{{ appointments.priorityNum }}</th>\r\n                                            <th class=\"has-text-black-ter\">{{ appointments.hospital }}</th>\r\n                                            <td class=\"has-text-black-ter\">{{ appointments.firstName }}</td>\r\n                                            <td class=\"has-text-black-ter\">{{ appointments.lastName }}</td>\r\n                                            <td class=\"has-text-black-ter\">{{ appointments.contactNum }}</td>\r\n                                            <td class=\"has-text-black-ter\">{{ appointments.birthDay }}</td>\r\n                                            <td class=\"has-text-black-ter\" style=\"white-space: pre-wrap;\">{{\r\n                                                    appointments.comments\r\n                                            }}</td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <section class=\"section\" v-else>\r\n                        <div class=\"notification is-info\">\r\n                            <h1 class=\"title is-5\">No cancelled appointments.</h1>\r\n                        </div>\r\n                    </section>\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>","import script from \"./DoctorCancelledAppointments.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DoctorCancelledAppointments.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["store","useStore","cancelledAppointments","ref","searchBar","errMsg","onBeforeMount","async","axios","id","state","doctorID","then","response","value","data","cancelledAppointmentsFiltered","computed","length","groupBy","filter","x","firstName","toLowerCase","includes","lastName","referenceID","sort","a","b","Date","schedule","date","getTime","deleteAppointment","catch","err","__exports__"],"sourceRoot":""}