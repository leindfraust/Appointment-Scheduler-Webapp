"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[694],{7787:function(t,e,a){a.d(e,{Z:function(){return r}});var i=a(6252),s=a(2262),n=a(3577);const l={key:0,class:"notification is-danger"};var o={__name:"CatchError",props:{errMsg:null},setup(t){const e=t,a=(0,i.Fl)((()=>e.errMsg));return(t,e)=>{const o=(0,i.up)("router-link");return(0,s.SU)(a)?((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Uk)("Sorry, something went wrong. "+(0,n.zw)((0,s.SU)(a).message)+", please try again later or ",1),(0,i.Wm)(o,{to:"/contactus"},{default:(0,i.w5)((()=>[(0,i.Uk)("contact us")])),_:1}),(0,i.Uk)(". ")])):(0,i.kq)("",!0)}}};const c=o;var r=c},9226:function(t,e,a){a.d(e,{Z:function(){return A}});var i=a(6252),s=a(3577);const n=t=>((0,i.dD)("data-v-45fdf8bd"),t=t(),(0,i.Cn)(),t),l={class:"navbar is-hidden-desktop"},o={class:"navbar-brand"},c={class:"navbar-item"},r={class:"label"},d=n((()=>(0,i._)("span",{"aria-hidden":"true"},null,-1))),u=n((()=>(0,i._)("span",{"aria-hidden":"true"},null,-1))),h=n((()=>(0,i._)("span",{"aria-hidden":"true"},null,-1))),p=[d,u,h],m={class:"has-text-centered block",style:{padding:"5px"}},_={class:"is-hidden-mobile is-hidden-touch image image-outer is-square",style:{margin:"auto"}},b=["src"],f={key:0,class:"title is-6"},g={class:"menu-list block"},y=n((()=>(0,i._)("p",{class:"menu-label"},"General",-1))),w=n((()=>(0,i._)("p",{class:"menu-label"},"Verification and Information",-1))),D=n((()=>(0,i._)("p",{class:"menu-label"},"Support",-1))),v={class:"block has-text-centered"};function C(t,e,a,n,d,u){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("nav",l,[(0,i._)("div",o,[(0,i._)("a",c,[(0,i._)("label",r,"Dr. "+(0,s.zw)(t.$store.state.doctorName),1)]),(0,i._)("a",{role:"button",class:(0,s.C_)(["navbar-burger",{"is-active":!d.isActive}]),"aria-label":"menu","aria-expanded":"false","data-target":"navbar",onClick:e[0]||(e[0]=(...t)=>u.menuNav&&u.menuNav(...t))},p,2)])]),(0,i._)("aside",{class:(0,s.C_)(["menu box",{"is-hidden-mobile":d.isActive,fixedMenu:d.isActive}]),style:{"background-color":"#D8E5FF",padding:"20px"}},[(0,i._)("div",m,[(0,i._)("figure",_,[(0,i._)("img",{class:"is-rounded image-inner",src:`http://res.cloudinary.com/leindfraust/image/upload/v${(new Date).getMonth()}${(new Date).getDate()}/assets/doctors/${d.alias}.jpg`},null,8,b)]),d.isActive?((0,i.wg)(),(0,i.iD)("h5",f,"Dr. "+(0,s.zw)(t.$store.state.doctorName),1)):(0,i.kq)("",!0)]),(0,i._)("ul",g,[y,(0,i._)("li",null,[(0,i._)("a",{onClick:e[1]||(e[1]=(...t)=>u.routeHome&&u.routeHome(...t))},"Appointments")]),(0,i._)("li",null,[(0,i._)("a",{onClick:e[2]||(e[2]=(...t)=>u.openPatientHistory&&u.openPatientHistory(...t))},"Appointment History")]),(0,i._)("li",null,[(0,i._)("a",{onClick:e[3]||(e[3]=(...t)=>u.openPatientAppointmentsCancelled&&u.openPatientAppointmentsCancelled(...t))},"Cancelled Appointments")]),(0,i._)("li",null,[(0,i._)("a",{onClick:e[4]||(e[4]=(...t)=>u.openSchedule&&u.openSchedule(...t))},"Schedule")]),w,(0,i._)("li",null,[(0,i._)("a",{onClick:e[5]||(e[5]=(...t)=>u.openProfile&&u.openProfile(...t))},"Profile")]),(0,i._)("li",null,[(0,i._)("a",{onClick:e[6]||(e[6]=(...t)=>u.openSecurity&&u.openSecurity(...t))},"Security")]),D,(0,i._)("li",null,[(0,i._)("a",{onClick:e[7]||(e[7]=(...e)=>t.openFAQs&&t.openFAQs(...e))},"FAQ")]),(0,i._)("li",null,[(0,i._)("a",{onClick:e[8]||(e[8]=t=>this.$router.push("/contactus"))},"Contact Us")])]),(0,i._)("div",v,[(0,i._)("button",{onClick:e[9]||(e[9]=(...t)=>u.logout&&u.logout(...t)),class:"button is-link is-rounded",type:"button"},"Logout")])],2)],64)}var k=a(4239),N=a(196),M={name:"AdminMenu",data(){return{alias:k.Z.state.alias,isActive:!0}},methods:{async logout(){k.Z.commit("alias",null),await N.ZP["delete"]("/session/doctor"),await this.$router.push("/doctor/login")},async routeHome(){await this.$router.push(`/doctor/${this.alias}/appointments`)},async openProfile(){await this.$router.push(`/doctor/${this.alias}/profile`)},async openPatientHistory(){await this.$router.push(`/doctor/${this.alias}/appointments/history`)},async openPatientAppointmentsCancelled(){await this.$router.push(`/doctor/${this.alias}/appointments/cancelled`)},async openSecurity(){await this.$router.push(`/doctor/${this.alias}/security`)},async openSchedule(){await this.$router.push(`/doctor/${this.alias}/schedule`)},menuNav(){this.isActive=!this.isActive}}},x=a(3744);const S=(0,x.Z)(M,[["render",C],["__scopeId","data-v-45fdf8bd"]]);var A=S},6694:function(t,e,a){a.r(e),a.d(e,{default:function(){return bt}});var i=a(6252),s=a(9963),n=a(3577);const l=t=>((0,i.dD)("data-v-0b77fc52"),t=t(),(0,i.Cn)(),t),o={class:"main-doctor"},c={class:"columns"},r={class:"column is-2"},d={class:"column"},u={class:"section"},h=l((()=>(0,i._)("h1",{class:"title"},"APPOINTMENTS",-1))),p={key:0,class:"field"},m={class:"control"},_={key:1,class:"container is-widescreen is-fullhd"},b={key:0,class:"subtitle"},f=l((()=>(0,i._)("b",null,"TODAY",-1))),g=[f],y={class:"subtitle has-text-black"},w={class:"table-container"},D={class:"table is-fullwidth"},v=l((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"has-text-black-ter"},"Controls"),(0,i._)("th",{class:"has-text-black-ter"},"Reference ID"),(0,i._)("th",{class:"has-text-black-ter"},"Priority No."),(0,i._)("th",{class:"has-text-black-ter"},"Hospital Appointed"),(0,i._)("th",{class:"has-text-black-ter"},"First Name"),(0,i._)("th",{class:"has-text-black-ter"},"Last Name"),(0,i._)("th",{class:"has-text-black-ter"},"Contact Number"),(0,i._)("th",{class:"has-text-black-ter"},"Birthday"),(0,i._)("th",{class:"has-text-black-ter"},"Symptoms/Comments")])],-1))),C=["onClick"],k=["onClick"],N=l((()=>(0,i._)("br",null,null,-1))),M=l((()=>(0,i._)("div",{class:"modal-background"},null,-1))),x={class:"modal-content animate__animated animate__fadeInLeft"},S={class:"field customField has-text-centered"},A=l((()=>(0,i._)("h1",{class:"title is-4"},"Confirm Patient Details",-1))),I=l((()=>(0,i._)("label",{class:"label"},"First Name",-1))),P={class:"control"},Z=l((()=>(0,i._)("label",{class:"label"},"Last Name",-1))),$={class:"control"},L=l((()=>(0,i._)("label",{class:"label"},"Contact Number",-1))),F={class:"control"},B=l((()=>(0,i._)("label",{class:"label"},"Birthday",-1))),U={class:"control"},V={class:"field"},z=l((()=>(0,i._)("label",{class:"label"},"Upload a prescription(optional)",-1))),H={class:"control"},q=l((()=>(0,i._)("button",{class:"is-hidden",type:"submit",value:"submit"},"Submit",-1))),T=l((()=>(0,i._)("div",{class:"modal-background"},null,-1))),Y={class:"modal-content animate__animated animate__fadeInLeft"},E=l((()=>(0,i._)("p",{class:"subtitle is-4 has-text-centered"},"Do you wish to cancel the appointment? ",-1))),j=l((()=>(0,i._)("p",{class:"subtitle is-6 has-text-centered"},"The user will be notified of the cancellation via email and notifications if you wish to proceed.",-1))),O=l((()=>(0,i._)("p",{class:"help"},"NOTE: This action cannot be undone.",-1))),W={class:"buttons is-centered"},Q={class:"has-text-black-ter"},R={class:"has-text-black-ter"},K={class:"has-text-black-ter"},G={class:"has-text-black-ter"},J={class:"has-text-black-ter"},X={class:"has-text-black-ter"},tt={class:"has-text-black-ter"},et={class:"has-text-black-ter",style:{"white-space":"pre-wrap"}},at={key:2,class:"section"},it=l((()=>(0,i._)("div",{class:"notification is-info"},[(0,i._)("h1",{class:"title is-5"},"No upcoming appointments.")],-1))),st=[it];function nt(t,e,a,l,f,it){const nt=(0,i.up)("DoctorMenu"),lt=(0,i.up)("CatchError");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",c,[(0,i._)("div",r,[(0,i.Wm)(nt)]),(0,i._)("div",d,[(0,i._)("section",u,[(0,i.Wm)(lt,{"err-msg":f.errMsg},null,8,["err-msg"]),h,0!==f.appointmentSched.length?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("div",m,[(0,i.wy)((0,i._)("input",{class:"input",type:"text",style:{width:"50% !important"},"onUpdate:modelValue":e[0]||(e[0]=t=>f.searchBar=t),placeholder:"Search..."},null,512),[[s.nr,f.searchBar]])])])):(0,i.kq)("",!0),0!==Object.keys(it.appointmentSchedules).length?((0,i.wg)(),(0,i.iD)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(it.appointmentSchedules,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{class:"box",key:a,style:(0,n.j5)(new Date(a).toDateString()==(new Date).toDateString()?"box-shadow: rgb(10 10 10 / 10%) 0px 0.5em 1em -0.125em, #485fc7 0px 0px 0px 1px !important;":"")},[new Date(a).toDateString()==(new Date).toDateString()?((0,i.wg)(),(0,i.iD)("h1",b,g)):(0,i.kq)("",!0),(0,i._)("h1",y,"Schedule: "+(0,n.zw)(new Date(a).toDateString()),1),(0,i._)("div",w,[(0,i._)("table",D,[v,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t._id},[new Date(a).toDateString()==(new Date).toDateString()?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button has-text-success",type:"button",onClick:e=>it.toggleConfirmModal(t.referenceID,t.doctorName,t.patientID,t.firstName,t.lastName,t.contactNum,t.birthDay,t._id)},"Confirm Visitation",8,C)):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"button has-text-danger",type:"button",onClick:e=>it.toggleCancelModal(t)},"Cancel Visitation",8,k)),N,(0,i._)("div",{class:(0,n.C_)(["modal",{"is-active":f.isActiveModalConfirm}])},[M,(0,i._)("div",x,[(0,i._)("div",S,[A,I,(0,i._)("div",P,[(0,i.wy)((0,i._)("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>f.firstName=t),placeholder:"First Name",required:""},null,512),[[s.nr,f.firstName]])]),Z,(0,i._)("div",$,[(0,i.wy)((0,i._)("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>f.lastName=t),placeholder:"Last Name",required:""},null,512),[[s.nr,f.lastName]])]),L,(0,i._)("div",F,[(0,i.wy)((0,i._)("input",{class:"input",type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>f.contactNum=t),placeholder:"Contact Number",required:""},null,512),[[s.nr,f.contactNum]])]),B,(0,i._)("div",U,[(0,i.wy)((0,i._)("input",{class:"input",type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>f.birthDay=t),placeholder:"Birthday",required:""},null,512),[[s.nr,f.birthDay]])]),(0,i._)("div",V,[z,(0,i._)("div",H,[(0,i._)("input",{onChange:e[5]||(e[5]=t=>it.handleFile(t)),class:"input",type:"file"},null,32)]),q]),(0,i._)("button",{class:(0,n.C_)(["button is-info",{"is-loading":f.confirmLoadingButton}]),onClick:e[6]||(e[6]=t=>it.confirmVisitation())},"Submit",2)])]),(0,i._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[7]||(e[7]=(...t)=>it.cancelModalConfirm&&it.cancelModalConfirm(...t))})],2),(0,i._)("div",{class:(0,n.C_)(["modal",{"is-active":f.isActiveModalCancel}])},[T,(0,i._)("div",Y,[E,j,O,(0,i._)("div",W,[(0,i._)("button",{class:"button has-text-success",onClick:e[8]||(e[8]=(...t)=>it.cancelAppointment&&it.cancelAppointment(...t))},"YES"),(0,i._)("button",{class:"button has-text-danger",onClick:e[9]||(e[9]=(...t)=>it.cancelModalCancel&&it.cancelModalCancel(...t))},"NO")])]),(0,i._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[10]||(e[10]=(...t)=>it.cancelModalCancel&&it.cancelModalCancel(...t))})],2),(0,i._)("th",Q,(0,n.zw)(t.referenceID),1),(0,i._)("th",R,(0,n.zw)(t.priorityNum),1),(0,i._)("th",K,(0,n.zw)(t.hospital),1),(0,i._)("td",G,(0,n.zw)(t.firstName),1),(0,i._)("td",J,(0,n.zw)(t.lastName),1),(0,i._)("td",X,(0,n.zw)(t.contactNum),1),(0,i._)("td",tt,(0,n.zw)(t.birthDay),1),(0,i._)("td",et,(0,n.zw)(t.comments),1)])))),128))])])])],4)))),128))])):((0,i.wg)(),(0,i.iD)("section",at,st))])])])])}var lt=a(196),ot=a(4239),ct=a(7739),rt=a.n(ct),dt=a(9226),ut=a(4058),ht=a(7787),pt={name:"DoctorDashboard",components:{DoctorMenu:dt.Z,CatchError:ht.Z},data(){return{errMsg:"",alias:ot.Z.state.alias,profileImg:ot.Z.state.profileImg,isActiveModalConfirm:!1,isActiveModalCancel:!1,id:null,refID:null,refIDPatient:null,firstName:null,lastName:null,birthDay:null,contactNum:null,doctorName:null,searchBar:"",schedule:null,appointmentSched:[],file:null,confirmLoadingButton:!1}},computed:{appointmentSchedules(){return!!this.appointmentSched&&rt()(this.appointmentSched.filter((t=>t.firstName.toLowerCase().includes(this.searchBar.toLowerCase())||t.lastName.toLowerCase().includes(this.searchBar.toLowerCase())||t.referenceID.toLowerCase().includes(this.searchBar.toLowerCase()))).sort(((t,e)=>new Date(t.schedule[0].date).getTime()-new Date(e.schedule[0].date).getTime())),"schedule[0].date")}},async mounted(){await lt.ZP.post("/api/appointmentList/doctors",{id:ot.Z.state.doctorID,ongoing:!0}).then((t=>this.appointmentSched=t.data)).catch((t=>this.errMsg=t))},methods:{async confirmVisitation(){this.confirmLoadingButton=!0,this.generateRefID();let t="Appointment visitation confirmed",e=`Your appointment visitation has been confirmed by your doctor Ms/Mr. ${this.doctorName}, reference ID: ${this.refIDPatient}, a digital prescription will be displayed below if your doctor has uploaded one. We hope you well!`;if(ut.Z.emit("message",this.file?this.refID:null,t,e,"Medic Search",new Date),this.file){const t=new FormData;t.append("id",this.refID),t.append("imgFile",this.file),await lt.ZP.post("/api/imgUploadVisitation",t,{headers:{"Content-Type":"multipart/form-data"}}).catch((t=>this.errMsg=t))}try{await lt.ZP.put(`/api/appointmentList/${this.id}`,{firstName:this.firstName,lastName:this.lastName,contactNum:this.contactNum,birthDay:this.birthDay,ifPatientVisited:!0}),await lt.ZP.put(`/api/doctor/${ot.Z.state.doctorID}`,{visits:this.appointmentSched.filter((t=>1==t.ifPatientVisited)).length+1}),await lt.ZP.post("/api/appointmentList/doctors",{id:ot.Z.state.doctorID}).then((t=>this.appointmentSched=t.data))}catch(a){this.errMsg=a}this.confirmLoadingButton=!1,this.isActiveModalConfirm=!1},async cancelAppointment(){let t="Your appointment has been cancelled!",e=`Your appointment visitation has been cancelled by your doctor Ms/Mr. ${this.doctorName}, reference ID: ${this.refIDPatient}, this is due to some emergencies or problems in their side. We hope you understand.`;ut.Z.emit("message",null,t,e,"Medic Search",new Date),await lt.ZP.put(`/api/appointmentList/${this.id}`,{ifPatientCancelled:!0}).catch((t=>this.errMsg=t)),await lt.ZP.post("/api/appointmentList/doctors",{id:ot.Z.state.doctorID,ongoing:!0}).then((t=>this.appointmentSched=t.data)),this.isActiveModalCancel=!1},async toggleConfirmModal(t,e,a,i,s,n,l,o){this.isActiveModalConfirm=!0,this.refIDPatient=t,this.doctorName=e,this.firstName=i,this.lastName=s,this.contactNum=n,this.birthDay=l,this.id=o,ut.Z.connect(),ut.Z.emit("join room",a)},cancelModalConfirm(){this.isActiveModalConfirm=!1,ut.Z.disconnect()},async toggleCancelModal(t){this.isActiveModalCancel=!0,this.refIDPatient=t.referenceID,this.doctorName=t.doctorName,this.id=t._id,ut.Z.connect(),ut.Z.emit("join room",t.patientID)},cancelModalCancel(){this.isActiveModalCancel=!1,ut.Z.disconnect()},generateRefID(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=e.length;for(let i=0;i<12;i++)t+=e.charAt(Math.floor(Math.random()*a));this.refID=t},handleFile(t){this.file=t.target.files[0]}}},mt=a(3744);const _t=(0,mt.Z)(pt,[["render",nt],["__scopeId","data-v-0b77fc52"]]);var bt=_t}}]);
//# sourceMappingURL=694.134f15b3.js.map